// Auto-generated decompiler unit: shape.cpp.decomp
// SourceMap: C:/msdev/work/age1_x1/Shape.cpp
#include "../include/common.h"

// Offset: 0x004B8B30
undefined TShape(TShape* this_) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: __thiscall TShape::TShape(void) */
    // 
    // void __thiscall TShape::TShape(TShape *this)
    // 
    // {
    //   this->shape = (uchar *)0x0;
    //   this->shape_header = (Shape_Header *)0x0;
    //   this->head = (Shape_File_Header *)0x0;
    //   this->offsets = (Shape_Offsets *)0x0;
    //   this->FShape = (SLhape_File_Header *)0x0;
    //   this->shape_info = (Shape_Info *)0x0;
    //   this->load_type = -1;
    //   this->load_size = 0;
    //   return;
    // }
    // 
    // 
}

// Offset: 0x004B8B50
undefined TShape(TShape* this_, char* param_2, long param_3) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: NextFile */
    // /* public: __thiscall TShape::TShape(char *,long) */
    // 
    // TShape * __thiscall TShape::TShape(TShape *this,char *param_1,long param_2)
    // 
    // {
    //   char cVar1;
    //   int iVar2;
    //   int iVar3;
    //   SLhape_File_Header *pSVar4;
    //   uchar *puVar5;
    //   Shape_File_Header *pSVar6;
    //   uint uVar7;
    //   uint uVar8;
    //   uint uVar9;
    //   char *pcVar10;
    //   char *pcVar11;
    //   char NextFile [260];
    //   
    //   this->shape = (uchar *)0x0;
    //   this->shape_header = (Shape_Header *)0x0;
    //   this->head = (Shape_File_Header *)0x0;
    //   this->offsets = (Shape_Offsets *)0x0;
    //   this->FShape = (SLhape_File_Header *)0x0;
    //   if ((shape_file_first != '\0') || (param_2 < 0)) {
    //     color_log('T','T',1);
    //     uVar7 = 0xffffffff;
    //     do {
    //       pcVar10 = param_1;
    //       if (uVar7 == 0) break;
    //       uVar7 = uVar7 - 1;
    //       pcVar10 = param_1 + 1;
    //       cVar1 = *param_1;
    //       param_1 = pcVar10;
    //     } while (cVar1 != '\0');
    //     uVar7 = ~uVar7;
    //     pcVar11 = NextFile;
    //     pcVar10 = pcVar10 + -uVar7;
    //     for (uVar8 = uVar7 >> 2; pcVar11 = pcVar11 + 4, uVar8 != 0; uVar8 = uVar8 - 1) {
    //       *(undefined4 *)pcVar11 = *(undefined4 *)pcVar10;
    //       pcVar10 = pcVar10 + 4;
    //     }
    //     for (uVar7 = uVar7 & 3; uVar7 != 0; uVar7 = uVar7 - 1) {
    //       *pcVar11 = *pcVar10;
    //       pcVar10 = pcVar10 + 1;
    //       pcVar11 = pcVar11 + 1;
    //     }
    //     uVar7 = 0xffffffff;
    //     pcVar10 = NextFile + 4;
    //     do {
    //       if (uVar7 == 0) break;
    //       uVar7 = uVar7 - 1;
    //       cVar1 = *pcVar10;
    //       pcVar10 = pcVar10 + 1;
    //     } while (cVar1 != '\0');
    //     uVar8 = 0xffffffff;
    //     pcVar10 = &s_SLP;
    //     do {
    //       pcVar11 = pcVar10;
    //       if (uVar8 == 0) break;
    //       uVar8 = uVar8 - 1;
    //       pcVar11 = pcVar10 + 1;
    //       cVar1 = *pcVar10;
    //       pcVar10 = pcVar11;
    //     } while (cVar1 != '\0');
    //     uVar8 = ~uVar8;
    //     pcVar10 = pcVar11 + -uVar8;
    //     pcVar11 = NextFile + ~uVar7;
    //     for (uVar9 = uVar8 >> 2; uVar9 != 0; uVar9 = uVar9 - 1) {
    //       *(undefined4 *)pcVar11 = *(undefined4 *)pcVar10;
    //       pcVar10 = pcVar10 + 4;
    //       pcVar11 = pcVar11 + 4;
    //     }
    //     for (uVar8 = uVar8 & 3; uVar8 != 0; uVar8 = uVar8 - 1) {
    //       *pcVar11 = *pcVar10;
    //       pcVar10 = pcVar10 + 1;
    //       pcVar11 = pcVar11 + 1;
    //     }
    //     Shape_Loads = Shape_Loads + 1;
    //     iVar2 = __open(NextFile + 4,0x8000);
    //     if (iVar2 != -1) {
    //       lseek(iVar2,0,2);
    //       iVar3 = __tell(iVar2);
    //       pSVar4 = (SLhape_File_Header *)malloc(iVar3);
    //       this->FShape = pSVar4;
    //       lseek(iVar2,0,0);
    //       read(iVar2,this->FShape,iVar3);
    //       close(iVar2);
    //       this->load_type = 1;
    //       this->shape_info = (Shape_Info *)(this->FShape + 1);
    //       this->load_size = iVar3;
    //     }
    //     if (this->FShape == (SLhape_File_Header *)0x0) {
    //       uVar7 = 0xffffffff;
    //       pcVar10 = NextFile + 4;
    //       do {
    //         if (uVar7 == 0) break;
    //         uVar7 = uVar7 - 1;
    //         cVar1 = *pcVar10;
    //         pcVar10 = pcVar10 + 1;
    //       } while (cVar1 != '\0');
    //       uVar8 = 0xffffffff;
    //       pcVar10 = &s_SHP;
    //       do {
    //         pcVar11 = pcVar10;
    //         if (uVar8 == 0) break;
    //         uVar8 = uVar8 - 1;
    //         pcVar11 = pcVar10 + 1;
    //         cVar1 = *pcVar10;
    //         pcVar10 = pcVar11;
    //       } while (cVar1 != '\0');
    //       uVar8 = ~uVar8;
    //       pcVar10 = pcVar11 + -uVar8;
    //       pcVar11 = NextFile + ~uVar7;
    //       for (uVar9 = uVar8 >> 2; uVar9 != 0; uVar9 = uVar9 - 1) {
    //         *(undefined4 *)pcVar11 = *(undefined4 *)pcVar10;
    //         pcVar10 = pcVar10 + 4;
    //         pcVar11 = pcVar11 + 4;
    //       }
    //       for (uVar8 = uVar8 & 3; uVar8 != 0; uVar8 = uVar8 - 1) {
    //         *pcVar11 = *pcVar10;
    //         pcVar10 = pcVar10 + 1;
    //         pcVar11 = pcVar11 + 1;
    //       }
    //       iVar2 = __open(NextFile + 4,0x8000);
    //       if (iVar2 != -1) {
    //         lseek(iVar2,0,2);
    //         iVar3 = __tell(iVar2);
    //         puVar5 = (uchar *)malloc(iVar3);
    //         this->shape = puVar5;
    //         lseek(iVar2,0,0);
    //         read(iVar2,this->shape,iVar3);
    //         close(iVar2);
    //         this->head = (Shape_File_Header *)this->shape;
    //         this->offsets = (Shape_Offsets *)((Shape_File_Header *)this->shape + 1);
    //         this->load_type = 1;
    //         this->load_size = iVar3;
    //       }
    //     }
    //     color_log('T','_',1);
    //   }
    //   if (((this->FShape == (SLhape_File_Header *)0x0) && (this->shape == (uchar *)0x0)) &&
    //      (-1 < param_2)) {
    //     Shape_Loads = Shape_Loads + 1;
    //     pSVar6 = (Shape_File_Header *)RESFILE_load(0x73687020,param_2,&this->load_type,&this->load_size)
    //     ;
    //     this->shape = (uchar *)pSVar6;
    //     if (pSVar6 == (Shape_File_Header *)0x0) {
    //       pSVar4 = (SLhape_File_Header *)
    //                RESFILE_load(0x736c7020,param_2,&this->load_type,&this->load_size);
    //       this->shape = (uchar *)pSVar4;
    //       if (pSVar4 != (SLhape_File_Header *)0x0) {
    //         this->FShape = pSVar4;
    //         this->shape = (uchar *)0x0;
    //         this->shape_info = (Shape_Info *)(pSVar4 + 1);
    //       }
    //     }
    //     else if (pSVar6->version == s_1_10._0_4_) {
    //       this->head = pSVar6;
    //       this->offsets = (Shape_Offsets *)(pSVar6 + 1);
    //       return this;
    //     }
    //   }
    //   return this;
    // }
    // 
    // 
}

// Offset: 0x004B8DD0
void TShape(TShape* this_) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: __thiscall TShape::~TShape(void) */
    // 
    // void __thiscall TShape::~TShape(TShape *this)
    // 
    // {
    //   if (this->FShape != (SLhape_File_Header *)0x0) {
    //     if (this->load_type == 1) {
    //       free(this->FShape);
    //     }
    //     if (this->load_type == 0) {
    //       RESFILE_Decommit_Mapped_Memory((uchar *)this->FShape,this->load_size);
    //     }
    //   }
    //   if (this->shape != (uchar *)0x0) {
    //     if (this->load_type == 1) {
    //       free(this->shape);
    //     }
    //     if (this->load_type == 0) {
    //       RESFILE_Decommit_Mapped_Memory(this->shape,this->load_size);
    //     }
    //   }
    //   this->shape = (uchar *)0x0;
    //   this->shape_header = (Shape_Header *)0x0;
    //   this->head = (Shape_File_Header *)0x0;
    //   this->offsets = (Shape_Offsets *)0x0;
    //   this->FShape = (SLhape_File_Header *)0x0;
    //   return;
    // }
    // 
    // 
}

// Offset: 0x004B8E40
uchar Check_shape(TShape* this_, long param_2, char* param_3) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: msg */
    // /* private: unsigned char __thiscall TShape::Check_shape(long,char *) */
    // 
    // uchar __thiscall TShape::Check_shape(TShape *this,long param_1,char *param_2)
    // 
    // {
    //   Shape_File_Header *pSVar1;
    //   char *pcVar2;
    //   char *msg;
    //   char *local_4;
    //   
    //   local_4 = (char *)0x0;
    //   if ((this->shape == (uchar *)0x0) && (this->FShape == (SLhape_File_Header *)0x0)) {
    //     return '\x01';
    //   }
    //   if (this->shape != (uchar *)0x0) {
    //     pSVar1 = this->head;
    //     if (pSVar1 == (Shape_File_Header *)0x0) {
    //       addstring(&local_4,s_ERROR___,param_2);
    //       pcVar2 = s___Bad_shape;
    //       goto LAB_004b8f57;
    //     }
    //     if ((-1 < param_1) && (pSVar1->shape_num <= param_1)) {
    //       addstring(&local_4,s_ERROR___,param_2);
    //       addstring(&local_4,local_4,s___shape_number_out_of_bounds);
    //       free(local_4);
    //       return '\x01';
    //     }
    //     if (pSVar1->version != s_1_10._0_4_) {
    //       addstring(&local_4,s_ERROR___,param_2);
    //       addstring(&local_4,local_4,s___shape_version_wrong);
    //       free(local_4);
    //       return '\x01';
    //     }
    //   }
    //   if (((this->FShape == (SLhape_File_Header *)0x0) || (param_1 < 0)) ||
    //      (param_1 < this->FShape->Num_Shapes)) {
    //     return '\0';
    //   }
    //   addstring(&local_4,s_ERROR___,param_2);
    //   pcVar2 = s___Fshape_number_out_of_bounds;
    // LAB_004b8f57:
    //   addstring(&local_4,local_4,pcVar2);
    //   free(local_4);
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004B8F90
int is_loaded(TShape* this_) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: int __thiscall TShape::is_loaded(void) */
    // 
    // int __thiscall TShape::is_loaded(TShape *this)
    // 
    // {
    //   if ((this->shape == (uchar *)0x0) && (this->FShape == (SLhape_File_Header *)0x0)) {
    //     return 0;
    //   }
    //   return 1;
    // }
    // 
    // 
}

// Offset: 0x004B8FB0
uchar shape_bounds(TShape* this_, long param_2, short* param_3, short* param_4) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: unsigned char __thiscall TShape::shape_bounds(long,short &,short &) */
    // 
    // uchar __thiscall TShape::shape_bounds(TShape *this,long param_1,short *param_2,short *param_3)
    // 
    // {
    //   int iVar1;
    //   uchar uVar2;
    //   
    //   if (this->FShape != (SLhape_File_Header *)0x0) {
    //     *param_2 = (short)this->shape_info[param_1].Width;
    //     *param_3 = (short)this->shape_info[param_1].Height;
    //     return '\x01';
    //   }
    //   if (-1 < param_1) {
    //     uVar2 = Check_shape(this,param_1,s_RGL_shape_resolution);
    //     if (uVar2 == '\0') {
    //       iVar1 = this->offsets[param_1].shape;
    //       this->shape_header = (Shape_Header *)(this->shape + iVar1);
    //       *param_2 = (short)((uint)((Shape_Header *)(this->shape + iVar1))->bounds >> 0x10);
    //       *param_3 = (short)this->shape_header->bounds;
    //       return '\x01';
    //     }
    //   }
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004B9040
long shape_count(TShape* this_) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: long __thiscall TShape::shape_count(void) */
    // 
    // long __thiscall TShape::shape_count(TShape *this)
    // 
    // {
    //   uchar uVar1;
    //   SLhape_File_Header *pSVar2;
    //   
    //   uVar1 = Check_shape(this,-1,s_RGL_shape_count);
    //   if (uVar1 != '\0') {
    //     return 0;
    //   }
    //   pSVar2 = this->FShape;
    //   if (pSVar2 == (SLhape_File_Header *)0x0) {
    //     pSVar2 = (SLhape_File_Header *)this->head;
    //   }
    //   return pSVar2->Num_Shapes;
    // }
    // 
    // 
}

// Offset: 0x004B9070
uchar shape_minmax(TShape* this_, long* param_2, long* param_3, long* param_4, long* param_5, long param_6) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: unsigned char __thiscall TShape::shape_minmax(long &,long &,long &,long &,long) */
    // 
    // uchar __thiscall
    // TShape::shape_minmax
    //           (TShape *this,long *param_1,long *param_2,long *param_3,long *param_4,long param_5)
    // 
    // {
    //   int iVar1;
    //   uchar uVar2;
    //   
    //   if (-1 < param_5) {
    //     uVar2 = Check_shape(this,param_5,s_RGL_shape_minxy);
    //     if (uVar2 == '\0') {
    //       if (this->FShape != (SLhape_File_Header *)0x0) {
    //         *param_1 = -this->shape_info[param_5].Hotspot_X;
    //         *param_2 = -this->shape_info[param_5].Hotspot_Y;
    //         *param_3 = (this->shape_info[param_5].Width - this->shape_info[param_5].Hotspot_X) + -1;
    //         *param_4 = (this->shape_info[param_5].Height - this->shape_info[param_5].Hotspot_Y) + -1;
    //         return '\x01';
    //       }
    //       iVar1 = this->offsets[param_5].shape;
    //       this->shape_header = (Shape_Header *)(this->shape + iVar1);
    //       *param_1 = ((Shape_Header *)(this->shape + iVar1))->xmin;
    //       *param_2 = this->shape_header->ymin;
    //       *param_3 = this->shape_header->xmax;
    //       *param_4 = this->shape_header->ymax;
    //       return '\x01';
    //     }
    //   }
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004B9140
uchar shape_check(TShape* this_, long param_2, long param_3, long param_4) {
    // --- Ghidra decompiler output ---
    // 
    // /* public: unsigned char __thiscall TShape::shape_check(long,long,long) */
    // 
    // uchar __thiscall TShape::shape_check(TShape *this,long param_1,long param_2,long param_3)
    // 
    // {
    //   byte bVar1;
    //   SLhape_File_Header *pSVar2;
    //   bool bVar3;
    //   long lVar4;
    //   uchar uVar5;
    //   Shape_Info *pSVar6;
    //   char *pcVar7;
    //   char *pcVar8;
    //   Shape_Header *pSVar9;
    //   int iVar10;
    //   int iVar11;
    //   Shape_Header *pSVar12;
    //   int iVar13;
    //   uint uVar14;
    //   int iVar15;
    //   
    //   lVar4 = param_1;
    //   if ((-1 < param_3) && (uVar5 = Check_shape(this,param_3,s_RGL_shape_draw), uVar5 == '\0')) {
    //     pSVar2 = this->FShape;
    //     if (pSVar2 == (SLhape_File_Header *)0x0) {
    //       pSVar12 = (Shape_Header *)(this->shape + this->offsets[param_3].shape);
    //       this->shape_header = pSVar12;
    //       iVar10 = pSVar12->ymin;
    //       iVar13 = pSVar12->xmin;
    //       pSVar9 = pSVar12 + 1;
    //       if ((((iVar10 <= param_2) && (param_2 <= pSVar12->ymax)) && (iVar13 <= param_1)) &&
    //          (param_1 <= pSVar12->xmax)) {
    //         if (iVar10 < param_2) {
    //           iVar10 = param_2 - iVar10;
    //           do {
    //             bVar3 = false;
    //             pSVar12 = pSVar9;
    //             do {
    //               bVar1 = (byte)pSVar12->bounds;
    //               pSVar9 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //               if ((bVar1 & 1) == 1) {
    //                 param_1 = (long)(bVar1 >> 1);
    //                 if (bVar1 >> 1 == 0) {
    // LAB_004b9372:
    //                   pSVar9 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //                 }
    //                 else {
    //                   pSVar9 = (Shape_Header *)((int)&pSVar9->bounds + param_1);
    //                 }
    //               }
    //               else {
    //                 if ((bVar1 & 0xfe) != 0) goto LAB_004b9372;
    //                 bVar3 = true;
    //               }
    //               pSVar12 = pSVar9;
    //             } while (!bVar3);
    //             iVar10 = iVar10 + -1;
    //           } while (iVar10 != 0);
    //         }
    //         bVar3 = false;
    //         do {
    //           bVar1 = (byte)pSVar9->bounds;
    //           pSVar12 = (Shape_Header *)((int)&pSVar9->bounds + 1);
    //           if ((bVar1 & 1) == 1) {
    //             param_1 = (long)(bVar1 >> 1);
    //             if (bVar1 >> 1 == 0) {
    //               iVar13 = iVar13 + (uint)(byte)pSVar12->bounds;
    //               if (lVar4 < iVar13) {
    //                 return '\0';
    //               }
    // LAB_004b93d9:
    //               pSVar12 = (Shape_Header *)((int)&pSVar9->bounds + 2);
    //             }
    //             else {
    //               iVar13 = iVar13 + param_1;
    //               if (lVar4 < iVar13) {
    //                 return '\x01';
    //               }
    //               pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + param_1);
    //             }
    //           }
    //           else {
    //             param_1 = (long)(bVar1 >> 1);
    //             if (bVar1 >> 1 != 0) {
    //               iVar13 = iVar13 + param_1;
    //               if (lVar4 < iVar13) {
    //                 return '\x01';
    //               }
    //               goto LAB_004b93d9;
    //             }
    //             bVar3 = true;
    //           }
    //           pSVar9 = pSVar12;
    //           if (bVar3) {
    //             return '\0';
    //           }
    //         } while( true );
    //       }
    //     }
    //     else {
    //       pSVar6 = this->shape_info + param_3;
    //       iVar15 = pSVar6->Hotspot_X + param_1;
    //       iVar13 = pSVar6->Width;
    //       iVar10 = pSVar6->Hotspot_Y + param_2;
    //       if (((-1 < iVar15) && (-1 < iVar10)) && ((iVar15 < iVar13 && (iVar10 < pSVar6->Height)))) {
    //         iVar10 = iVar10 * 4;
    //         iVar11 = (int)*(short *)(pSVar2->Version + iVar10 + pSVar6->Shape_Outline_Offset);
    //         if (((-1 < iVar11) && (iVar11 <= iVar15)) &&
    //            ((iVar15 <= iVar13 - *(short *)(pSVar2->Version +
    //                                           iVar10 + pSVar6->Shape_Outline_Offset + 2) &&
    //             (pcVar7 = pSVar2->Version +
    //                       *(int *)(pSVar2->Version + iVar10 + pSVar6->Shape_Data_Offsets),
    //             iVar11 < iVar13)))) {
    //           while (iVar11 <= iVar15) {
    //             bVar1 = *pcVar7;
    //             pcVar8 = pcVar7 + 1;
    //             param_1 = (long)bVar1;
    //             switch(bVar1 & 0xf) {
    //             case 0:
    //             case 4:
    //             case 8:
    //             case 0xc:
    //               iVar11 = iVar11 + (uint)(bVar1 >> 2);
    //               if (iVar15 < iVar11) {
    //                 return '\x01';
    //               }
    //               pcVar8 = pcVar8 + (bVar1 >> 2);
    //               break;
    //             case 1:
    //             case 5:
    //             case 9:
    //             case 0xd:
    //               iVar11 = iVar11 + (uint)(bVar1 >> 2);
    //               break;
    //             case 2:
    //               uVar14 = param_1 << 4 | (uint)(byte)*pcVar8;
    //               iVar11 = iVar11 + uVar14;
    //               if (iVar15 < iVar11) {
    //                 return '\x01';
    //               }
    //               pcVar8 = pcVar7 + uVar14 + 2;
    //               break;
    //             case 3:
    //               bVar1 = *pcVar8;
    //               pcVar8 = pcVar7 + 2;
    //               iVar11 = iVar11 + (param_1 << 4 | (uint)bVar1);
    //               break;
    //             case 6:
    //               uVar14 = (uint)(bVar1 >> 4);
    //               if (uVar14 == 0) {
    //                 uVar14 = (uint)(byte)*pcVar8;
    //                 pcVar8 = pcVar7 + 2;
    //               }
    //               iVar11 = iVar11 + uVar14;
    //               if (iVar15 < iVar11) {
    //                 return '\x01';
    //               }
    //               pcVar8 = pcVar8 + uVar14;
    //               break;
    //             case 7:
    //             case 10:
    //               uVar14 = (uint)(bVar1 >> 4);
    //               if (uVar14 == 0) {
    //                 uVar14 = (uint)(byte)*pcVar8;
    //                 pcVar8 = pcVar7 + 2;
    //               }
    //               iVar11 = iVar11 + uVar14;
    //               if (iVar15 < iVar11) {
    //                 return '\x01';
    //               }
    //               pcVar8 = pcVar8 + 1;
    //               break;
    //             case 0xb:
    //               uVar14 = (uint)(bVar1 >> 4);
    //               if (uVar14 == 0) {
    //                 uVar14 = (uint)(byte)*pcVar8;
    //                 pcVar8 = pcVar7 + 2;
    //               }
    //               iVar11 = iVar11 + uVar14;
    //               if (iVar15 < iVar11) {
    //                 return '\x01';
    //               }
    //               break;
    //             default:
    //               goto switchD_004b9211_caseD_e;
    //             }
    //             pcVar7 = pcVar8;
    //             if (iVar13 <= iVar11) {
    //               return '\0';
    //             }
    //           }
    //         }
    //       }
    //     }
    //   }
    // switchD_004b9211_caseD_e:
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004B93FD
undefined FUN_004b93fd() {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Unable to track spacebase fully for stack */
    // 
    // uchar FUN_004b93fd(void)
    // 
    // {
    //   char *pcVar1;
    //   SLhape_File_Header *pSVar2;
    //   undefined4 uVar3;
    //   undefined4 uVar4;
    //   uchar *puVar5;
    //   char cVar6;
    //   long lVar7;
    //   DClipInfo_List *this;
    //   uchar uVar8;
    //   char *in_EAX;
    //   undefined4 uVar9;
    //   int iVar10;
    //   TShape *in_ECX;
    //   int iVar11;
    //   char cVar14;
    //   char *in_EDX;
    //   Shape_Header *pSVar12;
    //   uint uVar13;
    //   int unaff_EBX;
    //   int iVar15;
    //   int iVar16;
    //   int iVar17;
    //   undefined4 unaff_EBP;
    //   char *unaff_ESI;
    //   undefined4 unaff_EDI;
    //   SLhape_File_Header *pSVar18;
    //   char in_CF;
    //   int unaff_retaddr;
    //   
    //   in_EDX[-0x6da4ffb5] = (in_EDX[-0x6da4ffb5] - (char)in_EDX) - in_CF;
    //   cVar14 = (char)((uint)in_EDX >> 8);
    //   *unaff_ESI = *unaff_ESI + cVar14;
    //   cVar6 = (char)unaff_EBX;
    //   pcVar1 = (char *)((int)in_EAX * 5 + 0x4b);
    //   *pcVar1 = *pcVar1 + (char)((uint)in_ECX >> 8);
    //   *in_EDX = *in_EDX + cVar6 + -2;
    //   *(char *)(unaff_EBX + -0x71) = *(char *)(unaff_EBX + -0x71) + cVar6 + -3;
    //   pcVar1 = (char *)((int)in_EDX * 5 + -0x6d59ffb5);
    //   *pcVar1 = *pcVar1 + (char)in_EAX;
    //   *in_EAX = *in_EAX + cVar6 + -5;
    //   *(char *)(unaff_EBX + -0x74) = *(char *)(unaff_EBX + -0x74) + cVar6 + -6;
    //   unaff_ESI[-0x38ffb46e] = unaff_ESI[-0x38ffb46e] + cVar14;
    //   *in_EAX = *in_EAX + cVar6 + -8;
    //   *(char *)(unaff_EBX + -0x77) = *(char *)(unaff_EBX + -0x77) + cVar6 + -9;
    //   iVar15 = unaff_EBX + -10;
    //   iVar15 = CONCAT22((short)((uint)iVar15 >> 0x10),
    //                     CONCAT11((char)((uint)iVar15 >> 8) + (char)((uint)in_EAX >> 8),(char)iVar15));
    //   iVar16 = iVar15 + -1;
    //   *(char *)(iVar15 + -0x74ace315) = *(char *)(iVar15 + -0x74ace315) + (char)in_EDX + -1;
    //   *(undefined4 *)(unaff_retaddr + -4) = unaff_EBP;
    //   *(char **)(unaff_retaddr + -8) = unaff_ESI;
    //   *(undefined4 *)(unaff_retaddr + -0xc) = unaff_EDI;
    //   *(undefined1 *)(unaff_retaddr + 7) = 0;
    //   if (iVar16 < 0) {
    //     return '\0';
    //   }
    //   *(char **)(unaff_retaddr + -0x10) = s_RGL_shape_draw;
    //   *(int *)(unaff_retaddr + -0x14) = iVar16;
    //   *(undefined4 *)(unaff_retaddr + -0x18) = 0x4b9465;
    //   uVar8 = TShape::Check_shape(in_ECX,*(long *)(unaff_retaddr + -0x14),
    //                               *(char **)(unaff_retaddr + -0x10));
    //   iVar10 = SDI_Draw_Level;
    //   if (uVar8 != '\0') {
    //     return '\0';
    //   }
    //   if (in_ECX->FShape != (SLhape_File_Header *)0x0) {
    //     if (SDI_Capture_Info != 0) {
    //       pSVar18 = in_ECX->FShape + iVar15;
    //       *(long *)(unaff_retaddr + -0x10) = SDI_Object_ID;
    //       *(int *)(unaff_retaddr + -0x14) = iVar10;
    //       *(undefined4 *)(unaff_retaddr + -0x18) = 0x4b949c;
    //       uVar9 = _ASMGet_Color_Xform();
    //       iVar15 = *(int *)(pSVar18->Comment + 0x10);
    //       *(undefined4 *)(unaff_retaddr + -0x18) = uVar9;
    //       lVar7 = fog_next_shape;
    //       *(undefined4 *)(unaff_retaddr + -0x1c) = *(undefined4 *)(unaff_retaddr + 0x38);
    //       iVar16 = *(int *)(pSVar18->Comment + 0x14);
    //       *(long *)(unaff_retaddr + -0x20) = lVar7;
    //       iVar10 = SDI_Draw_Line;
    //       *(int *)(unaff_retaddr + -0x24) = *(int *)(unaff_retaddr + 0x2c) - iVar16;
    //       pSVar2 = in_ECX->FShape;
    //       *(int *)(unaff_retaddr + -0x28) = *(int *)(unaff_retaddr + 0x28) - iVar15;
    //       *(int *)(unaff_retaddr + -0x2c) = iVar10;
    //       *(SLhape_File_Header **)(unaff_retaddr + -0x30) = pSVar18;
    //       *(SLhape_File_Header **)(unaff_retaddr + -0x34) = pSVar2;
    //       this = SDI_List;
    //       *(undefined4 *)(unaff_retaddr + -0x38) = 0x4b94d2;
    //       DClipInfo_List::AddDrawNode
    //                 (this,*(void **)(unaff_retaddr + -0x34),*(Shape_Info **)(unaff_retaddr + -0x30),
    //                  *(int *)(unaff_retaddr + -0x2c),*(int *)(unaff_retaddr + -0x28),
    //                  *(int *)(unaff_retaddr + -0x24),*(int *)(unaff_retaddr + -0x20),
    //                  *(uchar **)(unaff_retaddr + -0x1c),*(int *)(unaff_retaddr + -0x18),
    //                  *(int *)(unaff_retaddr + -0x14),*(int *)(unaff_retaddr + -0x10));
    //       return '\x01';
    //     }
    //     iVar16 = *(int *)(unaff_retaddr + 0x24);
    //     iVar10 = *(int *)(iVar16 + 0xd0);
    //     iVar11 = *(int *)(*(int *)(iVar16 + 0xcc) + 0x50);
    //     iVar17 = *(int *)(iVar10 + 0x50);
    //     if (iVar11 < iVar17) {
    //       iVar17 = iVar11;
    //     }
    //     uVar9 = *(undefined4 *)(iVar16 + 0xc0);
    //     *(int *)(unaff_retaddr + -0x10) = iVar17 + -1;
    //     *(undefined4 *)(unaff_retaddr + -0x14) = *(undefined4 *)(iVar10 + 0x5c);
    //     uVar3 = *(undefined4 *)(iVar10 + 0x40);
    //     uVar4 = *(undefined4 *)(iVar10 + 0x3c);
    //     *(undefined4 *)(unaff_retaddr + -0x18) = 0;
    //     *(undefined4 *)(unaff_retaddr + -0x1c) = 0;
    //     *(undefined4 *)(unaff_retaddr + -0x20) = uVar3;
    //     *(undefined4 *)(unaff_retaddr + -0x24) = uVar4;
    //     *(undefined4 *)(unaff_retaddr + -0x28) = uVar9;
    //     *(undefined4 *)(unaff_retaddr + -0x2c) = 0x4b951b;
    //     _ASMSet_Surface_Info();
    //     if (*(int *)(unaff_retaddr + 0x38) != 0) {
    //       *(int *)(unaff_retaddr + -0x10) = *(int *)(unaff_retaddr + 0x38);
    //       *(undefined4 *)(unaff_retaddr + -0x14) = 0x4b952c;
    //       _ASMSet_Xlate_Table();
    //     }
    //     pSVar2 = in_ECX->FShape;
    //     *(long *)(unaff_retaddr + -0x10) = fog_next_shape;
    //     pSVar18 = pSVar2 + iVar15;
    //     uVar9 = *(undefined4 *)pSVar18->Version;
    //     *(long *)(unaff_retaddr + -0x14) = pSVar18->Num_Shapes;
    //     uVar3 = *(undefined4 *)(pSVar18->Comment + 0xc);
    //     iVar15 = *(int *)(pSVar18->Comment + 0x10);
    //     *(undefined4 *)(unaff_retaddr + -0x18) = uVar9;
    //     uVar9 = *(undefined4 *)(pSVar18->Comment + 8);
    //     *(undefined4 *)(unaff_retaddr + -0x1c) = uVar3;
    //     *(undefined4 *)(unaff_retaddr + -0x20) = uVar9;
    //     *(int *)(unaff_retaddr + -0x24) =
    //          *(int *)(unaff_retaddr + 0x2c) - *(int *)(pSVar18->Comment + 0x14);
    //     *(int *)(unaff_retaddr + -0x28) = *(int *)(unaff_retaddr + 0x28) - iVar15;
    //     *(SLhape_File_Header **)(unaff_retaddr + -0x2c) = pSVar2;
    //     *(undefined4 *)(unaff_retaddr + -0x30) = 0x4b956a;
    //     _ASMDraw_Sprite();
    //     ASM_Fast_Count = ASM_Fast_Count + 1;
    //     return '\x01';
    //   }
    //   iVar15 = *(int *)(unaff_retaddr + 0x24);
    //   *(undefined4 *)(unaff_retaddr + 0x10) = *(undefined4 *)(iVar15 + 0x28);
    //   *(undefined4 *)(unaff_retaddr + 0x14) = *(undefined4 *)(iVar15 + 0x2c);
    //   *(undefined4 *)(unaff_retaddr + 0x18) = *(undefined4 *)(iVar15 + 0x30);
    //   puVar5 = in_ECX->shape;
    //   *(undefined4 *)(unaff_retaddr + 0x1c) = *(undefined4 *)(iVar15 + 0x34);
    //   if (puVar5 == (uchar *)0x0) {
    //     return '\0';
    //   }
    //   iVar10 = *(int *)(unaff_retaddr + 0x28);
    //   pSVar12 = (Shape_Header *)(puVar5 + in_ECX->offsets[iVar16].shape);
    //   in_ECX->shape_header = pSVar12;
    //   iVar11 = pSVar12->ymin;
    //   iVar16 = pSVar12->ymax;
    //   iVar17 = pSVar12->xmax + *(int *)(unaff_retaddr + 0x28);
    //   iVar10 = pSVar12->xmin + iVar10;
    //   *(int *)(unaff_retaddr + 0x24) = iVar10;
    //   iVar16 = iVar16 + *(int *)(unaff_retaddr + 0x2c);
    //   iVar11 = iVar11 + *(int *)(unaff_retaddr + 0x2c);
    //   *(int *)(unaff_retaddr + 8) = iVar16;
    //   *(int *)(unaff_retaddr + 0x2c) = iVar11;
    //   *(int *)(unaff_retaddr + 0xc) = iVar17;
    //   *(int *)(unaff_retaddr + 0x28) = iVar17;
    //   if (iVar10 < *(int *)(unaff_retaddr + 0x10)) {
    //     *(int *)(unaff_retaddr + 0x24) = *(int *)(unaff_retaddr + 0x10);
    //   }
    //   if (iVar11 < *(int *)(unaff_retaddr + 0x14)) {
    //     *(int *)(unaff_retaddr + 0x2c) = *(int *)(unaff_retaddr + 0x14);
    //   }
    //   if (*(int *)(unaff_retaddr + 0x18) < iVar17) {
    //     *(int *)(unaff_retaddr + 0x28) = *(int *)(unaff_retaddr + 0x18);
    //   }
    //   if (*(int *)(unaff_retaddr + 0x1c) < *(int *)(unaff_retaddr + 8)) {
    //     iVar16 = *(int *)(unaff_retaddr + 0x1c);
    //   }
    //   if (*(int *)(unaff_retaddr + 0x24) < 0) {
    //     *(undefined4 *)(unaff_retaddr + 0x24) = 0;
    //   }
    //   if (*(int *)(unaff_retaddr + 0x2c) < 0) {
    //     *(undefined4 *)(unaff_retaddr + 0x2c) = 0;
    //   }
    //   iVar17 = *(int *)(unaff_retaddr + 0x28);
    //   if (*(int *)(iVar15 + 0x18) <= iVar17) {
    //     iVar17 = *(int *)(iVar15 + 0x18) + -1;
    //     *(int *)(unaff_retaddr + 0x28) = iVar17;
    //   }
    //   if (*(int *)(iVar15 + 0x1c) <= iVar16) {
    //     iVar16 = *(int *)(iVar15 + 0x1c) + -1;
    //   }
    //   if (iVar17 < *(int *)(unaff_retaddr + 0x24)) {
    //     return '\0';
    //   }
    //   iVar17 = *(int *)(unaff_retaddr + 0x2c);
    //   if (iVar16 < iVar17) {
    //     return '\0';
    //   }
    //   if ((*(int *)(unaff_retaddr + 0x24) == iVar10) && (iVar17 == iVar11)) {
    //     if ((*(int *)(unaff_retaddr + 0x28) == *(int *)(unaff_retaddr + 0xc)) &&
    //        (iVar16 == *(int *)(unaff_retaddr + 8))) {
    //       uVar13 = *(uint *)(unaff_retaddr + 0x34) & 0xff;
    //       if (uVar13 == 0) {
    //         *(undefined4 *)(unaff_retaddr + -0x10) = *(undefined4 *)(unaff_retaddr + 0x30);
    //         *(int *)(unaff_retaddr + -0x14) = iVar11;
    //         *(int *)(unaff_retaddr + -0x18) = iVar10;
    //         *(int *)(unaff_retaddr + -0x1c) = iVar15;
    //         *(undefined4 *)(unaff_retaddr + -0x20) = 0x4b9731;
    //         uVar8 = TShape::shape_draw_unclipped
    //                           (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x1c),
    //                            *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                            *(long *)(unaff_retaddr + -0x10));
    //         return uVar8;
    //       }
    //       if (uVar13 == 1) {
    //         if (*(int *)(unaff_retaddr + 0x38) == 0) {
    //           *(undefined4 *)(unaff_retaddr + -0x10) = *(undefined4 *)(unaff_retaddr + 0x30);
    //           *(int *)(unaff_retaddr + -0x14) = iVar11;
    //           *(int *)(unaff_retaddr + -0x18) = iVar10;
    //           *(int *)(unaff_retaddr + -0x1c) = iVar15;
    //           *(undefined4 *)(unaff_retaddr + -0x20) = 0x4b96fe;
    //           uVar8 = TShape::shape_draw_unclipped
    //                             (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x1c),
    //                              *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                              *(long *)(unaff_retaddr + -0x10));
    //           return uVar8;
    //         }
    //         *(int *)(unaff_retaddr + -0x10) = *(int *)(unaff_retaddr + 0x38);
    //         *(undefined4 *)(unaff_retaddr + -0x14) = *(undefined4 *)(unaff_retaddr + 0x30);
    //         *(int *)(unaff_retaddr + -0x18) = iVar11;
    //         *(int *)(unaff_retaddr + -0x1c) = iVar10;
    //         *(int *)(unaff_retaddr + -0x20) = iVar15;
    //         *(undefined4 *)(unaff_retaddr + -0x24) = 0x4b9718;
    //         uVar8 = TShape::shape_color_trans_unclipped
    //                           (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x20),
    //                            *(long *)(unaff_retaddr + -0x1c),*(long *)(unaff_retaddr + -0x18),
    //                            *(long *)(unaff_retaddr + -0x14),*(uchar **)(unaff_retaddr + -0x10));
    //         return uVar8;
    //       }
    //       if (uVar13 == 2) {
    //         if (*(int *)(unaff_retaddr + 0x38) == 0) {
    //           *(undefined4 *)(unaff_retaddr + -0x10) = *(undefined4 *)(unaff_retaddr + 0x30);
    //           *(int *)(unaff_retaddr + -0x14) = iVar11;
    //           *(int *)(unaff_retaddr + -0x18) = iVar10;
    //           *(int *)(unaff_retaddr + -0x1c) = iVar15;
    //           *(undefined4 *)(unaff_retaddr + -0x20) = 0x4b96c8;
    //           uVar8 = TShape::shape_draw_unclipped
    //                             (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x1c),
    //                              *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                              *(long *)(unaff_retaddr + -0x10));
    //           return uVar8;
    //         }
    //         *(int *)(unaff_retaddr + -0x10) = *(int *)(unaff_retaddr + 0x38);
    //         *(int *)(unaff_retaddr + -0x14) = iVar11;
    //         *(int *)(unaff_retaddr + -0x18) = iVar10;
    //         *(int *)(unaff_retaddr + -0x1c) = iVar15;
    //         *(undefined4 *)(unaff_retaddr + -0x20) = 0x4b96dd;
    //         uVar8 = TShape::shape_shadow_unclipped
    //                           (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x1c),
    //                            *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                            *(uchar **)(unaff_retaddr + -0x10));
    //         return uVar8;
    //       }
    //       goto LAB_004b97cb;
    //     }
    //     iVar17 = *(int *)(unaff_retaddr + 0x2c);
    //   }
    //   uVar13 = *(uint *)(unaff_retaddr + 0x34) & 0xff;
    //   if (uVar13 != 0) {
    //     if (uVar13 == 1) {
    //       if (*(int *)(unaff_retaddr + 0x38) != 0) {
    //         *(int *)(unaff_retaddr + -0x10) = *(int *)(unaff_retaddr + 0x38);
    //         *(int *)(unaff_retaddr + -0x14) = iVar16;
    //         *(undefined4 *)(unaff_retaddr + -0x18) = *(undefined4 *)(unaff_retaddr + 0x28);
    //         *(int *)(unaff_retaddr + -0x1c) = iVar17;
    //         *(undefined4 *)(unaff_retaddr + -0x20) = *(undefined4 *)(unaff_retaddr + 0x24);
    //         *(undefined4 *)(unaff_retaddr + -0x24) = *(undefined4 *)(unaff_retaddr + 0x30);
    //         *(int *)(unaff_retaddr + -0x28) = iVar11;
    //         *(int *)(unaff_retaddr + -0x2c) = iVar10;
    //         *(int *)(unaff_retaddr + -0x30) = iVar15;
    //         *(undefined4 *)(unaff_retaddr + -0x34) = 0x4b97a1;
    //         uVar8 = TShape::shape_color_trans_clipped
    //                           (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x30),
    //                            *(long *)(unaff_retaddr + -0x2c),*(long *)(unaff_retaddr + -0x28),
    //                            *(long *)(unaff_retaddr + -0x24),*(long *)(unaff_retaddr + -0x20),
    //                            *(long *)(unaff_retaddr + -0x1c),*(long *)(unaff_retaddr + -0x18),
    //                            *(long *)(unaff_retaddr + -0x14),*(uchar **)(unaff_retaddr + -0x10));
    //         return uVar8;
    //       }
    //     }
    //     else {
    //       if (uVar13 != 2) {
    // LAB_004b97cb:
    //         return *(uchar *)(unaff_retaddr + 7);
    //       }
    //       if (*(int *)(unaff_retaddr + 0x38) != 0) {
    //         *(int *)(unaff_retaddr + -0x10) = *(int *)(unaff_retaddr + 0x38);
    //         *(int *)(unaff_retaddr + -0x14) = iVar16;
    //         *(undefined4 *)(unaff_retaddr + -0x18) = *(undefined4 *)(unaff_retaddr + 0x28);
    //         *(int *)(unaff_retaddr + -0x1c) = iVar17;
    //         *(undefined4 *)(unaff_retaddr + -0x20) = *(undefined4 *)(unaff_retaddr + 0x24);
    //         *(int *)(unaff_retaddr + -0x24) = iVar11;
    //         *(int *)(unaff_retaddr + -0x28) = iVar10;
    //         *(int *)(unaff_retaddr + -0x2c) = iVar15;
    //         *(undefined4 *)(unaff_retaddr + -0x30) = 0x4b9773;
    //         uVar8 = TShape::shape_shadow_clipped
    //                           (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x2c),
    //                            *(long *)(unaff_retaddr + -0x28),*(long *)(unaff_retaddr + -0x24),
    //                            *(long *)(unaff_retaddr + -0x20),*(long *)(unaff_retaddr + -0x1c),
    //                            *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                            *(uchar **)(unaff_retaddr + -0x10));
    //         return uVar8;
    //       }
    //     }
    //   }
    //   *(int *)(unaff_retaddr + -0x10) = iVar16;
    //   *(undefined4 *)(unaff_retaddr + -0x14) = *(undefined4 *)(unaff_retaddr + 0x28);
    //   *(int *)(unaff_retaddr + -0x18) = iVar17;
    //   *(undefined4 *)(unaff_retaddr + -0x1c) = *(undefined4 *)(unaff_retaddr + 0x24);
    //   *(int *)(unaff_retaddr + -0x20) = iVar11;
    //   *(int *)(unaff_retaddr + -0x24) = iVar10;
    //   *(int *)(unaff_retaddr + -0x28) = iVar15;
    //   *(undefined4 *)(unaff_retaddr + -0x2c) = 0x4b97c1;
    //   uVar8 = TShape::shape_draw_clipped
    //                     (in_ECX,*(TDrawArea **)(unaff_retaddr + -0x28),*(long *)(unaff_retaddr + -0x24),
    //                      *(long *)(unaff_retaddr + -0x20),*(long *)(unaff_retaddr + -0x1c),
    //                      *(long *)(unaff_retaddr + -0x18),*(long *)(unaff_retaddr + -0x14),
    //                      *(long *)(unaff_retaddr + -0x10));
    //   return uVar8;
    // }
    // 
    // 
}

// Offset: 0x004B9440
uchar shape_draw(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, uchar param_6, uchar* param_7) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: ret_num */
    // /* public: unsigned char __thiscall TShape::shape_draw(class TDrawArea *,long,long,long,unsigned
    //    char,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_draw(TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,
    //                   uchar param_5,uchar *param_6)
    // 
    // {
    //   TSpan_List_Manager *pTVar1;
    //   TDrawArea *pTVar2;
    //   int iVar3;
    //   TDrawArea *pTVar4;
    //   uchar uVar5;
    //   int iVar6;
    //   SLhape_File_Header *pSVar7;
    //   TDrawArea *pTVar8;
    //   int iVar9;
    //   Shape_Header *pSVar10;
    //   int iVar11;
    //   int iVar12;
    //   int iVar13;
    //   Shape_Info *pSVar14;
    //   long lVar15;
    //   uchar ret_num;
    //   long shape_y1;
    //   long shape_x1;
    //   tagRECT rect;
    //   
    //   pTVar4 = param_1;
    //   if ((-1 < param_4) && (uVar5 = Check_shape(this,param_4,s_RGL_shape_draw), uVar5 == '\0')) {
    //     if (this->FShape != (SLhape_File_Header *)0x0) {
    //       if (SDI_Capture_Info != 0) {
    //         pSVar14 = (Shape_Info *)(this->FShape + param_4 + 1);
    //         iVar13 = SDI_Draw_Level;
    //         lVar15 = SDI_Object_ID;
    //         iVar6 = _ASMGet_Color_Xform();
    //         DClipInfo_List::AddDrawNode
    //                   (SDI_List,this->FShape,pSVar14,SDI_Draw_Line,param_2 - pSVar14->Hotspot_X,
    //                    param_3 - pSVar14->Hotspot_Y,fog_next_shape,param_6,iVar6,iVar13,lVar15);
    //         return '\x01';
    //       }
    //       pTVar1 = param_1->CurSpanList;
    //       iVar13 = param_1->SpanList->Num_Lines;
    //       iVar6 = pTVar1->Num_Lines;
    //       if (iVar13 < iVar6) {
    //         iVar6 = iVar13;
    //       }
    //       _ASMSet_Surface_Info
    //                 (param_1->CurDisplayOffsets,pTVar1->Line_Head_Ptrs,pTVar1->Line_Tail_Ptrs,0,0,
    //                  pTVar1->Max_Span_Px,iVar6 + -1);
    //       if (param_6 != (uchar *)0x0) {
    //         _ASMSet_Xlate_Table(param_6);
    //       }
    //       pSVar7 = this->FShape + param_4 + 1;
    //       _ASMDraw_Sprite(this->FShape,param_2 - *(int *)(pSVar7->Comment + 0x10),
    //                       param_3 - *(int *)(pSVar7->Comment + 0x14),
    //                       *(undefined4 *)(pSVar7->Comment + 8),*(undefined4 *)(pSVar7->Comment + 0xc),
    //                       *(undefined4 *)pSVar7->Version,pSVar7->Num_Shapes,fog_next_shape);
    //       ASM_Fast_Count = ASM_Fast_Count + 1;
    //       return '\x01';
    //     }
    //     pTVar2 = (TDrawArea *)(param_1->ClipRect).left;
    //     iVar13 = (param_1->ClipRect).top;
    //     iVar6 = (param_1->ClipRect).right;
    //     iVar3 = (param_1->ClipRect).bottom;
    //     if (this->shape != (uchar *)0x0) {
    //       pSVar10 = (Shape_Header *)(this->shape + this->offsets[param_4].shape);
    //       this->shape_header = pSVar10;
    //       iVar12 = pSVar10->xmax + param_2;
    //       pTVar8 = (TDrawArea *)(pSVar10->xmin + param_2);
    //       iVar11 = pSVar10->ymax + param_3;
    //       iVar9 = pSVar10->ymin + param_3;
    //       param_1 = pTVar8;
    //       if ((int)pTVar8 < (int)pTVar2) {
    //         param_1 = pTVar2;
    //       }
    //       param_3 = iVar9;
    //       if (iVar9 < iVar13) {
    //         param_3 = iVar13;
    //       }
    //       param_2 = iVar12;
    //       if (iVar6 < iVar12) {
    //         param_2 = iVar6;
    //       }
    //       iVar13 = iVar11;
    //       if (iVar3 < iVar11) {
    //         iVar13 = iVar3;
    //       }
    //       if ((int)param_1 < 0) {
    //         param_1 = (TDrawArea *)0x0;
    //       }
    //       if (param_3 < 0) {
    //         param_3 = 0;
    //       }
    //       if (pTVar4->Width <= param_2) {
    //         param_2 = pTVar4->Width + -1;
    //       }
    //       if (pTVar4->Height <= iVar13) {
    //         iVar13 = pTVar4->Height + -1;
    //       }
    //       if (((int)param_1 <= param_2) && (param_3 <= iVar13)) {
    //         if ((param_1 != pTVar8) ||
    //            (((param_3 != iVar9 || (param_2 != iVar12)) || (iVar13 != iVar11)))) {
    //           if (param_5 != '\0') {
    //             if (param_5 == '\x01') {
    //               if (param_6 != (uchar *)0x0) {
    //                 uVar5 = shape_color_trans_clipped
    //                                   (this,pTVar4,(long)pTVar8,iVar9,param_4,(long)param_1,param_3,
    //                                    param_2,iVar13,param_6);
    //                 return uVar5;
    //               }
    //             }
    //             else {
    //               if (param_5 != '\x02') {
    //                 return '\0';
    //               }
    //               if (param_6 != (uchar *)0x0) {
    //                 uVar5 = shape_shadow_clipped
    //                                   (this,pTVar4,(long)pTVar8,iVar9,(long)param_1,param_3,param_2,
    //                                    iVar13,param_6);
    //                 return uVar5;
    //               }
    //             }
    //           }
    //           uVar5 = shape_draw_clipped(this,pTVar4,(long)pTVar8,iVar9,(long)param_1,param_3,param_2,
    //                                      iVar13);
    //           return uVar5;
    //         }
    //         if (param_5 == '\0') {
    //           uVar5 = shape_draw_unclipped(this,pTVar4,(long)pTVar8,iVar9,param_4);
    //           return uVar5;
    //         }
    //         if (param_5 == '\x01') {
    //           if (param_6 == (uchar *)0x0) {
    //             uVar5 = shape_draw_unclipped(this,pTVar4,(long)pTVar8,iVar9,param_4);
    //             return uVar5;
    //           }
    //           uVar5 = shape_color_trans_unclipped(this,pTVar4,(long)pTVar8,iVar9,param_4,param_6);
    //           return uVar5;
    //         }
    //         if (param_5 != '\x02') {
    //           return '\0';
    //         }
    //         if (param_6 == (uchar *)0x0) {
    //           uVar5 = shape_draw_unclipped(this,pTVar4,(long)pTVar8,iVar9,param_4);
    //           return uVar5;
    //         }
    //         uVar5 = shape_shadow_unclipped(this,pTVar4,(long)pTVar8,iVar9,param_6);
    //         return uVar5;
    //       }
    //     }
    //   }
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004B97F0
uchar shape_draw_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: width */
    // /* private: unsigned char __thiscall TShape::shape_draw_unclipped(class TDrawArea *,long,long,long)
    //     */
    // 
    // uchar __thiscall
    // TShape::shape_draw_unclipped(TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4)
    // 
    // {
    //   byte bVar1;
    //   int iVar2;
    //   bool bVar3;
    //   long lVar4;
    //   int iVar5;
    //   uint uVar6;
    //   TDrawArea *pTVar7;
    //   uchar *puVar8;
    //   uchar *puVar9;
    //   Shape_Header *pSVar10;
    //   Shape_Header *pSVar11;
    //   long width;
    //   
    //   pSVar11 = this->shape_header;
    //   iVar2 = param_1->Orien;
    //   pTVar7 = (TDrawArea *)((pSVar11->ymax - pSVar11->ymin) + 1);
    //   pSVar11 = pSVar11 + 1;
    //   lVar4 = TDrawArea::AlignedWidth(param_1);
    //   iVar5 = lVar4 * iVar2;
    //   if (iVar2 < 1) {
    //     param_3 = (param_3 - param_1->Height) + 1;
    //   }
    //   puVar8 = param_1->Bits + param_2 + param_3 * iVar5;
    //   param_1 = pTVar7;
    //   if (0 < (int)pTVar7) {
    //     do {
    //       bVar3 = false;
    //       puVar9 = puVar8;
    //       pSVar10 = pSVar11;
    //       do {
    //         bVar1 = (byte)pSVar10->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 1);
    //         if ((bVar1 & 1) == 1) {
    //           if (bVar1 >> 1 == 0) {
    //             uVar6 = (uint)(byte)pSVar11->bounds;
    // LAB_004b98b0:
    //             puVar9 = puVar9 + uVar6;
    //             pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 2);
    //           }
    //           else {
    //             uVar6 = (uint)(bVar1 >> 1);
    //             memcpy(puVar9,pSVar11,uVar6);
    //             puVar9 = puVar9 + uVar6;
    //             pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + uVar6);
    //           }
    //         }
    //         else {
    //           if (bVar1 >> 1 != 0) {
    //             uVar6 = (uint)(bVar1 >> 1);
    //             memset(puVar9,(char)pSVar11->bounds,uVar6);
    //             goto LAB_004b98b0;
    //           }
    //           bVar3 = true;
    //         }
    //         pSVar10 = pSVar11;
    //       } while (!bVar3);
    //       puVar8 = puVar8 + iVar5;
    //       pTVar7 = param_1 + -1;
    //       param_1 = (TDrawArea *)&pTVar7->field_0xff;
    //     } while (&pTVar7->field_0xff != (undefined1 *)0x0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004B98E0
uchar shape_color_trans_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, uchar* param_6) {
    // --- Ghidra decompiler output ---
    // 
    // /* private: unsigned char __thiscall TShape::shape_color_trans_unclipped(class TDrawArea
    //    *,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_color_trans_unclipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,uchar *param_5)
    // 
    // {
    //   byte bVar1;
    //   int iVar2;
    //   bool bVar3;
    //   long *plVar4;
    //   long lVar5;
    //   int iVar6;
    //   uchar *puVar7;
    //   uint uVar8;
    //   uchar *puVar9;
    //   uchar *puVar10;
    //   Shape_Header *pSVar11;
    //   Shape_Header *pSVar12;
    //   long width;
    //   
    //   pSVar12 = this->shape_header;
    //   iVar2 = param_1->Orien;
    //   width = (pSVar12->ymax - pSVar12->ymin) + 1;
    //   pSVar12 = pSVar12 + 1;
    //   lVar5 = TDrawArea::AlignedWidth(param_1);
    //   iVar6 = lVar5 * iVar2;
    //   if (iVar2 < 1) {
    //     param_3 = (param_3 - param_1->Height) + 1;
    //   }
    //   puVar9 = param_1->Bits + param_2 + param_3 * iVar6;
    //   if (0 < width) {
    //     do {
    //       bVar3 = false;
    //       puVar10 = puVar9;
    //       pSVar11 = pSVar12;
    //       do {
    //         bVar1 = (byte)pSVar11->bounds;
    //         pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 1);
    //         if ((bVar1 & 1) == 1) {
    //           if (bVar1 >> 1 == 0) {
    //             uVar8 = (uint)(byte)pSVar12->bounds;
    // LAB_004b99ba:
    //             puVar10 = puVar10 + uVar8;
    //             pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 2);
    //           }
    //           else {
    //             puVar7 = puVar10 + (bVar1 >> 1);
    //             for (; puVar10 < puVar7; puVar10 = puVar10 + 1) {
    //               plVar4 = &pSVar12->bounds;
    //               pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //               *puVar10 = param_5[(byte)*plVar4];
    //             }
    //           }
    //         }
    //         else {
    //           if (bVar1 >> 1 != 0) {
    //             uVar8 = (uint)(bVar1 >> 1);
    //             memset(puVar10,param_5[(byte)pSVar12->bounds],uVar8);
    //             goto LAB_004b99ba;
    //           }
    //           bVar3 = true;
    //         }
    //         pSVar11 = pSVar12;
    //       } while (!bVar3);
    //       puVar9 = puVar9 + iVar6;
    //       width = width + -1;
    //     } while (width != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004B99F0
uchar shape_shadow_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, uchar* param_5) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: width */
    // /* private: unsigned char __thiscall TShape::shape_shadow_unclipped(class TDrawArea
    //    *,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_shadow_unclipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,uchar *param_4)
    // 
    // {
    //   byte bVar1;
    //   int iVar2;
    //   bool bVar3;
    //   long lVar4;
    //   int iVar5;
    //   byte *pbVar6;
    //   byte *pbVar7;
    //   byte *pbVar8;
    //   Shape_Header *pSVar9;
    //   Shape_Header *pSVar10;
    //   TDrawArea *pTVar11;
    //   long width;
    //   
    //   pSVar9 = this->shape_header;
    //   pSVar10 = pSVar9 + 1;
    //   pTVar11 = (TDrawArea *)((pSVar9->ymax - pSVar9->ymin) + 1);
    //   iVar2 = param_1->Orien;
    //   lVar4 = TDrawArea::AlignedWidth(param_1);
    //   iVar5 = lVar4 * iVar2;
    //   if (iVar2 < 1) {
    //     param_3 = (param_3 - param_1->Height) + 1;
    //   }
    //   pbVar6 = param_1->Bits + param_2 + param_3 * iVar5;
    //   param_1 = pTVar11;
    //   if (0 < (int)pTVar11) {
    //     do {
    //       bVar3 = false;
    //       pbVar7 = pbVar6;
    //       pSVar9 = pSVar10;
    //       do {
    //         bVar1 = (byte)pSVar9->bounds;
    //         pSVar10 = (Shape_Header *)((int)&pSVar9->bounds + 1);
    //         if ((bVar1 & 1) == 1) {
    //           param_3 = (long)(bVar1 >> 1);
    //           if (bVar1 >> 1 == 0) {
    //             pbVar7 = pbVar7 + (byte)pSVar10->bounds;
    // LAB_004b9ac2:
    //             pSVar10 = (Shape_Header *)((int)&pSVar9->bounds + 2);
    //           }
    //           else {
    //             pbVar8 = pbVar7 + param_3;
    //             for (; pbVar7 < pbVar8; pbVar7 = pbVar7 + 1) {
    //               *pbVar7 = param_4[*pbVar7];
    //             }
    //             pSVar10 = (Shape_Header *)((int)&pSVar10->bounds + param_3);
    //           }
    //         }
    //         else {
    //           param_3 = (long)(bVar1 >> 1);
    //           if (bVar1 >> 1 != 0) {
    //             pbVar8 = pbVar7 + param_3;
    //             for (; pbVar7 < pbVar8; pbVar7 = pbVar7 + 1) {
    //               *pbVar7 = param_4[*pbVar7];
    //             }
    //             goto LAB_004b9ac2;
    //           }
    //           bVar3 = true;
    //         }
    //         pSVar9 = pSVar10;
    //       } while (!bVar3);
    //       pbVar6 = pbVar6 + iVar5;
    //       pTVar11 = param_1 + -1;
    //       param_1 = (TDrawArea *)&pTVar11->field_0xff;
    //     } while (&pTVar11->field_0xff != (undefined1 *)0x0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004B9AF0
uchar shape_draw_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_draw_clipped(class TDrawArea
    //    *,long,long,long,long,long,long) */
    // 
    // uchar __thiscall
    // TShape::shape_draw_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7)
    // 
    // {
    //   undefined1 uVar1;
    //   bool bVar2;
    //   byte bVar3;
    //   long lVar4;
    //   uint uVar5;
    //   int iVar6;
    //   int iVar7;
    //   int iVar8;
    //   int iVar9;
    //   uchar *puVar10;
    //   uchar *puVar11;
    //   Shape_Header *pSVar12;
    //   Shape_Header *pSVar13;
    //   uint uVar14;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar9 = param_1->Orien;
    //   lVar4 = TDrawArea::AlignedWidth(param_1);
    //   iVar6 = lVar4 * iVar9;
    //   pSVar12 = this->shape_header + 1;
    //   if (iVar9 < 1) {
    //     puVar10 = param_1->Bits + ((param_5 - param_1->Height) + 1) * iVar6;
    //   }
    //   else {
    //     puVar10 = param_1->Bits + iVar6 * param_5;
    //   }
    //   puVar10 = puVar10 + param_4;
    //   if (param_3 < param_5) {
    //     param_5 = param_5 - param_3;
    //     param_3 = param_3 + param_5;
    //     do {
    //       bVar2 = false;
    //       pSVar13 = pSVar12;
    //       do {
    //         bVar3 = (byte)pSVar13->bounds;
    //         pSVar12 = (Shape_Header *)((int)&pSVar13->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004b9b90:
    //             pSVar12 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //           }
    //           else {
    //             pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004b9b90;
    //           bVar2 = true;
    //         }
    //         pSVar13 = pSVar12;
    //       } while (!bVar2);
    //       param_5 = param_5 + -1;
    //     } while (param_5 != 0);
    //   }
    //   if (param_3 <= param_7) {
    //     param_7 = (param_7 - param_3) + 1;
    //     do {
    //       iVar9 = param_2;
    //       puVar11 = puVar10;
    //       if (param_2 < param_4) {
    //         param_5 = 0;
    //         pSVar13 = pSVar12;
    //         do {
    //           bVar3 = (byte)pSVar13->bounds;
    //           pSVar12 = (Shape_Header *)((int)&pSVar13->bounds + 1);
    //           if ((bVar3 & 1) == 1) {
    //             if (bVar3 >> 1 == 0) {
    //               iVar9 = iVar9 + (uint)(byte)pSVar12->bounds;
    //               pSVar12 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //               if (param_4 <= iVar9) {
    //                 if (param_6 < iVar9) {
    //                   param_5 = 2;
    //                 }
    //                 else {
    //                   param_5 = 1;
    //                   puVar11 = puVar11 + (iVar9 - param_4);
    //                 }
    //               }
    //             }
    //             else {
    //               uVar5 = (uint)(bVar3 >> 1);
    //               iVar9 = iVar9 + uVar5;
    //               if (param_4 <= iVar9) {
    //                 if (param_6 < iVar9) {
    //                   param_5 = 2;
    //                   iVar7 = (param_6 - param_4) + 1;
    //                   iVar8 = param_4 - iVar9;
    //                 }
    //                 else {
    //                   param_5 = 1;
    //                   iVar7 = iVar9 - param_4;
    //                   iVar8 = -iVar7;
    //                 }
    //                 memcpy(puVar11,(undefined1 *)((int)&pSVar12->bounds + uVar5 + iVar8),iVar7);
    //                 puVar11 = puVar11 + iVar7;
    //               }
    //               pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + uVar5);
    //             }
    //           }
    //           else if (bVar3 >> 1 == 0) {
    //             param_5 = 3;
    //           }
    //           else {
    //             iVar9 = iVar9 + (uint)(bVar3 >> 1);
    //             if (param_4 <= iVar9) {
    //               if (param_6 < iVar9) {
    //                 param_5 = 2;
    //                 iVar8 = (param_6 - param_4) + 1;
    //                 uVar1 = (undefined1)pSVar12->bounds;
    //               }
    //               else {
    //                 param_5 = 1;
    //                 iVar8 = iVar9 - param_4;
    //                 uVar1 = (undefined1)pSVar12->bounds;
    //               }
    //               memset(puVar11,uVar1,iVar8);
    //               puVar11 = puVar11 + iVar8;
    //             }
    //             pSVar12 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //           }
    //           pSVar13 = pSVar12;
    //         } while ((byte)param_5 == '\0');
    //       }
    //       else {
    //         param_5._0_1_ = '\x01';
    //       }
    //       bVar3 = (byte)param_5 - 1;
    //       param_5 = (long)bVar3;
    //       while (bVar3 == 0) {
    //         bVar3 = (byte)pSVar12->bounds;
    //         pSVar13 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    //             uVar5 = (uint)(byte)pSVar13->bounds;
    //             iVar9 = iVar9 + uVar5;
    //             puVar11 = puVar11 + uVar5;
    //             pSVar13 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //             if (param_6 < iVar9) {
    //               param_5 = bVar3 & 0xffffff01;
    //             }
    //           }
    //           else {
    //             uVar5 = (uint)(bVar3 >> 1);
    //             iVar9 = iVar9 + uVar5;
    //             if (param_6 < iVar9) {
    //               param_5 = 1;
    //               memcpy(puVar11,pSVar13,(param_6 - iVar9) + 1 + uVar5);
    //               puVar11 = puVar11 + uVar5;
    //               pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + uVar5);
    //             }
    //             else {
    //               memcpy(puVar11,pSVar13,uVar5);
    //               puVar11 = puVar11 + uVar5;
    //               pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + uVar5);
    //             }
    //           }
    //         }
    //         else if (bVar3 >> 1 == 0) {
    //           param_5 = 3;
    //         }
    //         else {
    //           uVar5 = (uint)(bVar3 >> 1);
    //           iVar9 = iVar9 + uVar5;
    //           if (param_6 < iVar9) {
    //             uVar1 = (undefined1)pSVar13->bounds;
    //             param_5 = 1;
    //             uVar14 = (param_6 - iVar9) + 1 + uVar5;
    //           }
    //           else {
    //             uVar1 = (undefined1)pSVar13->bounds;
    //             uVar14 = uVar5;
    //           }
    //           memset(puVar11,uVar1,uVar14);
    //           puVar11 = puVar11 + uVar5;
    //           pSVar13 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //         }
    //         pSVar12 = pSVar13;
    //         bVar3 = (byte)param_5;
    //       }
    //       bVar3 = (byte)param_5 - 1;
    //       param_5 = (long)bVar3;
    //       while (bVar3 == 0) {
    //         bVar3 = (byte)pSVar12->bounds;
    //         pSVar13 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004b9deb:
    //             pSVar13 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //           }
    //           else {
    //             pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004b9deb;
    //           param_5 = 2;
    //         }
    //         pSVar12 = pSVar13;
    //         bVar3 = (byte)param_5;
    //       }
    //       puVar10 = puVar10 + iVar6;
    //       param_7 = param_7 + -1;
    //     } while (param_7 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004B9E20
uchar shape_color_trans_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8, long param_9, uchar* param_10) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_color_trans_clipped(class TDrawArea
    //    *,long,long,long,long,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_color_trans_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7,long param_8,uchar *param_9)
    // 
    // {
    //   bool bVar1;
    //   long *plVar2;
    //   byte bVar3;
    //   long lVar4;
    //   uint uVar5;
    //   uchar *puVar6;
    //   int iVar7;
    //   int iVar8;
    //   int iVar9;
    //   int iVar10;
    //   uchar *puVar11;
    //   uchar *puVar12;
    //   byte *pbVar13;
    //   Shape_Header *pSVar14;
    //   Shape_Header *pSVar15;
    //   uint uVar16;
    //   uchar *save_buffer;
    //   uchar *temp_buffer;
    //   long width;
    //   
    //   iVar10 = param_1->Orien;
    //   lVar4 = TDrawArea::AlignedWidth(param_1);
    //   iVar7 = lVar4 * iVar10;
    //   pSVar14 = this->shape_header + 1;
    //   if (iVar10 < 1) {
    //     puVar11 = param_1->Bits + ((param_6 - param_1->Height) + 1) * iVar7;
    //   }
    //   else {
    //     puVar11 = param_1->Bits + iVar7 * param_6;
    //   }
    //   puVar11 = puVar11 + param_5;
    //   if (param_3 < param_6) {
    //     param_6 = param_6 - param_3;
    //     param_3 = param_3 + param_6;
    //     do {
    //       bVar1 = false;
    //       pSVar15 = pSVar14;
    //       do {
    //         bVar3 = (byte)pSVar15->bounds;
    //         pSVar14 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004b9ec0:
    //             pSVar14 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //           }
    //           else {
    //             pSVar14 = (Shape_Header *)((int)&pSVar14->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004b9ec0;
    //           bVar1 = true;
    //         }
    //         pSVar15 = pSVar14;
    //       } while (!bVar1);
    //       param_6 = param_6 + -1;
    //     } while (param_6 != 0);
    //   }
    //   if (param_3 <= param_8) {
    //     param_8 = (param_8 - param_3) + 1;
    //     do {
    //       iVar10 = param_2;
    //       puVar12 = puVar11;
    //       if (param_2 < param_5) {
    //         param_6 = 0;
    //         pSVar15 = pSVar14;
    //         do {
    //           bVar3 = (byte)pSVar15->bounds;
    //           pSVar14 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //           if ((bVar3 & 1) == 1) {
    //             if (bVar3 >> 1 == 0) {
    //               iVar10 = iVar10 + (uint)(byte)pSVar14->bounds;
    //               pSVar14 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //               if (param_5 <= iVar10) {
    //                 if (param_7 < iVar10) {
    //                   param_6 = 2;
    //                 }
    //                 else {
    //                   param_6 = 1;
    //                   puVar12 = puVar12 + (iVar10 - param_5);
    //                 }
    //               }
    //             }
    //             else {
    //               uVar5 = (uint)(bVar3 >> 1);
    //               iVar10 = iVar10 + uVar5;
    //               if (iVar10 < param_5) {
    //                 pSVar14 = (Shape_Header *)((int)&pSVar14->bounds + uVar5);
    //               }
    //               else if (param_7 < iVar10) {
    //                 iVar8 = (param_5 - iVar10) + uVar5;
    //                 iVar9 = (param_7 - param_5) + 1;
    //                 pbVar13 = (byte *)((int)pSVar14 + iVar8);
    //                 param_6 = 2;
    //                 puVar6 = puVar12 + iVar9;
    //                 for (; puVar12 < puVar6; puVar12 = puVar12 + 1) {
    //                   bVar3 = *pbVar13;
    //                   pbVar13 = pbVar13 + 1;
    //                   *puVar12 = param_9[bVar3];
    //                 }
    //                 pSVar14 = (Shape_Header *)(pbVar13 + ((uVar5 - iVar9) - iVar8));
    //               }
    //               else {
    //                 param_6 = 1;
    //                 puVar6 = puVar12 + (iVar10 - param_5);
    //                 pSVar14 = (Shape_Header *)((int)pSVar14 + (uVar5 - (iVar10 - param_5)));
    //                 for (; puVar12 < puVar6; puVar12 = puVar12 + 1) {
    //                   plVar2 = &pSVar14->bounds;
    //                   pSVar14 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //                   *puVar12 = param_9[(byte)*plVar2];
    //                 }
    //               }
    //             }
    //           }
    //           else if (bVar3 >> 1 == 0) {
    //             param_6 = 3;
    //           }
    //           else {
    //             iVar10 = iVar10 + (uint)(bVar3 >> 1);
    //             if (param_5 <= iVar10) {
    //               if (param_7 < iVar10) {
    //                 param_6 = 2;
    //                 iVar8 = (param_7 - param_5) + 1;
    //               }
    //               else {
    //                 param_6 = 1;
    //                 iVar8 = iVar10 - param_5;
    //               }
    //               memset(puVar12,param_9[(byte)pSVar14->bounds],iVar8);
    //               puVar12 = puVar12 + iVar8;
    //             }
    //             pSVar14 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //           }
    //           pSVar15 = pSVar14;
    //         } while ((byte)param_6 == '\0');
    //       }
    //       else {
    //         param_6._0_1_ = '\x01';
    //       }
    //       bVar3 = (byte)param_6 - 1;
    //       param_6 = (long)bVar3;
    //       while (bVar3 == 0) {
    //         bVar3 = (byte)pSVar14->bounds;
    //         pSVar15 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    //             uVar5 = (uint)(byte)pSVar15->bounds;
    //             iVar10 = iVar10 + uVar5;
    //             puVar12 = puVar12 + uVar5;
    //             pSVar15 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //             if (param_7 < iVar10) {
    //               param_6 = bVar3 & 0xffffff01;
    //             }
    //           }
    //           else {
    //             uVar5 = (uint)(bVar3 >> 1);
    //             iVar10 = iVar10 + uVar5;
    //             if (param_7 < iVar10) {
    //               param_6 = 1;
    //               iVar8 = (param_7 - iVar10) + 1 + uVar5;
    //               puVar6 = puVar12 + iVar8;
    //               for (; puVar12 < puVar6; puVar12 = puVar12 + 1) {
    //                 plVar2 = &pSVar15->bounds;
    //                 pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //                 *puVar12 = param_9[(byte)*plVar2];
    //               }
    //               pSVar15 = (Shape_Header *)((int)pSVar15 + (uVar5 - iVar8));
    //             }
    //             else {
    //               puVar6 = puVar12 + uVar5;
    //               for (; puVar12 < puVar6; puVar12 = puVar12 + 1) {
    //                 plVar2 = &pSVar15->bounds;
    //                 pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //                 *puVar12 = param_9[(byte)*plVar2];
    //               }
    //             }
    //           }
    //         }
    //         else if (bVar3 >> 1 == 0) {
    //           param_6 = 3;
    //         }
    //         else {
    //           uVar5 = (uint)(bVar3 >> 1);
    //           iVar10 = iVar10 + uVar5;
    //           uVar16 = uVar5;
    //           if (param_7 < iVar10) {
    //             param_6 = 1;
    //             uVar16 = (param_7 - iVar10) + 1 + uVar5;
    //           }
    //           memset(puVar12,param_9[(byte)pSVar15->bounds],uVar16);
    //           puVar12 = puVar12 + uVar5;
    //           pSVar15 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //         }
    //         pSVar14 = pSVar15;
    //         bVar3 = (byte)param_6;
    //       }
    //       bVar3 = (byte)param_6 - 1;
    //       param_6 = (long)bVar3;
    //       while (bVar3 == 0) {
    //         bVar3 = (byte)pSVar14->bounds;
    //         pSVar15 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004ba183:
    //             pSVar15 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //           }
    //           else {
    //             pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004ba183;
    //           param_6 = 2;
    //         }
    //         pSVar14 = pSVar15;
    //         bVar3 = (byte)param_6;
    //       }
    //       puVar11 = puVar11 + iVar7;
    //       param_8 = param_8 + -1;
    //     } while (param_8 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BA1C0
uchar shape_shadow_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8, uchar* param_9) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_shadow_clipped(class TDrawArea
    //    *,long,long,long,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_shadow_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7,uchar *param_8)
    // 
    // {
    //   byte bVar1;
    //   int iVar2;
    //   bool bVar3;
    //   char cVar4;
    //   long lVar5;
    //   int iVar6;
    //   byte *pbVar7;
    //   byte *pbVar8;
    //   int iVar9;
    //   TDrawArea *pTVar10;
    //   byte *pbVar11;
    //   byte *pbVar12;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar6 = param_1->Orien;
    //   lVar5 = TDrawArea::AlignedWidth(param_1);
    //   iVar9 = lVar5 * iVar6;
    //   iVar2 = param_5;
    //   if (iVar6 < 1) {
    //     iVar2 = (param_5 - param_1->Height) + 1;
    //   }
    //   pbVar7 = param_1->Bits + param_4 + iVar2 * iVar9;
    //   param_1 = (TDrawArea *)(this->shape_header + 1);
    //   if (param_3 < param_5) {
    //     iVar6 = param_5 - param_3;
    //     param_3 = param_3 + iVar6;
    //     do {
    //       bVar3 = false;
    //       do {
    //         bVar1 = *(byte *)&param_1->DrawSystem;
    //         pTVar10 = (TDrawArea *)((int)&param_1->DrawSystem + 1);
    //         if ((bVar1 & 1) == 1) {
    //           param_5 = (long)(bVar1 >> 1);
    //           if (bVar1 >> 1 == 0) {
    // LAB_004ba267:
    //             param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //           }
    //           else {
    //             param_1 = (TDrawArea *)((int)&pTVar10->DrawSystem + param_5);
    //           }
    //         }
    //         else {
    //           if ((bVar1 & 0xfe) != 0) goto LAB_004ba267;
    //           bVar3 = true;
    //           param_1 = pTVar10;
    //         }
    //       } while (!bVar3);
    //       iVar6 = iVar6 + -1;
    //     } while (iVar6 != 0);
    //   }
    //   if (param_3 <= param_7) {
    //     param_3 = (param_7 - param_3) + 1;
    //     pTVar10 = param_1;
    //     do {
    //       pbVar8 = pbVar7;
    //       iVar6 = param_2;
    //       if (param_2 < param_4) {
    //         cVar4 = '\0';
    //         do {
    //           bVar1 = *(byte *)&pTVar10->DrawSystem;
    //           pTVar10 = (TDrawArea *)((int)&param_1->DrawSystem + 1);
    //           if ((bVar1 & 1) == 1) {
    //             param_5 = (long)(bVar1 >> 1);
    //             if (bVar1 >> 1 == 0) {
    //               iVar6 = iVar6 + (uint)*(byte *)&pTVar10->DrawSystem;
    //               param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //               if (param_4 <= iVar6) {
    //                 if (param_6 < iVar6) {
    //                   cVar4 = '\x02';
    //                 }
    //                 else {
    //                   cVar4 = '\x01';
    //                   pbVar8 = pbVar8 + (iVar6 - param_4);
    //                 }
    //               }
    //             }
    //             else {
    //               iVar6 = iVar6 + param_5;
    //               if (param_4 <= iVar6) {
    //                 if (param_6 < iVar6) {
    //                   cVar4 = '\x02';
    //                   pbVar11 = pbVar8 + (param_6 - param_4) + 1;
    //                   pbVar12 = pbVar8;
    //                   if (pbVar8 < pbVar11) {
    //                     do {
    //                       pbVar8 = pbVar12 + 1;
    //                       *pbVar12 = param_8[*pbVar12];
    //                       pbVar12 = pbVar8;
    //                     } while (pbVar8 < pbVar11);
    //                     param_1 = (TDrawArea *)((int)&pTVar10->DrawSystem + param_5);
    //                     goto LAB_004ba3c1;
    //                   }
    //                 }
    //                 else {
    //                   cVar4 = '\x01';
    //                   pbVar12 = pbVar8 + (iVar6 - param_4);
    //                   for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //                     *pbVar8 = param_8[*pbVar8];
    //                   }
    //                 }
    //               }
    //               param_1 = (TDrawArea *)((int)&pTVar10->DrawSystem + param_5);
    //             }
    //           }
    //           else {
    //             param_5 = (long)(bVar1 >> 1);
    //             if (bVar1 >> 1 == 0) {
    //               cVar4 = '\x03';
    //               param_1 = pTVar10;
    //             }
    //             else {
    //               iVar6 = iVar6 + param_5;
    //               if (param_4 <= iVar6) {
    //                 if (param_6 < iVar6) {
    //                   cVar4 = '\x02';
    //                   pbVar12 = pbVar8 + (param_6 - param_4) + 1;
    //                   for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //                     *pbVar8 = param_8[*pbVar8];
    //                   }
    //                 }
    //                 else {
    //                   cVar4 = '\x01';
    //                   pbVar12 = pbVar8 + (iVar6 - param_4);
    //                   for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //                     *pbVar8 = param_8[*pbVar8];
    //                   }
    //                 }
    //               }
    //               param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //             }
    //           }
    // LAB_004ba3c1:
    //           pTVar10 = param_1;
    //         } while (cVar4 == '\0');
    //       }
    //       else {
    //         cVar4 = '\x01';
    //       }
    //       cVar4 = cVar4 + -1;
    // joined_r0x004ba3d3:
    //       if (cVar4 == '\0') {
    //         bVar1 = *(byte *)&pTVar10->DrawSystem;
    //         pTVar10 = (TDrawArea *)((int)&param_1->DrawSystem + 1);
    //         if ((bVar1 & 1) == 1) {
    //           param_5 = (long)(bVar1 >> 1);
    //           if (bVar1 >> 1 == 0) {
    //             iVar6 = iVar6 + (uint)*(byte *)&pTVar10->DrawSystem;
    //             pbVar8 = pbVar8 + *(byte *)&pTVar10->DrawSystem;
    //             pTVar10 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //             param_1 = pTVar10;
    //             if (param_6 < iVar6) {
    //               cVar4 = '\x01';
    //             }
    //             goto joined_r0x004ba3d3;
    //           }
    //           iVar6 = iVar6 + param_5;
    //           if (param_6 < iVar6) {
    //             cVar4 = '\x01';
    //             pbVar12 = pbVar8 + param_5 + (param_6 - iVar6) + 1;
    //             pbVar11 = pbVar8;
    //             if (pbVar8 < pbVar12) {
    //               do {
    //                 pbVar8 = pbVar11 + 1;
    //                 *pbVar11 = param_8[*pbVar11];
    //                 pbVar11 = pbVar8;
    //               } while (pbVar8 < pbVar12);
    //               pTVar10 = (TDrawArea *)((int)&pTVar10->DrawSystem + param_5);
    //               param_1 = pTVar10;
    //               goto joined_r0x004ba3d3;
    //             }
    //           }
    //           else {
    //             pbVar12 = pbVar8 + param_5;
    //             for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //               *pbVar8 = param_8[*pbVar8];
    //             }
    //           }
    //           pTVar10 = (TDrawArea *)((int)&pTVar10->DrawSystem + param_5);
    //           param_1 = pTVar10;
    //           goto joined_r0x004ba3d3;
    //         }
    //         param_5 = (long)(bVar1 >> 1);
    //         if (bVar1 >> 1 == 0) {
    //           cVar4 = '\x03';
    //           param_1 = pTVar10;
    //         }
    //         else {
    //           iVar6 = iVar6 + param_5;
    //           if (param_6 < iVar6) {
    //             cVar4 = '\x01';
    //             pbVar12 = pbVar8 + param_5 + (param_6 - iVar6) + 1;
    //             for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //               *pbVar8 = param_8[*pbVar8];
    //             }
    //           }
    //           else {
    //             pbVar12 = pbVar8 + param_5;
    //             for (; pbVar8 < pbVar12; pbVar8 = pbVar8 + 1) {
    //               *pbVar8 = param_8[*pbVar8];
    //             }
    //           }
    //           pTVar10 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //           param_1 = pTVar10;
    //         }
    //         goto joined_r0x004ba3d3;
    //       }
    //       cVar4 = cVar4 + -1;
    //       while (cVar4 == '\0') {
    //         bVar1 = *(byte *)&pTVar10->DrawSystem;
    //         param_1 = (TDrawArea *)((int)&pTVar10->DrawSystem + 1);
    //         if ((bVar1 & 1) == 1) {
    //           param_5 = (long)(bVar1 >> 1);
    //           if (bVar1 >> 1 == 0) {
    // LAB_004ba518:
    //             param_1 = (TDrawArea *)((int)&pTVar10->DrawSystem + 2);
    //             pTVar10 = param_1;
    //           }
    //           else {
    //             param_1 = (TDrawArea *)((int)&param_1->DrawSystem + param_5);
    //             pTVar10 = param_1;
    //           }
    //         }
    //         else {
    //           if ((bVar1 & 0xfe) != 0) goto LAB_004ba518;
    //           cVar4 = '\x02';
    //           pTVar10 = param_1;
    //         }
    //       }
    //       pbVar7 = pbVar7 + iVar9;
    //       param_3 = param_3 + -1;
    //     } while (param_3 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BA550
uchar shape_mirror(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, uchar param_6, uchar* param_7) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: ret_num */
    // /* public: unsigned char __thiscall TShape::shape_mirror(class TDrawArea *,long,long,long,unsigned
    //    char,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,uchar param_5,
    //           uchar *param_6)
    // 
    // {
    //   Shape_Header *pSVar1;
    //   TSpan_List_Manager *pTVar2;
    //   TDrawArea *pTVar3;
    //   int iVar4;
    //   TDrawArea *pTVar5;
    //   uchar uVar6;
    //   int iVar7;
    //   SLhape_File_Header *pSVar8;
    //   int iVar9;
    //   int iVar10;
    //   TDrawArea *pTVar11;
    //   Shape_Info *pSVar12;
    //   int iVar13;
    //   int iVar14;
    //   long lVar15;
    //   uchar ret_num;
    //   long clip_y0;
    //   long shape_y1;
    //   tagRECT rect;
    //   
    //   pTVar5 = param_1;
    //   if ((-1 < param_4) && (uVar6 = Check_shape(this,param_4,s_RGL_shape_draw), uVar6 == '\0')) {
    //     if (this->FShape != (SLhape_File_Header *)0x0) {
    //       if (SDI_Capture_Info != 0) {
    //         pSVar12 = (Shape_Info *)(this->FShape + param_4 + 1);
    //         iVar14 = SDI_Draw_Level;
    //         lVar15 = SDI_Object_ID;
    //         iVar7 = _ASMGet_Color_Xform();
    //         DClipInfo_List::AddDrawNode
    //                   (SDI_List,this->FShape,pSVar12,SDI_Draw_Line,
    //                    (pSVar12->Hotspot_X - pSVar12->Width) + param_2,param_3 - pSVar12->Hotspot_Y,
    //                    fog_next_shape + 2,param_6,iVar7,iVar14,lVar15);
    //         return '\x01';
    //       }
    //       pTVar2 = param_1->CurSpanList;
    //       iVar14 = param_1->SpanList->Num_Lines;
    //       iVar7 = pTVar2->Num_Lines;
    //       if (iVar14 < iVar7) {
    //         iVar7 = iVar14;
    //       }
    //       _ASMSet_Surface_Info
    //                 (param_1->CurDisplayOffsets,pTVar2->Line_Head_Ptrs,pTVar2->Line_Tail_Ptrs,0,0,
    //                  pTVar2->Max_Span_Px,iVar7 + -1);
    //       if (param_6 != (uchar *)0x0) {
    //         _ASMSet_Xlate_Table(param_6);
    //       }
    //       pSVar8 = this->FShape + param_4 + 1;
    //       _ASMDraw_Sprite(this->FShape,
    //                       (*(int *)(pSVar8->Comment + 0x10) + param_2) - *(int *)(pSVar8->Comment + 8),
    //                       param_3 - *(int *)(pSVar8->Comment + 0x14),*(int *)(pSVar8->Comment + 8),
    //                       *(undefined4 *)(pSVar8->Comment + 0xc),*(undefined4 *)pSVar8->Version,
    //                       pSVar8->Num_Shapes,fog_next_shape + 2);
    //       ASM_Fast_Count = ASM_Fast_Count + 1;
    //       return '\x01';
    //     }
    //     iVar14 = (param_1->ClipRect).left;
    //     iVar7 = (param_1->ClipRect).top;
    //     pTVar3 = (TDrawArea *)(param_1->ClipRect).right;
    //     iVar4 = (param_1->ClipRect).bottom;
    //     if (this->shape != (uchar *)0x0) {
    //       pSVar1 = (Shape_Header *)(this->shape + this->offsets[param_4].shape);
    //       this->shape_header = pSVar1;
    //       iVar13 = param_2 - pSVar1->xmax;
    //       iVar9 = pSVar1->ymin + param_3;
    //       pTVar11 = (TDrawArea *)(param_2 - pSVar1->xmin);
    //       iVar10 = pSVar1->ymax + param_3;
    //       param_2 = iVar13;
    //       if (iVar13 < iVar14) {
    //         param_2 = iVar14;
    //       }
    //       shape_y1 = iVar9;
    //       if (iVar9 < iVar7) {
    //         shape_y1 = iVar7;
    //       }
    //       param_1 = pTVar11;
    //       if ((int)pTVar3 < (int)pTVar11) {
    //         param_1 = pTVar3;
    //       }
    //       param_3 = iVar10;
    //       if (iVar4 < iVar10) {
    //         param_3 = iVar4;
    //       }
    //       if (param_2 < 0) {
    //         param_2 = 0;
    //       }
    //       if (shape_y1 < 0) {
    //         shape_y1 = 0;
    //       }
    //       if (pTVar5->Width <= (int)param_1) {
    //         param_1 = (TDrawArea *)(pTVar5->Width + -1);
    //       }
    //       if (pTVar5->Height <= param_3) {
    //         param_3 = pTVar5->Height + -1;
    //       }
    //       if ((param_2 <= (int)param_1) && (shape_y1 <= param_3)) {
    //         if ((param_2 != iVar13) ||
    //            (((shape_y1 != iVar9 || (param_1 != pTVar11)) || (param_3 != iVar10)))) {
    //           if (param_5 != '\0') {
    //             if (param_5 == '\x01') {
    //               if (param_6 != (uchar *)0x0) {
    //                 uVar6 = shape_mirror_color_trans_clipped
    //                                   (this,pTVar5,(long)pTVar11,iVar9,param_4,param_2,shape_y1,
    //                                    (long)param_1,param_3,param_6);
    //                 return uVar6;
    //               }
    //             }
    //             else {
    //               if (param_5 != '\x02') {
    //                 return '\0';
    //               }
    //               if (param_6 != (uchar *)0x0) {
    //                 uVar6 = shape_mirror_shadow_clipped
    //                                   (this,pTVar5,(long)pTVar11,iVar9,param_2,shape_y1,(long)param_1,
    //                                    param_3,param_6);
    //                 return uVar6;
    //               }
    //             }
    //           }
    //           uVar6 = shape_mirror_clipped
    //                             (this,pTVar5,(long)pTVar11,iVar9,param_2,shape_y1,(long)param_1,param_3)
    //           ;
    //           return uVar6;
    //         }
    //         if (param_5 == '\0') {
    //           uVar6 = shape_mirror_unclipped(this,pTVar5,(long)pTVar11,iVar9);
    //           return uVar6;
    //         }
    //         if (param_5 == '\x01') {
    //           if (param_6 == (uchar *)0x0) {
    //             uVar6 = shape_mirror_unclipped(this,pTVar5,(long)pTVar11,iVar9);
    //             return uVar6;
    //           }
    //           uVar6 = shape_mirror_color_trans_unclipped
    //                             (this,pTVar5,(long)pTVar11,iVar9,param_4,param_6);
    //           return uVar6;
    //         }
    //         if (param_5 != '\x02') {
    //           return '\0';
    //         }
    //         if (param_6 == (uchar *)0x0) {
    //           uVar6 = shape_mirror_unclipped(this,pTVar5,(long)pTVar11,iVar9);
    //           return uVar6;
    //         }
    //         uVar6 = shape_mirror_shadow_unclipped(this,pTVar5,(long)pTVar11,iVar9,param_6);
    //         return uVar6;
    //       }
    //     }
    //   }
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004BA900
uchar shape_mirror_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4) {
    // --- Ghidra decompiler output ---
    // 
    // /* private: unsigned char __thiscall TShape::shape_mirror_unclipped(class TDrawArea *,long,long) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_unclipped(TShape *this,TDrawArea *param_1,long param_2,long param_3)
    // 
    // {
    //   int iVar1;
    //   bool bVar2;
    //   long *plVar3;
    //   byte bVar4;
    //   long lVar5;
    //   TDrawArea *pTVar6;
    //   uint uVar7;
    //   int iVar8;
    //   Shape_Header *pSVar9;
    //   Shape_Header *pSVar10;
    //   uchar *puVar11;
    //   uchar *puVar12;
    //   
    //   iVar1 = param_1->Orien;
    //   lVar5 = TDrawArea::AlignedWidth(param_1);
    //   pSVar9 = this->shape_header;
    //   iVar8 = lVar5 * iVar1;
    //   pSVar10 = pSVar9 + 1;
    //   pTVar6 = (TDrawArea *)((pSVar9->ymax - pSVar9->ymin) + 1);
    //   if (iVar1 < 1) {
    //     param_3 = (param_3 - param_1->Height) + 1;
    //   }
    //   puVar12 = param_1->Bits + param_2 + param_3 * iVar8 + 1;
    //   param_1 = pTVar6;
    //   if (0 < (int)pTVar6) {
    //     do {
    //       bVar2 = false;
    //       pSVar9 = pSVar10;
    //       puVar11 = puVar12;
    //       do {
    //         bVar4 = (byte)pSVar9->bounds;
    //         pSVar10 = (Shape_Header *)((int)&pSVar9->bounds + 1);
    //         if ((bVar4 & 1) == 1) {
    //           bVar4 = bVar4 >> 1;
    //           if (bVar4 == 0) {
    //             puVar11 = puVar11 + -(uint)(byte)pSVar10->bounds;
    // LAB_004ba9b9:
    //             pSVar10 = (Shape_Header *)((int)&pSVar9->bounds + 2);
    //           }
    //           else if (bVar4 != 0) {
    //             uVar7 = (uint)bVar4;
    //             do {
    //               plVar3 = &pSVar10->bounds;
    //               puVar11 = puVar11 + -1;
    //               pSVar10 = (Shape_Header *)((int)&pSVar10->bounds + 1);
    //               uVar7 = uVar7 - 1;
    //               *puVar11 = (uchar)*plVar3;
    //             } while (uVar7 != 0);
    //           }
    //         }
    //         else {
    //           bVar4 = bVar4 >> 1;
    //           if (bVar4 != 0) {
    //             puVar11 = puVar11 + -(uint)bVar4;
    //             memset(puVar11,(char)pSVar10->bounds,(uint)bVar4);
    //             goto LAB_004ba9b9;
    //           }
    //           bVar2 = true;
    //         }
    //         pSVar9 = pSVar10;
    //       } while (!bVar2);
    //       puVar12 = puVar12 + iVar8;
    //       pTVar6 = param_1 + -1;
    //       param_1 = (TDrawArea *)&pTVar6->field_0xff;
    //     } while (&pTVar6->field_0xff != (undefined1 *)0x0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BA9E0
uchar shape_mirror_color_trans_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, uchar* param_6) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: width */
    // /* private: unsigned char __thiscall TShape::shape_mirror_color_trans_unclipped(class TDrawArea
    //    *,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_color_trans_unclipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,uchar *param_5)
    // 
    // {
    //   int iVar1;
    //   bool bVar2;
    //   long *plVar3;
    //   byte bVar4;
    //   long lVar5;
    //   TDrawArea *pTVar6;
    //   uint uVar7;
    //   uchar *puVar8;
    //   int iVar9;
    //   Shape_Header *pSVar10;
    //   Shape_Header *pSVar11;
    //   uchar *puVar12;
    //   long width;
    //   
    //   iVar1 = param_1->Orien;
    //   lVar5 = TDrawArea::AlignedWidth(param_1);
    //   pSVar11 = this->shape_header;
    //   iVar9 = lVar5 * iVar1;
    //   pTVar6 = (TDrawArea *)((pSVar11->ymax - pSVar11->ymin) + 1);
    //   pSVar11 = pSVar11 + 1;
    //   if (iVar1 < 1) {
    //     puVar8 = param_1->Bits + ((param_3 - param_1->Height) + 1) * iVar9;
    //   }
    //   else {
    //     puVar8 = param_1->Bits + iVar9 * param_3;
    //   }
    //   puVar8 = puVar8 + param_2 + 1;
    //   param_1 = pTVar6;
    //   if (0 < (int)pTVar6) {
    //     do {
    //       bVar2 = false;
    //       pSVar10 = pSVar11;
    //       puVar12 = puVar8;
    //       do {
    //         bVar4 = (byte)pSVar10->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 1);
    //         if ((bVar4 & 1) == 1) {
    //           bVar4 = bVar4 >> 1;
    //           if (bVar4 == 0) {
    //             puVar12 = puVar12 + -(uint)(byte)pSVar11->bounds;
    // LAB_004baabd:
    //             pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 2);
    //           }
    //           else if (bVar4 != 0) {
    //             uVar7 = (uint)bVar4;
    //             do {
    //               puVar12 = puVar12 + -1;
    //               plVar3 = &pSVar11->bounds;
    //               pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + 1);
    //               uVar7 = uVar7 - 1;
    //               *puVar12 = param_5[(byte)*plVar3];
    //             } while (uVar7 != 0);
    //           }
    //         }
    //         else {
    //           bVar4 = bVar4 >> 1;
    //           if (bVar4 != 0) {
    //             puVar12 = puVar12 + -(uint)bVar4;
    //             memset(puVar12,param_5[(byte)pSVar11->bounds],(uint)bVar4);
    //             goto LAB_004baabd;
    //           }
    //           bVar2 = true;
    //         }
    //         pSVar10 = pSVar11;
    //       } while (!bVar2);
    //       puVar8 = puVar8 + iVar9;
    //       pTVar6 = param_1 + -1;
    //       param_1 = (TDrawArea *)&pTVar6->field_0xff;
    //     } while (&pTVar6->field_0xff != (undefined1 *)0x0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BAAF0
uchar shape_mirror_shadow_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, uchar* param_5) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: width */
    // /* private: unsigned char __thiscall TShape::shape_mirror_shadow_unclipped(class TDrawArea
    //    *,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_shadow_unclipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,uchar *param_4)
    // 
    // {
    //   bool bVar1;
    //   long lVar2;
    //   int iVar3;
    //   uchar *puVar4;
    //   byte *pbVar5;
    //   byte *pbVar6;
    //   byte bVar7;
    //   TDrawArea *pTVar8;
    //   int iVar9;
    //   Shape_Header *pSVar10;
    //   Shape_Header *pSVar11;
    //   long width;
    //   
    //   iVar9 = param_1->Orien;
    //   lVar2 = TDrawArea::AlignedWidth(param_1);
    //   iVar3 = lVar2 * iVar9;
    //   pSVar10 = this->shape_header;
    //   pSVar11 = pSVar10 + 1;
    //   pTVar8 = (TDrawArea *)((pSVar10->ymax - pSVar10->ymin) + 1);
    //   if (iVar9 < 1) {
    //     puVar4 = param_1->Bits + ((param_3 - param_1->Height) + 1) * iVar3;
    //   }
    //   else {
    //     puVar4 = param_1->Bits + iVar3 * param_3;
    //   }
    //   pbVar5 = puVar4 + param_2 + 1;
    //   param_1 = pTVar8;
    //   if (0 < (int)pTVar8) {
    //     do {
    //       bVar1 = false;
    //       pbVar6 = pbVar5;
    //       pSVar10 = pSVar11;
    //       do {
    //         bVar7 = (byte)pSVar10->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 1);
    //         if ((bVar7 & 1) == 1) {
    //           bVar7 = bVar7 >> 1;
    //           param_3 = (long)bVar7;
    //           if (bVar7 == 0) {
    //             pbVar6 = pbVar6 + -(uint)(byte)pSVar11->bounds;
    // LAB_004babcf:
    //             pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 2);
    //           }
    //           else {
    //             iVar9 = param_3;
    //             if (bVar7 != 0) {
    //               do {
    //                 pbVar6 = pbVar6 + -1;
    //                 iVar9 = iVar9 + -1;
    //                 *pbVar6 = param_4[*pbVar6];
    //               } while (iVar9 != 0);
    //             }
    //             pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + param_3);
    //           }
    //         }
    //         else {
    //           bVar7 = bVar7 >> 1;
    //           param_3 = (long)bVar7;
    //           if (bVar7 != 0) {
    //             if (bVar7 != 0) {
    //               do {
    //                 pbVar6 = pbVar6 + -1;
    //                 param_3 = param_3 + -1;
    //                 *pbVar6 = param_4[*pbVar6];
    //               } while (param_3 != 0);
    //             }
    //             goto LAB_004babcf;
    //           }
    //           bVar1 = true;
    //         }
    //         pSVar10 = pSVar11;
    //       } while (!bVar1);
    //       pbVar5 = pbVar5 + iVar3;
    //       pTVar8 = param_1 + -1;
    //       param_1 = (TDrawArea *)&pTVar8->field_0xff;
    //     } while (&pTVar8->field_0xff != (undefined1 *)0x0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BAC00
uchar shape_mirror_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_mirror_clipped(class TDrawArea
    //    *,long,long,long,long,long,long) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7)
    // 
    // {
    //   uchar uVar1;
    //   undefined1 uVar2;
    //   bool bVar3;
    //   long *plVar4;
    //   byte bVar5;
    //   long lVar6;
    //   int iVar7;
    //   uint uVar8;
    //   int iVar9;
    //   uint uVar10;
    //   char cVar11;
    //   uchar *puVar12;
    //   uchar *puVar13;
    //   uchar *puVar14;
    //   Shape_Header *pSVar15;
    //   Shape_Header *pSVar16;
    //   int iVar17;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar17 = param_1->Orien;
    //   lVar6 = TDrawArea::AlignedWidth(param_1);
    //   iVar9 = lVar6 * iVar17;
    //   pSVar15 = this->shape_header + 1;
    //   if (iVar17 < 1) {
    //     puVar12 = param_1->Bits + ((param_5 - param_1->Height) + 1) * iVar9;
    //   }
    //   else {
    //     puVar12 = param_1->Bits + iVar9 * param_5;
    //   }
    //   puVar12 = puVar12 + param_6 + 1;
    //   if (param_3 < param_5) {
    //     param_1 = (TDrawArea *)(param_5 - param_3);
    //     param_3 = (int)&param_1->DrawSystem + param_3;
    //     do {
    //       bVar3 = false;
    //       pSVar16 = pSVar15;
    //       do {
    //         bVar5 = (byte)pSVar16->bounds;
    //         pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + 1);
    //         if ((bVar5 & 1) == 1) {
    //           if (bVar5 >> 1 == 0) {
    // LAB_004bac9a:
    //             pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + 2);
    //           }
    //           else {
    //             pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + (uint)(bVar5 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar5 & 0xfe) != 0) goto LAB_004bac9a;
    //           bVar3 = true;
    //         }
    //         pSVar16 = pSVar15;
    //       } while (!bVar3);
    //       param_1 = (TDrawArea *)&param_1[-1].field_0xff;
    //     } while (param_1 != (TDrawArea *)0x0);
    //   }
    //   if (param_3 <= param_7) {
    //     param_3 = (param_7 - param_3) + 1;
    //     do {
    //       puVar13 = puVar12;
    //       iVar17 = param_2;
    //       if (param_6 < param_2) {
    //         cVar11 = '\0';
    //         pSVar16 = pSVar15;
    //         do {
    //           bVar5 = (byte)pSVar16->bounds;
    //           pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + 1);
    //           if ((bVar5 & 1) == 1) {
    //             if (bVar5 >> 1 == 0) {
    //               iVar17 = iVar17 - (uint)(byte)pSVar15->bounds;
    //               pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + 2);
    //               if (iVar17 <= param_6) {
    //                 if (iVar17 < param_4) {
    //                   cVar11 = '\x02';
    //                 }
    //                 else {
    //                   cVar11 = '\x01';
    //                   puVar13 = puVar13 + (iVar17 - param_6);
    //                 }
    //               }
    //             }
    //             else {
    //               uVar10 = (uint)(bVar5 >> 1);
    //               iVar17 = iVar17 - uVar10;
    //               if (param_6 < iVar17) {
    //                 pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + uVar10);
    //               }
    //               else if (iVar17 < param_4) {
    //                 uVar8 = (param_6 - param_4) + 1;
    //                 cVar11 = '\x02';
    //                 puVar14 = (uchar *)((int)pSVar16 + (iVar17 - param_6) + uVar10);
    //                 if ((char)uVar8 != '\0') {
    //                   uVar8 = uVar8 & 0xff;
    //                   do {
    //                     uVar1 = *puVar14;
    //                     puVar13 = puVar13 + -1;
    //                     puVar14 = puVar14 + 1;
    //                     uVar8 = uVar8 - 1;
    //                     *puVar13 = uVar1;
    //                   } while (uVar8 != 0);
    //                 }
    //                 pSVar15 = (Shape_Header *)(puVar14 + (param_4 - iVar17));
    //               }
    //               else {
    //                 cVar11 = '\x01';
    //                 uVar8 = param_6 - iVar17;
    //                 pSVar15 = (Shape_Header *)((int)pSVar15 + (uVar10 - uVar8));
    //                 if ((char)uVar8 != '\0') {
    //                   uVar8 = uVar8 & 0xff;
    //                   do {
    //                     plVar4 = &pSVar15->bounds;
    //                     puVar13 = puVar13 + -1;
    //                     pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //                     uVar8 = uVar8 - 1;
    //                     *puVar13 = (uchar)*plVar4;
    //                   } while (uVar8 != 0);
    //                 }
    //               }
    //             }
    //           }
    //           else if (bVar5 >> 1 == 0) {
    //             cVar11 = '\x03';
    //           }
    //           else {
    //             iVar17 = iVar17 - (uint)(bVar5 >> 1);
    //             if (iVar17 <= param_6) {
    //               if (iVar17 < param_4) {
    //                 cVar11 = '\x02';
    //                 iVar7 = (param_6 - param_4) + 1;
    //                 uVar2 = (undefined1)pSVar15->bounds;
    //               }
    //               else {
    //                 cVar11 = '\x01';
    //                 iVar7 = param_6 - iVar17;
    //                 uVar2 = (undefined1)pSVar15->bounds;
    //               }
    //               puVar13 = puVar13 + -iVar7;
    //               memset(puVar13,uVar2,iVar7);
    //             }
    //             pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + 2);
    //           }
    //           pSVar16 = pSVar15;
    //         } while (cVar11 == '\0');
    //       }
    //       else {
    //         cVar11 = '\x01';
    //       }
    //       cVar11 = cVar11 + -1;
    //       while (cVar11 == '\0') {
    //         bVar5 = (byte)pSVar15->bounds;
    //         pSVar16 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //         if ((bVar5 & 1) == 1) {
    //           bVar5 = bVar5 >> 1;
    //           if (bVar5 == 0) {
    //             uVar10 = (uint)(byte)pSVar16->bounds;
    //             iVar17 = iVar17 - uVar10;
    //             puVar13 = puVar13 + -uVar10;
    //             pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //             if (iVar17 < param_4) {
    //               cVar11 = '\x01';
    //             }
    //           }
    //           else {
    //             uVar10 = (uint)bVar5;
    //             iVar17 = iVar17 - uVar10;
    //             if (iVar17 < param_4) {
    //               cVar11 = '\x01';
    //               uVar8 = (iVar17 - param_4) + uVar10;
    //               if ((char)uVar8 != '\0') {
    //                 param_1 = (TDrawArea *)(uVar8 & 0xff);
    //                 do {
    //                   plVar4 = &pSVar16->bounds;
    //                   puVar13 = puVar13 + -1;
    //                   pSVar16 = (Shape_Header *)((int)&pSVar16->bounds + 1);
    //                   *puVar13 = (uchar)*plVar4;
    //                   param_1 = (TDrawArea *)&param_1[-1].field_0xff;
    //                 } while (param_1 != (TDrawArea *)0x0);
    //               }
    //               pSVar15 = (Shape_Header *)((int)pSVar16 + (uVar10 - uVar8));
    //             }
    //             else {
    //               pSVar15 = pSVar16;
    //               if (bVar5 != 0) {
    //                 do {
    //                   plVar4 = &pSVar16->bounds;
    //                   puVar13 = puVar13 + -1;
    //                   pSVar16 = (Shape_Header *)((int)&pSVar16->bounds + 1);
    //                   uVar10 = uVar10 - 1;
    //                   *puVar13 = (uchar)*plVar4;
    //                   pSVar15 = pSVar16;
    //                 } while (uVar10 != 0);
    //               }
    //             }
    //           }
    //         }
    //         else if (bVar5 >> 1 == 0) {
    //           cVar11 = '\x03';
    //           pSVar15 = pSVar16;
    //         }
    //         else {
    //           uVar10 = (uint)(bVar5 >> 1);
    //           iVar17 = iVar17 - uVar10;
    //           if (iVar17 < param_4) {
    //             cVar11 = '\x01';
    //             uVar10 = (iVar17 - param_4) + uVar10;
    //             uVar2 = (undefined1)pSVar16->bounds;
    //           }
    //           else {
    //             uVar2 = (undefined1)pSVar16->bounds;
    //           }
    //           puVar13 = puVar13 + -uVar10;
    //           memset(puVar13,uVar2,uVar10);
    //           pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //         }
    //       }
    //       cVar11 = cVar11 + -1;
    //       while (cVar11 == '\0') {
    //         bVar5 = (byte)pSVar15->bounds;
    //         pSVar16 = (Shape_Header *)((int)&pSVar15->bounds + 1);
    //         if ((bVar5 & 1) == 1) {
    //           if (bVar5 >> 1 == 0) {
    // LAB_004baef1:
    //             pSVar15 = (Shape_Header *)((int)&pSVar15->bounds + 2);
    //           }
    //           else {
    //             pSVar15 = (Shape_Header *)((int)&pSVar16->bounds + (uint)(bVar5 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar5 & 0xfe) != 0) goto LAB_004baef1;
    //           cVar11 = '\x02';
    //           pSVar15 = pSVar16;
    //         }
    //       }
    //       puVar12 = puVar12 + iVar9;
    //       param_3 = param_3 + -1;
    //     } while (param_3 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BAF20
uchar shape_mirror_color_trans_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8, long param_9, uchar* param_10) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_mirror_color_trans_clipped(class TDrawArea
    //    *,long,long,long,long,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_color_trans_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7,long param_8,uchar *param_9)
    // 
    // {
    //   bool bVar1;
    //   long *plVar2;
    //   byte bVar3;
    //   long lVar4;
    //   uint uVar5;
    //   int iVar6;
    //   uint uVar7;
    //   int iVar8;
    //   char cVar9;
    //   uchar *puVar10;
    //   int iVar11;
    //   byte *pbVar12;
    //   Shape_Header *pSVar13;
    //   Shape_Header *pSVar14;
    //   uchar *puVar15;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar11 = param_1->Orien;
    //   lVar4 = TDrawArea::AlignedWidth(param_1);
    //   iVar8 = lVar4 * iVar11;
    //   pSVar13 = this->shape_header + 1;
    //   if (iVar11 < 1) {
    //     puVar10 = param_1->Bits + ((param_6 - param_1->Height) + 1) * iVar8;
    //   }
    //   else {
    //     puVar10 = param_1->Bits + iVar8 * param_6;
    //   }
    //   puVar10 = puVar10 + param_7 + 1;
    //   if (param_3 < param_6) {
    //     param_6 = param_6 - param_3;
    //     param_3 = param_3 + param_6;
    //     do {
    //       bVar1 = false;
    //       pSVar14 = pSVar13;
    //       do {
    //         bVar3 = (byte)pSVar14->bounds;
    //         pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004bafba:
    //             pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //           }
    //           else {
    //             pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004bafba;
    //           bVar1 = true;
    //         }
    //         pSVar14 = pSVar13;
    //       } while (!bVar1);
    //       param_6 = param_6 + -1;
    //     } while (param_6 != 0);
    //   }
    //   if (param_3 <= param_8) {
    //     param_8 = (param_8 - param_3) + 1;
    //     do {
    //       iVar11 = param_2;
    //       puVar15 = puVar10;
    //       if (param_7 < param_2) {
    //         cVar9 = '\0';
    //         pSVar14 = pSVar13;
    //         do {
    //           bVar3 = (byte)pSVar14->bounds;
    //           pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //           if ((bVar3 & 1) == 1) {
    //             if (bVar3 >> 1 == 0) {
    //               iVar11 = iVar11 - (uint)(byte)pSVar13->bounds;
    //               pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //               if (iVar11 <= param_7) {
    //                 if (iVar11 < param_5) {
    //                   cVar9 = '\x02';
    //                 }
    //                 else {
    //                   cVar9 = '\x01';
    //                   puVar15 = puVar15 + (iVar11 - param_7);
    //                 }
    //               }
    //             }
    //             else {
    //               uVar7 = (uint)(bVar3 >> 1);
    //               iVar11 = iVar11 - uVar7;
    //               if (param_7 < iVar11) {
    //                 pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + uVar7);
    //               }
    //               else if (iVar11 < param_5) {
    //                 uVar5 = (param_7 - param_5) + 1;
    //                 cVar9 = '\x02';
    //                 pbVar12 = (byte *)((int)pSVar14 + (iVar11 - param_7) + uVar7);
    //                 if ((char)uVar5 != '\0') {
    //                   uVar5 = uVar5 & 0xff;
    //                   do {
    //                     bVar3 = *pbVar12;
    //                     puVar15 = puVar15 + -1;
    //                     pbVar12 = pbVar12 + 1;
    //                     uVar5 = uVar5 - 1;
    //                     *puVar15 = param_9[bVar3];
    //                   } while (uVar5 != 0);
    //                 }
    //                 pSVar13 = (Shape_Header *)(pbVar12 + (param_5 - iVar11));
    //               }
    //               else {
    //                 cVar9 = '\x01';
    //                 uVar5 = param_7 - iVar11;
    //                 pSVar13 = (Shape_Header *)((int)pSVar13 + (uVar7 - uVar5));
    //                 if ((char)uVar5 != '\0') {
    //                   uVar5 = uVar5 & 0xff;
    //                   do {
    //                     plVar2 = &pSVar13->bounds;
    //                     puVar15 = puVar15 + -1;
    //                     pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + 1);
    //                     uVar5 = uVar5 - 1;
    //                     *puVar15 = param_9[(byte)*plVar2];
    //                   } while (uVar5 != 0);
    //                 }
    //               }
    //             }
    //           }
    //           else if (bVar3 >> 1 == 0) {
    //             cVar9 = '\x03';
    //           }
    //           else {
    //             iVar11 = iVar11 - (uint)(bVar3 >> 1);
    //             if (iVar11 <= param_7) {
    //               if (iVar11 < param_5) {
    //                 cVar9 = '\x02';
    //                 iVar6 = (param_7 - param_5) + 1;
    //               }
    //               else {
    //                 cVar9 = '\x01';
    //                 iVar6 = param_7 - iVar11;
    //               }
    //               puVar15 = puVar15 + -iVar6;
    //               memset(puVar15,param_9[(byte)pSVar13->bounds],iVar6);
    //             }
    //             pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + 2);
    //           }
    //           pSVar14 = pSVar13;
    //         } while (cVar9 == '\0');
    //       }
    //       else {
    //         cVar9 = '\x01';
    //       }
    //       cVar9 = cVar9 + -1;
    //       while (cVar9 == '\0') {
    //         bVar3 = (byte)pSVar13->bounds;
    //         pSVar14 = (Shape_Header *)((int)&pSVar13->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           bVar3 = bVar3 >> 1;
    //           if (bVar3 == 0) {
    //             uVar7 = (uint)(byte)pSVar14->bounds;
    //             iVar11 = iVar11 - uVar7;
    //             puVar15 = puVar15 + -uVar7;
    //             pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //             if (iVar11 < param_5) {
    //               cVar9 = '\x01';
    //             }
    //           }
    //           else {
    //             param_6 = (long)bVar3;
    //             iVar11 = iVar11 - param_6;
    //             if (iVar11 < param_5) {
    //               uVar7 = (iVar11 - param_5) + param_6;
    //               if ((char)uVar7 != '\0') {
    //                 param_3 = uVar7 & 0xff;
    //                 do {
    //                   plVar2 = &pSVar14->bounds;
    //                   puVar15 = puVar15 + -1;
    //                   pSVar14 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //                   *puVar15 = param_9[(byte)*plVar2];
    //                   param_3 = param_3 + -1;
    //                 } while (param_3 != 0);
    //               }
    //               cVar9 = '\x01';
    //               pSVar13 = (Shape_Header *)((int)pSVar14 + (param_6 - uVar7));
    //             }
    //             else {
    //               pSVar13 = pSVar14;
    //               if (bVar3 != 0) {
    //                 do {
    //                   plVar2 = &pSVar14->bounds;
    //                   puVar15 = puVar15 + -1;
    //                   pSVar14 = (Shape_Header *)((int)&pSVar14->bounds + 1);
    //                   *puVar15 = param_9[(byte)*plVar2];
    //                   param_6 = param_6 + -1;
    //                   pSVar13 = pSVar14;
    //                 } while (param_6 != 0);
    //               }
    //             }
    //           }
    //         }
    //         else if (bVar3 >> 1 == 0) {
    //           cVar9 = '\x03';
    //           pSVar13 = pSVar14;
    //         }
    //         else {
    //           uVar7 = (uint)(bVar3 >> 1);
    //           iVar11 = iVar11 - uVar7;
    //           if (iVar11 < param_5) {
    //             cVar9 = '\x01';
    //             uVar7 = (iVar11 - param_5) + uVar7;
    //           }
    //           puVar15 = puVar15 + -uVar7;
    //           memset(puVar15,param_9[(byte)pSVar14->bounds],uVar7);
    //           pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //         }
    //       }
    //       cVar9 = cVar9 + -1;
    //       while (cVar9 == '\0') {
    //         bVar3 = (byte)pSVar13->bounds;
    //         pSVar14 = (Shape_Header *)((int)&pSVar13->bounds + 1);
    //         if ((bVar3 & 1) == 1) {
    //           if (bVar3 >> 1 == 0) {
    // LAB_004bb251:
    //             pSVar13 = (Shape_Header *)((int)&pSVar13->bounds + 2);
    //           }
    //           else {
    //             pSVar13 = (Shape_Header *)((int)&pSVar14->bounds + (uint)(bVar3 >> 1));
    //           }
    //         }
    //         else {
    //           if ((bVar3 & 0xfe) != 0) goto LAB_004bb251;
    //           cVar9 = '\x02';
    //           pSVar13 = pSVar14;
    //         }
    //       }
    //       puVar10 = puVar10 + iVar8;
    //       param_8 = param_8 + -1;
    //     } while (param_8 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BB280
uchar shape_mirror_shadow_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8, uchar* param_9) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_mirror_shadow_clipped(class TDrawArea
    //    *,long,long,long,long,long,long,unsigned char *) */
    // 
    // uchar __thiscall
    // TShape::shape_mirror_shadow_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7,uchar *param_8)
    // 
    // {
    //   bool bVar1;
    //   char cVar2;
    //   long lVar3;
    //   int iVar4;
    //   uchar *puVar5;
    //   byte *pbVar6;
    //   byte *pbVar7;
    //   byte bVar8;
    //   int iVar9;
    //   uint uVar10;
    //   int iVar11;
    //   TDrawArea *pTVar12;
    //   TDrawArea *pTVar13;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar9 = param_1->Orien;
    //   lVar3 = TDrawArea::AlignedWidth(param_1);
    //   iVar4 = lVar3 * iVar9;
    //   pTVar13 = (TDrawArea *)(this->shape_header + 1);
    //   if (iVar9 < 1) {
    //     puVar5 = param_1->Bits + ((param_5 - param_1->Height) + 1) * iVar4;
    //   }
    //   else {
    //     puVar5 = param_1->Bits + iVar4 * param_5;
    //   }
    //   pbVar6 = puVar5 + param_6 + 1;
    //   param_1 = pTVar13;
    //   if (param_3 < param_5) {
    //     iVar9 = param_5 - param_3;
    //     param_3 = param_3 + iVar9;
    //     do {
    //       bVar1 = false;
    //       pTVar12 = pTVar13;
    //       do {
    //         bVar8 = *(byte *)&pTVar12->DrawSystem;
    //         pTVar13 = (TDrawArea *)((int)&pTVar12->DrawSystem + 1);
    //         if ((bVar8 & 1) == 1) {
    //           param_5 = (long)(bVar8 >> 1);
    //           if (bVar8 >> 1 == 0) {
    // LAB_004bb31c:
    //             pTVar13 = (TDrawArea *)((int)&pTVar12->DrawSystem + 2);
    //           }
    //           else {
    //             pTVar13 = (TDrawArea *)((int)&pTVar13->DrawSystem + param_5);
    //           }
    //         }
    //         else {
    //           if ((bVar8 & 0xfe) != 0) goto LAB_004bb31c;
    //           bVar1 = true;
    //         }
    //         pTVar12 = pTVar13;
    //       } while (!bVar1);
    //       iVar9 = iVar9 + -1;
    //       param_1 = pTVar13;
    //     } while (iVar9 != 0);
    //   }
    //   if (param_3 <= param_7) {
    //     param_3 = (param_7 - param_3) + 1;
    //     do {
    //       pbVar7 = pbVar6;
    //       iVar9 = param_2;
    //       if (param_6 < param_2) {
    //         cVar2 = '\0';
    //         pTVar13 = param_1;
    //         do {
    //           bVar8 = *(byte *)&pTVar13->DrawSystem;
    //           param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + 1);
    //           if ((bVar8 & 1) == 1) {
    //             param_5 = (long)(bVar8 >> 1);
    //             if (bVar8 >> 1 == 0) {
    //               iVar9 = iVar9 - (uint)*(byte *)&param_1->DrawSystem;
    //               param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + 2);
    //               if (iVar9 <= param_6) {
    //                 if (iVar9 < param_4) {
    //                   cVar2 = '\x02';
    //                 }
    //                 else {
    //                   cVar2 = '\x01';
    //                   pbVar7 = pbVar7 + (iVar9 - param_6);
    //                 }
    //               }
    //             }
    //             else {
    //               iVar9 = iVar9 - param_5;
    //               if (iVar9 <= param_6) {
    //                 if (iVar9 < param_4) {
    //                   cVar2 = '\x02';
    //                   uVar10 = (param_6 - param_4) + 1;
    //                   if ((char)uVar10 != '\0') {
    //                     uVar10 = uVar10 & 0xff;
    //                     do {
    //                       pbVar7 = pbVar7 + -1;
    //                       uVar10 = uVar10 - 1;
    //                       *pbVar7 = param_8[*pbVar7];
    //                     } while (uVar10 != 0);
    //                     param_1 = (TDrawArea *)((int)&param_1->DrawSystem + param_5);
    //                     goto LAB_004bb477;
    //                   }
    //                 }
    //                 else {
    //                   cVar2 = '\x01';
    //                   if ((char)(param_6 - iVar9) != '\0') {
    //                     uVar10 = param_6 - iVar9 & 0xff;
    //                     do {
    //                       pbVar7 = pbVar7 + -1;
    //                       uVar10 = uVar10 - 1;
    //                       *pbVar7 = param_8[*pbVar7];
    //                     } while (uVar10 != 0);
    //                   }
    //                 }
    //               }
    //               param_1 = (TDrawArea *)((int)&param_1->DrawSystem + param_5);
    //             }
    //           }
    //           else {
    //             param_5 = (long)(bVar8 >> 1);
    //             if (bVar8 >> 1 == 0) {
    //               cVar2 = '\x03';
    //             }
    //             else {
    //               iVar9 = iVar9 - param_5;
    //               if (iVar9 <= param_6) {
    //                 if (iVar9 < param_4) {
    //                   cVar2 = '\x02';
    //                   uVar10 = (param_6 - param_4) + 1;
    //                   if ((char)uVar10 != '\0') {
    //                     uVar10 = uVar10 & 0xff;
    //                     do {
    //                       pbVar7 = pbVar7 + -1;
    //                       uVar10 = uVar10 - 1;
    //                       *pbVar7 = param_8[*pbVar7];
    //                     } while (uVar10 != 0);
    //                   }
    //                 }
    //                 else {
    //                   cVar2 = '\x01';
    //                   if ((char)(param_6 - iVar9) != '\0') {
    //                     uVar10 = param_6 - iVar9 & 0xff;
    //                     do {
    //                       pbVar7 = pbVar7 + -1;
    //                       uVar10 = uVar10 - 1;
    //                       *pbVar7 = param_8[*pbVar7];
    //                     } while (uVar10 != 0);
    //                   }
    //                 }
    //               }
    //               param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + 2);
    //             }
    //           }
    // LAB_004bb477:
    //           pTVar13 = param_1;
    //         } while (cVar2 == '\0');
    //       }
    //       else {
    //         cVar2 = '\x01';
    //       }
    //       cVar2 = cVar2 + -1;
    // joined_r0x004bb485:
    //       if (cVar2 == '\0') {
    //         bVar8 = *(byte *)&param_1->DrawSystem;
    //         pTVar13 = (TDrawArea *)((int)&param_1->DrawSystem + 1);
    //         if ((bVar8 & 1) == 1) {
    //           bVar8 = bVar8 >> 1;
    //           param_5 = (long)bVar8;
    //           if (bVar8 == 0) {
    //             iVar9 = iVar9 - (uint)*(byte *)&pTVar13->DrawSystem;
    //             pbVar7 = pbVar7 + -(uint)*(byte *)&pTVar13->DrawSystem;
    //             param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //             if (iVar9 < param_4) {
    //               cVar2 = '\x01';
    //             }
    //             goto joined_r0x004bb485;
    //           }
    //           iVar9 = iVar9 - param_5;
    //           if (iVar9 < param_4) {
    //             cVar2 = '\x01';
    //             uVar10 = (iVar9 - param_4) + param_5;
    //             if ((char)uVar10 != '\0') {
    //               uVar10 = uVar10 & 0xff;
    //               do {
    //                 pbVar7 = pbVar7 + -1;
    //                 uVar10 = uVar10 - 1;
    //                 *pbVar7 = param_8[*pbVar7];
    //               } while (uVar10 != 0);
    //               param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + param_5);
    //               goto joined_r0x004bb485;
    //             }
    //           }
    //           else {
    //             iVar11 = param_5;
    //             if (bVar8 != 0) {
    //               do {
    //                 pbVar7 = pbVar7 + -1;
    //                 iVar11 = iVar11 + -1;
    //                 *pbVar7 = param_8[*pbVar7];
    //               } while (iVar11 != 0);
    //             }
    //           }
    //           param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + param_5);
    //           goto joined_r0x004bb485;
    //         }
    //         bVar8 = bVar8 >> 1;
    //         param_5 = (long)bVar8;
    //         if (bVar8 == 0) {
    //           cVar2 = '\x03';
    //           param_1 = pTVar13;
    //         }
    //         else {
    //           iVar9 = iVar9 - param_5;
    //           if (iVar9 < param_4) {
    //             cVar2 = '\x01';
    //             uVar10 = (iVar9 - param_4) + param_5;
    //             if ((char)uVar10 != '\0') {
    //               uVar10 = uVar10 & 0xff;
    //               do {
    //                 pbVar7 = pbVar7 + -1;
    //                 uVar10 = uVar10 - 1;
    //                 *pbVar7 = param_8[*pbVar7];
    //               } while (uVar10 != 0);
    //             }
    //           }
    //           else if (bVar8 != 0) {
    //             do {
    //               pbVar7 = pbVar7 + -1;
    //               param_5 = param_5 + -1;
    //               *pbVar7 = param_8[*pbVar7];
    //             } while (param_5 != 0);
    //           }
    //           param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //         }
    //         goto joined_r0x004bb485;
    //       }
    //       cVar2 = cVar2 + -1;
    //       while (cVar2 == '\0') {
    //         bVar8 = *(byte *)&param_1->DrawSystem;
    //         pTVar13 = (TDrawArea *)((int)&param_1->DrawSystem + 1);
    //         if ((bVar8 & 1) == 1) {
    //           param_5 = (long)(bVar8 >> 1);
    //           if (bVar8 >> 1 == 0) {
    // LAB_004bb5ab:
    //             param_1 = (TDrawArea *)((int)&param_1->DrawSystem + 2);
    //           }
    //           else {
    //             param_1 = (TDrawArea *)((int)&pTVar13->DrawSystem + param_5);
    //           }
    //         }
    //         else {
    //           if ((bVar8 & 0xfe) != 0) goto LAB_004bb5ab;
    //           cVar2 = '\x02';
    //           param_1 = pTVar13;
    //         }
    //       }
    //       pbVar6 = pbVar6 + iVar4;
    //       param_3 = param_3 + -1;
    //     } while (param_3 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BB5E0
uchar shape_dither(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: clip_y1 */
    // /* public: unsigned char __thiscall TShape::shape_dither(class TDrawArea *,long,long,long,long,long)
    //     */
    // 
    // uchar __thiscall
    // TShape::shape_dither
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6)
    // 
    // {
    //   Shape_Header *pSVar1;
    //   int iVar2;
    //   int iVar3;
    //   int iVar4;
    //   int iVar5;
    //   uchar uVar6;
    //   int iVar7;
    //   int iVar8;
    //   int iVar9;
    //   int iVar10;
    //   long clip_y1;
    //   tagRECT rect;
    //   
    //   iVar2 = (param_1->ClipRect).left;
    //   iVar3 = (param_1->ClipRect).top;
    //   iVar4 = (param_1->ClipRect).right;
    //   iVar5 = (param_1->ClipRect).bottom;
    //   uVar6 = Check_shape(this,param_4,s_RGL_shape_draw);
    //   if (uVar6 == '\0') {
    //     pSVar1 = (Shape_Header *)(this->shape + this->offsets[param_4].shape);
    //     this->shape_header = pSVar1;
    //     iVar9 = pSVar1->ymin + param_3;
    //     iVar10 = pSVar1->xmax + param_2;
    //     iVar7 = pSVar1->ymax + param_3;
    //     iVar8 = pSVar1->xmin + param_2;
    //     param_2 = iVar8;
    //     if (iVar8 < iVar2) {
    //       param_2 = iVar2;
    //     }
    //     param_4 = iVar9;
    //     if (iVar9 < iVar3) {
    //       param_4 = iVar3;
    //     }
    //     param_3 = iVar10;
    //     if (iVar4 < iVar10) {
    //       param_3 = iVar4;
    //     }
    //     rect.left = iVar7;
    //     if (iVar5 < iVar7) {
    //       rect.left = iVar5;
    //     }
    //     if (param_2 < 0) {
    //       param_2 = 0;
    //     }
    //     if (param_4 < 0) {
    //       param_4 = 0;
    //     }
    //     if (param_1->Width <= param_3) {
    //       param_3 = param_1->Width + -1;
    //     }
    //     if (param_1->Height <= rect.left) {
    //       rect.left = param_1->Height + -1;
    //     }
    //     if ((param_2 <= param_3) && (param_4 <= rect.left)) {
    //       if ((((param_2 == iVar8) && (param_4 == iVar9)) && (param_3 == iVar10)) &&
    //          (rect.left == iVar7)) {
    //         uVar6 = shape_dithered_unclipped(this,param_1,iVar8,iVar9,param_5,param_6);
    //         return uVar6;
    //       }
    //       uVar6 = shape_dithered_clipped
    //                         (this,param_1,iVar8,iVar9,param_2,param_4,param_3,rect.left,param_5,param_6)
    //       ;
    //       return uVar6;
    //     }
    //   }
    //   return '\0';
    // }
    // 
    // 
}

// Offset: 0x004BB770
uchar shape_dithered_unclipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6) {
    // --- Ghidra decompiler output ---
    // 
    // /* WARNING: Variable defined which should be unmapped: save_buffer */
    // /* private: unsigned char __thiscall TShape::shape_dithered_unclipped(class TDrawArea
    //    *,long,long,long,long) */
    // 
    // uchar __thiscall
    // TShape::shape_dithered_unclipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5)
    // 
    // {
    //   int iVar1;
    //   int iVar2;
    //   bool bVar3;
    //   byte bVar4;
    //   long lVar5;
    //   int iVar6;
    //   uchar *puVar7;
    //   uchar *puVar8;
    //   int iVar9;
    //   Shape_Header *pSVar10;
    //   Shape_Header *pSVar11;
    //   uint uVar12;
    //   uchar *puVar13;
    //   bool bVar14;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar1 = param_1->Orien;
    //   lVar5 = TDrawArea::AlignedWidth(param_1);
    //   pSVar11 = this->shape_header;
    //   iVar9 = lVar5 * iVar1;
    //   iVar6 = (pSVar11->ymax - pSVar11->ymin) + 1;
    //   pSVar11 = pSVar11 + 1;
    //   iVar2 = param_3;
    //   if (iVar1 < 1) {
    //     iVar2 = (param_3 - param_1->Height) + 1;
    //   }
    //   puVar7 = param_1->Bits + param_2 + iVar2 * iVar9;
    //   uVar12 = param_4 + param_2 & 1;
    //   if ((param_5 + param_3 & 1U) != 0) {
    //     uVar12 = (uint)(uVar12 != 1);
    //   }
    //   if (0 < iVar6) {
    //     do {
    //       bVar14 = uVar12 != 1;
    //       bVar3 = false;
    //       puVar8 = puVar7;
    //       pSVar10 = pSVar11;
    //       do {
    //         bVar4 = (byte)pSVar10->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 1);
    //         if ((bVar4 & 1) == 1) {
    //           bVar4 = bVar4 >> 1;
    //           param_4 = (long)bVar4;
    //           if (bVar4 == 0) {
    //             bVar4 = (byte)pSVar11->bounds;
    //             puVar8 = puVar8 + bVar4;
    //             if ((bVar4 & 1) != 0) {
    //               uVar12 = (uint)(uVar12 != 1);
    //             }
    // LAB_004bb8d6:
    //             pSVar11 = (Shape_Header *)((int)&pSVar10->bounds + 2);
    //           }
    //           else {
    //             if (uVar12 != 0) {
    //               bVar4 = bVar4 - 1;
    //               puVar8 = puVar8 + 1;
    //             }
    //             param_2 = (long)bVar4;
    //             puVar13 = puVar8 + param_2;
    //             uVar12 = param_2 & 1;
    //             for (; puVar8 < puVar13; puVar8 = puVar8 + 2) {
    //               *puVar8 = '\0';
    //             }
    //             if ((bVar4 & 1) != 0) {
    //               puVar8 = puVar8 + -1;
    //             }
    //             pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + param_4);
    //           }
    //         }
    //         else {
    //           bVar4 = bVar4 >> 1;
    //           if (bVar4 != 0) {
    //             if (uVar12 != 0) {
    //               bVar4 = bVar4 - 1;
    //               puVar8 = puVar8 + 1;
    //             }
    //             param_2 = (long)bVar4;
    //             puVar13 = puVar8 + param_2;
    //             uVar12 = param_2 & 1;
    //             for (; puVar8 < puVar13; puVar8 = puVar8 + 2) {
    //               *puVar8 = '\0';
    //             }
    //             if ((bVar4 & 1) != 0) {
    //               puVar8 = puVar8 + -1;
    //             }
    //             goto LAB_004bb8d6;
    //           }
    //           bVar3 = true;
    //         }
    //         pSVar10 = pSVar11;
    //       } while (!bVar3);
    //       puVar7 = puVar7 + iVar9;
    //       iVar6 = iVar6 + -1;
    //       uVar12 = (uint)bVar14;
    //     } while (iVar6 != 0);
    //   }
    //   return '\x01';
    // }
    // 
    // 
}

// Offset: 0x004BB910
uchar shape_dithered_clipped(TShape* this_, TDrawArea* param_2, long param_3, long param_4, long param_5, long param_6, long param_7, long param_8, long param_9, long param_10) {
    // --- Ghidra decompiler output ---
    // 
    // /* private: unsigned char __thiscall TShape::shape_dithered_clipped(class TDrawArea
    //    *,long,long,long,long,long,long,long,long) */
    // 
    // uchar __thiscall
    // TShape::shape_dithered_clipped
    //           (TShape *this,TDrawArea *param_1,long param_2,long param_3,long param_4,long param_5,
    //           long param_6,long param_7,long param_8,long param_9)
    // 
    // {
    //   int iVar1;
    //   char cVar2;
    //   long lVar3;
    //   int iVar4;
    //   uchar *puVar5;
    //   uchar *puVar6;
    //   bool bVar7;
    //   byte bVar8;
    //   char cVar9;
    //   uchar *puVar10;
    //   Shape_Header *pSVar11;
    //   Shape_Header *pSVar12;
    //   int iVar13;
    //   bool bVar14;
    //   long y;
    //   uchar *save_buffer;
    //   long width;
    //   
    //   iVar1 = param_1->Orien;
    //   lVar3 = TDrawArea::AlignedWidth(param_1);
    //   iVar4 = lVar3 * iVar1;
    //   pSVar11 = this->shape_header + 1;
    //   iVar13 = param_5;
    //   if (iVar1 < 1) {
    //     iVar13 = (param_5 - param_1->Height) + 1;
    //   }
    //   puVar5 = param_1->Bits + param_4 + iVar13 * iVar4;
    //   cVar2 = (char)param_4;
    //   bVar7 = (bool)((char)param_8 + cVar2 & 1);
    //   if ((param_9 + param_5 & 1U) != 0) {
    //     bVar7 = bVar7 != true;
    //   }
    //   iVar1 = param_3;
    //   if (param_3 < param_5) {
    //     iVar13 = param_5 - param_3;
    //     iVar1 = param_3 + iVar13;
    //     do {
    //       bVar14 = false;
    //       pSVar12 = pSVar11;
    //       do {
    //         bVar8 = (byte)pSVar12->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //         if ((bVar8 & 1) == 1) {
    //           param_3 = (long)(bVar8 >> 1);
    //           if (bVar8 >> 1 == 0) {
    // LAB_004bb9c9:
    //             pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //           }
    //           else {
    //             pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + param_3);
    //           }
    //         }
    //         else {
    //           if ((bVar8 & 0xfe) != 0) goto LAB_004bb9c9;
    //           bVar14 = true;
    //         }
    //         pSVar12 = pSVar11;
    //       } while (!bVar14);
    //       iVar13 = iVar13 + -1;
    //     } while (iVar13 != 0);
    //   }
    //   do {
    //     if (param_7 < iVar1) {
    //       return '\x01';
    //     }
    //     bVar14 = bVar7 != true;
    //     param_9 = param_2;
    //     cVar9 = (char)param_6;
    //     puVar6 = puVar5;
    //     if (param_2 < param_4) {
    //       param_5 = 0;
    //       pSVar12 = pSVar11;
    //       do {
    //         bVar8 = (byte)pSVar12->bounds;
    //         pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + 1);
    //         if ((bVar8 & 1) == 1) {
    //           param_3 = (long)(bVar8 >> 1);
    //           if (bVar8 >> 1 == 0) {
    //             param_9 = param_9 + (uint)(byte)pSVar11->bounds;
    //             pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //             if (param_4 <= param_9) {
    //               if (param_6 < param_9) {
    //                 param_5 = 2;
    //               }
    //               else {
    //                 param_5 = 1;
    //                 bVar8 = (char)param_9 - cVar2;
    //                 param_8 = (long)bVar8;
    //                 puVar6 = puVar6 + param_8;
    //                 if ((bVar8 & 1) != 0) {
    //                   bVar7 = bVar7 != true;
    //                 }
    //               }
    //             }
    //           }
    //           else {
    //             param_9 = param_9 + param_3;
    //             if (param_4 < param_9) {
    //               if (param_6 < param_9) {
    //                 param_5 = 2;
    //                 bVar8 = (cVar9 - cVar2) + 1;
    //                 if (bVar7 != false) {
    //                   puVar6 = puVar6 + 1;
    //                   bVar8 = cVar9 - cVar2;
    //                 }
    //                 param_8 = (long)bVar8;
    //                 bVar7 = (bool)(bVar8 & 1);
    //                 puVar10 = puVar6 + param_8;
    //                 for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //                   *puVar6 = '\0';
    //                 }
    //                 if (bVar7 != false) {
    //                   puVar6 = puVar6 + -1;
    //                   pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + param_3);
    //                   goto LAB_004bbbf1;
    //                 }
    //               }
    //               else {
    //                 param_5 = 1;
    //                 bVar8 = (char)param_9 - cVar2;
    //                 if (bVar7 != false) {
    //                   bVar8 = bVar8 - 1;
    //                   puVar6 = puVar6 + 1;
    //                 }
    //                 param_8 = (long)bVar8;
    //                 bVar7 = (bool)(bVar8 & 1);
    //                 puVar10 = puVar6 + param_8;
    //                 for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //                   *puVar6 = '\0';
    //                 }
    //                 if (bVar7 != false) {
    //                   puVar6 = puVar6 + -1;
    //                 }
    //               }
    //             }
    //             pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + param_3);
    //           }
    //         }
    //         else {
    //           param_3 = (long)(bVar8 >> 1);
    //           if (bVar8 >> 1 == 0) {
    //             param_5 = 3;
    //           }
    //           else {
    //             param_9 = param_9 + param_3;
    //             if (param_4 < param_9) {
    //               if (param_6 < param_9) {
    //                 param_5 = 2;
    //                 bVar8 = (cVar9 - cVar2) + 1;
    //                 if (bVar7 != false) {
    //                   puVar6 = puVar6 + 1;
    //                   bVar8 = cVar9 - cVar2;
    //                 }
    //                 param_8 = (long)bVar8;
    //                 puVar10 = puVar6 + param_8;
    //                 for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //                   *puVar6 = '\0';
    //                 }
    //               }
    //               else {
    //                 param_5 = 1;
    //                 bVar8 = (char)param_9 - cVar2;
    //                 if (bVar7 != false) {
    //                   bVar8 = bVar8 - 1;
    //                   puVar6 = puVar6 + 1;
    //                 }
    //                 param_8 = (long)bVar8;
    //                 puVar10 = puVar6 + param_8;
    //                 for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //                   *puVar6 = '\0';
    //                 }
    //               }
    //               bVar7 = (bool)(bVar8 & 1);
    //               if (bVar7 != false) {
    //                 puVar6 = puVar6 + -1;
    //               }
    //             }
    //             pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + 2);
    //           }
    //         }
    // LAB_004bbbf1:
    //         pSVar12 = pSVar11;
    //       } while ((byte)param_5 == '\0');
    //     }
    //     else {
    //       param_5._0_1_ = '\x01';
    //     }
    //     bVar8 = (byte)param_5 - 1;
    //     param_5 = (long)bVar8;
    //     while (bVar8 == 0) {
    //       bVar8 = (byte)pSVar11->bounds;
    //       pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 1);
    //       if ((bVar8 & 1) == 1) {
    //         bVar8 = bVar8 >> 1;
    //         param_3 = (long)bVar8;
    //         if (bVar8 == 0) {
    //           bVar8 = (byte)pSVar12->bounds;
    //           param_9 = param_9 + (uint)bVar8;
    //           if ((bVar8 & 1) != 0) {
    //             bVar7 = bVar7 != true;
    //           }
    //           puVar6 = puVar6 + bVar8;
    //           pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 2);
    //           if (param_6 < param_9) {
    //             param_5 = 1;
    //           }
    //         }
    //         else {
    //           param_9 = param_9 + param_3;
    //           if (param_6 < param_9) {
    //             param_5 = 1;
    //             bVar8 = (cVar9 - (char)param_9) + '\x01' + bVar8;
    //             if (bVar7 != false) {
    //               bVar8 = bVar8 - 1;
    //               puVar6 = puVar6 + 1;
    //             }
    //             param_8 = (long)bVar8;
    //             bVar7 = (bool)(bVar8 & 1);
    //             puVar10 = puVar6 + param_8;
    //             for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //               *puVar6 = '\0';
    //             }
    //             if (bVar7 != false) {
    //               puVar6 = puVar6 + -1;
    //               pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + param_3);
    //               goto LAB_004bbdca;
    //             }
    //           }
    //           else {
    //             if (bVar7 != false) {
    //               bVar8 = bVar8 - 1;
    //               puVar6 = puVar6 + 1;
    //             }
    //             param_8 = (long)bVar8;
    //             bVar7 = (bool)(bVar8 & 1);
    //             puVar10 = puVar6 + param_8;
    //             for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //               *puVar6 = '\0';
    //             }
    //             if (bVar7 != false) {
    //               puVar6 = puVar6 + -1;
    //             }
    //           }
    //           pSVar12 = (Shape_Header *)((int)&pSVar12->bounds + param_3);
    //         }
    //       }
    //       else {
    //         bVar8 = bVar8 >> 1;
    //         param_3 = (long)bVar8;
    //         if (bVar8 == 0) {
    //           param_5 = 3;
    //         }
    //         else {
    //           param_9 = param_9 + param_3;
    //           if (param_6 < param_9) {
    //             param_5 = 1;
    //             bVar8 = (cVar9 - (char)param_9) + '\x01' + bVar8;
    //             if (bVar7 != false) {
    //               bVar8 = bVar8 - 1;
    //               puVar6 = puVar6 + 1;
    //             }
    //             param_8 = (long)bVar8;
    //             bVar7 = (bool)(bVar8 & 1);
    //             puVar10 = puVar6 + param_8;
    //             for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //               *puVar6 = '\0';
    //             }
    //             if (bVar7 != false) {
    //               puVar6 = puVar6 + -1;
    //             }
    //           }
    //           else {
    //             if (bVar7 != false) {
    //               bVar8 = bVar8 - 1;
    //               puVar6 = puVar6 + 1;
    //             }
    //             param_8 = (long)bVar8;
    //             bVar7 = (bool)(bVar8 & 1);
    //             puVar10 = puVar6 + param_8;
    //             for (; puVar6 < puVar10; puVar6 = puVar6 + 2) {
    //               *puVar6 = '\0';
    //             }
    //             if (bVar7 != false) {
    //               puVar6 = puVar6 + -1;
    //             }
    //           }
    //           pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 2);
    //         }
    //       }
    // LAB_004bbdca:
    //       pSVar11 = pSVar12;
    //       bVar8 = (byte)param_5;
    //     }
    //     cVar9 = bVar8 - 1;
    //     while (cVar9 == '\0') {
    //       bVar8 = (byte)pSVar11->bounds;
    //       pSVar12 = (Shape_Header *)((int)&pSVar11->bounds + 1);
    //       if ((bVar8 & 1) == 1) {
    //         param_3 = (long)(bVar8 >> 1);
    //         if (bVar8 >> 1 == 0) {
    // LAB_004bbe05:
    //           pSVar11 = (Shape_Header *)((int)&pSVar11->bounds + 2);
    //         }
    //         else {
    //           pSVar11 = (Shape_Header *)((int)&pSVar12->bounds + param_3);
    //         }
    //       }
    //       else {
    //         if ((bVar8 & 0xfe) != 0) goto LAB_004bbe05;
    //         cVar9 = '\x02';
    //         pSVar11 = pSVar12;
    //       }
    //     }
    //     puVar5 = puVar5 + iVar4;
    //     iVar1 = iVar1 + 1;
    //     bVar7 = bVar14;
    //   } while( true );
    // }
    // 
    // 
}

