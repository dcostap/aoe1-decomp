// Class: TribeAchievementsScreen
// Size:  0x5F8
//
// VTable Layout:
// [00] `vector_deleting_destructor'
// [01] setup
// [02] set_rect
// [03] set_rect
// [04] set_color
// [05] set_active
// [06] set_positioning
// [07] set_fixed_position
// [08] set_redraw
// [09] set_overlapped_redraw
// [10] draw_setup
// [11] draw_finish
// [12] draw
// [13] draw_rect
// [14] draw_offset
// [15] draw_rect2
// [16] draw_offset2
// [17] paint
// [18] wnd_proc
// [19] handle_idle
// [20] handle_size
// [21] handle_paint
// [22] handle_key_down
// [23] handle_char
// [24] handle_command
// [25] handle_user_command
// [26] handle_timer_command
// [27] handle_scroll
// [28] handle_mouse_down
// [29] handle_mouse_move
// [30] handle_mouse_up
// [31] handle_mouse_dbl_click
// [32] mouse_move_action
// [33] mouse_left_down_action
// [34] mouse_left_hold_action
// [35] mouse_left_move_action
// [36] mouse_left_up_action
// [37] mouse_left_dbl_click_action
// [38] mouse_right_down_action
// [39] mouse_right_hold_action
// [40] mouse_right_move_action
// [41] mouse_right_up_action
// [42] mouse_right_dbl_click_action
// [43] key_down_action
// [44] char_action
// [45] action
// [46] get_true_render_rect
// [47] is_inside
// [48] set_focus
// [49] set_tab_order
// [50] set_tab_order
// [51] get_help_info
// [52] stop_sound_system
// [53] restart_sound_system
// [54] take_snapshot
// [55] handle_reactivate
// [56] draw_background
// [57] set_ideal_size
// [58] create_button
// [59] create_button
// [60] create_check_box
// [61] create_radio_button
// [62] create_text
// [63] create_text
// [64] create_text
// [65] create_input
// [66] create_edit
// [67] create_drop_down
// [68] create_list
// [69] create_scrollbar
// [70] create_auto_scrollbar
// [71] create_vert_slider
// [72] create_horz_slider
// [73] position_panel
// [74] `vector_deleting_destructor'
// [75] setup
// [76] set_rect
// [77] set_rect
// [78] set_color
// [79] set_active
// [80] set_positioning
// [81] set_fixed_position
// [82] set_redraw
// [83] set_overlapped_redraw
// [84] draw_setup
// [85] draw_finish
// [86] draw
// [87] draw_rect
// [88] draw_offset
// [89] draw_rect2
// [90] draw_offset2
// [91] paint
// [92] wnd_proc
// [93] handle_idle
// [94] handle_size
// [95] handle_paint
// [96] handle_key_down
// [97] handle_char
// [98] handle_command
// [99] handle_user_command
// [100] handle_timer_command
// [101] handle_scroll
// [102] handle_mouse_down
// [103] handle_mouse_move
// [104] handle_mouse_up
// [105] handle_mouse_dbl_click
// [106] mouse_move_action
// [107] mouse_left_down_action
// [108] mouse_left_hold_action
// [109] mouse_left_move_action
// [110] mouse_left_up_action
// [111] mouse_left_dbl_click_action
// [112] mouse_right_down_action
// [113] mouse_right_hold_action
// [114] mouse_right_move_action
// [115] mouse_right_up_action
// [116] mouse_right_dbl_click_action
// [117] key_down_action
// [118] char_action
// [119] action
// [120] get_true_render_rect
// [121] is_inside
// [122] set_focus
// [123] set_tab_order
// [124] set_tab_order
// [125] get_help_info
// [126] stop_sound_system
// [127] restart_sound_system
// [128] take_snapshot
// [129] handle_reactivate
// [130] draw_background
// [131] set_ideal_size
// [132] create_button
// [133] create_button
// [134] create_check_box
// [135] create_radio_button
// [136] create_text
// [137] create_text
// [138] create_text
// [139] create_input
// [140] create_edit
// [141] create_drop_down
// [142] create_list
// [143] create_scrollbar
// [144] create_auto_scrollbar
// [145] create_vert_slider
// [146] create_horz_slider
// [147] position_panel
// [148] `vector_deleting_destructor'
// [149] setup
// [150] set_rect
// [151] set_rect
// [152] set_color
// [153] set_active
// [154] set_positioning
// [155] set_fixed_position
// [156] set_redraw
// [157] set_overlapped_redraw
// [158] draw_setup
// [159] draw_finish
// [160] draw
// [161] draw_rect
// [162] draw_offset
// [163] draw_rect2
// [164] draw_offset2
// [165] paint
// [166] wnd_proc
// [167] handle_idle
// [168] handle_size
// [169] handle_paint
// [170] handle_key_down
// [171] handle_char
// [172] handle_command
// [173] handle_user_command
// [174] handle_timer_command
// [175] handle_scroll
// [176] handle_mouse_down
// [177] handle_mouse_move
// [178] handle_mouse_up
// [179] handle_mouse_dbl_click
// [180] mouse_move_action
// [181] mouse_left_down_action
// [182] mouse_left_hold_action
// [183] mouse_left_move_action
// [184] mouse_left_up_action
// [185] mouse_left_dbl_click_action
// [186] mouse_right_down_action
// [187] mouse_right_hold_action
// [188] mouse_right_move_action
// [189] mouse_right_up_action
// [190] mouse_right_dbl_click_action
// [191] key_down_action
// [192] char_action
// [193] action
// [194] get_true_render_rect
// [195] is_inside
// [196] set_focus
// [197] set_tab_order
// [198] set_tab_order
// [199] get_help_info
// [200] stop_sound_system
// [201] restart_sound_system
// [202] take_snapshot
// [203] handle_reactivate
// [204] draw_background
// [205] set_ideal_size
// [206] create_button
// [207] create_button
// [208] create_check_box
// [209] create_radio_button
// [210] create_text
// [211] create_text
// [212] create_text
// [213] create_input
// [214] create_edit
// [215] create_drop_down
// [216] create_list
// [217] create_scrollbar
// [218] create_auto_scrollbar
// [219] create_vert_slider
// [220] create_horz_slider
// [221] position_panel
// [222] `scalar_deleting_destructor'
// [223] setup
// [224] set_rect
// [225] set_rect
// [226] set_color
// [227] set_active
// [228] set_positioning
// [229] set_fixed_position
// [230] set_redraw
// [231] set_overlapped_redraw
// [232] draw_setup
// [233] draw_finish
// [234] draw
// [235] draw_rect
// [236] draw_offset
// [237] draw_rect2
// [238] draw_offset2
// [239] paint
// [240] wnd_proc
// [241] handle_idle
// [242] handle_size
// [243] handle_paint
// [244] handle_key_down
// [245] handle_char
// [246] handle_command
// [247] handle_user_command
// [248] handle_timer_command
// [249] handle_scroll
// [250] handle_mouse_down
// [251] handle_mouse_move
// [252] handle_mouse_up
// [253] handle_mouse_dbl_click
// [254] mouse_move_action
// [255] mouse_left_down_action
// [256] mouse_left_hold_action
// [257] mouse_left_move_action
// [258] mouse_left_up_action
// [259] mouse_left_dbl_click_action
// [260] mouse_right_down_action
// [261] mouse_right_hold_action
// [262] mouse_right_move_action
// [263] mouse_right_up_action
// [264] mouse_right_dbl_click_action
// [265] key_down_action
// [266] char_action
// [267] action
// [268] get_true_render_rect
// [269] is_inside
// [270] set_focus
// [271] set_tab_order
// [272] set_tab_order
// [273] get_help_info
// [274] stop_sound_system
// [275] restart_sound_system
// [276] take_snapshot
// [277] handle_reactivate
// [278] draw_background
// [279] set_ideal_size
// [280] create_button
// [281] create_button
// [282] create_check_box
// [283] create_radio_button
// [284] create_text
// [285] create_text
// [286] create_text
// [287] create_input
// [288] create_edit
// [289] create_drop_down
// [290] create_list
// [291] create_scrollbar
// [292] create_auto_scrollbar
// [293] create_vert_slider
// [294] create_horz_slider
// [295] position_panel
// [296] `vector_deleting_destructor'
// [297] setup
// [298] set_rect
// [299] set_rect
// [300] set_color
// [301] set_active
// [302] set_positioning
// [303] set_fixed_position
// [304] set_redraw
// [305] set_overlapped_redraw
// [306] draw_setup
// [307] draw_finish
// [308] draw
// [309] draw_rect
// [310] draw_offset
// [311] draw_rect2
// [312] draw_offset2
// [313] paint
// [314] wnd_proc
// [315] handle_idle
// [316] handle_size
// [317] handle_paint
// [318] handle_key_down
// [319] handle_char
// [320] handle_command
// [321] handle_user_command
// [322] handle_timer_command
// [323] handle_scroll
// [324] handle_mouse_down
// [325] handle_mouse_move
// [326] handle_mouse_up
// [327] handle_mouse_dbl_click
// [328] mouse_move_action
// [329] mouse_left_down_action
// [330] mouse_left_hold_action
// [331] mouse_left_move_action
// [332] mouse_left_up_action
// [333] mouse_left_dbl_click_action
// [334] mouse_right_down_action
// [335] mouse_right_hold_action
// [336] mouse_right_move_action
// [337] mouse_right_up_action
// [338] mouse_right_dbl_click_action
// [339] key_down_action
// [340] char_action
// [341] action
// [342] get_true_render_rect
// [343] is_inside
// [344] set_focus
// [345] set_tab_order
// [346] set_tab_order
// [347] get_help_info
// [348] stop_sound_system
// [349] restart_sound_system
// [350] take_snapshot
// [351] handle_reactivate
// [352] draw_background
// [353] set_ideal_size
// [354] create_button
// [355] create_button
// [356] create_check_box
// [357] create_radio_button
// [358] create_text
// [359] create_text
// [360] create_text
// [361] create_input
// [362] create_edit
// [363] create_drop_down
// [364] create_list
// [365] create_scrollbar
// [366] create_auto_scrollbar
// [367] create_vert_slider
// [368] create_horz_slider
// [369] position_panel
// [370] setup
// [371] setup
// [372] `scalar_deleting_destructor'
// [373] setup
// [374] set_rect
// [375] set_rect
// [376] set_color
// [377] set_active
// [378] set_positioning
// [379] set_fixed_position
// [380] set_redraw
// [381] set_overlapped_redraw
// [382] draw_setup
// [383] draw_finish
// [384] draw
// [385] draw_rect
// [386] draw_offset
// [387] draw_rect2
// [388] draw_offset2
// [389] paint
// [390] wnd_proc
// [391] handle_idle
// [392] handle_size
// [393] handle_paint
// [394] handle_key_down
// [395] handle_char
// [396] handle_command
// [397] handle_user_command
// [398] handle_timer_command
// [399] handle_scroll
// [400] handle_mouse_down
// [401] handle_mouse_move
// [402] handle_mouse_up
// [403] handle_mouse_dbl_click
// [404] mouse_move_action
// [405] mouse_left_down_action
// [406] mouse_left_hold_action
// [407] mouse_left_move_action
// [408] mouse_left_up_action
// [409] mouse_left_dbl_click_action
// [410] mouse_right_down_action
// [411] mouse_right_hold_action
// [412] mouse_right_move_action
// [413] mouse_right_up_action
// [414] mouse_right_dbl_click_action
// [415] key_down_action
// [416] char_action
// [417] action
// [418] get_true_render_rect
// [419] is_inside
// [420] set_focus
// [421] set_tab_order
// [422] set_tab_order
// [423] get_help_info
// [424] stop_sound_system
// [425] restart_sound_system
// [426] take_snapshot
// [427] handle_reactivate
// [428] draw_background
// [429] set_ideal_size
// [430] create_button
// [431] create_button
// [432] create_check_box
// [433] create_radio_button
// [434] create_text
// [435] create_text
// [436] create_text
// [437] create_input
// [438] create_edit
// [439] create_drop_down
// [440] create_list
// [441] create_scrollbar
// [442] create_auto_scrollbar
// [443] create_vert_slider
// [444] create_horz_slider
// [445] position_panel
// [446] `vector_deleting_destructor'
// [447] setup
// [448] set_rect
// [449] set_rect
// [450] set_color
// [451] set_active
// [452] set_positioning
// [453] set_fixed_position
// [454] set_redraw
// [455] set_overlapped_redraw
// [456] draw_setup
// [457] draw_finish
// [458] draw
// [459] draw_rect
// [460] draw_offset
// [461] draw_rect2
// [462] draw_offset2
// [463] paint
// [464] wnd_proc
// [465] handle_idle
// [466] handle_size
// [467] handle_paint
// [468] handle_key_down
// [469] handle_char
// [470] handle_command
// [471] handle_user_command
// [472] handle_timer_command
// [473] handle_scroll
// [474] handle_mouse_down
// [475] handle_mouse_move
// [476] handle_mouse_up
// [477] handle_mouse_dbl_click
// [478] mouse_move_action
// [479] mouse_left_down_action
// [480] mouse_left_hold_action
// [481] mouse_left_move_action
// [482] mouse_left_up_action
// [483] mouse_left_dbl_click_action
// [484] mouse_right_down_action
// [485] mouse_right_hold_action
// [486] mouse_right_move_action
// [487] mouse_right_up_action
// [488] mouse_right_dbl_click_action
// [489] key_down_action
// [490] char_action
// [491] action
// [492] get_true_render_rect
// [493] is_inside
// [494] set_focus
// [495] set_tab_order
// [496] set_tab_order
// [497] get_help_info
// [498] stop_sound_system
// [499] restart_sound_system
// [500] take_snapshot
// [501] handle_reactivate
// [502] set_text
// [503] set_text
// [504] set_text
// [505] set_bevel_info
//
// Member Layout:
// [0x478] int end_game_flag
// [0x47C] int current_mode
// [0x480] int size
// [0x484] TTextPanel * title
// [0x488] TTextPanel * summary_text
// [0x48C] TTextPanel * instruction
// [0x490] TTextPanel * win_loss_text
// [0x494] TTextPanel * time
// [0x498] TTextPanel *[7] title_bar (sz: 0x1C)
// [0x4B4] TTextPanel *[5] achievement_choice (sz: 0x14)
// [0x4C8] TTextPanel *[8][7] statistics (sz: 0xE0)
// [0x5A8] TTextPanel *[8] player_names (sz: 0x20)
// [0x5C8] TScrollBarPanel * summary_text_bar
// [0x5CC] TScrollBarPanel * instruction_bar
// [0x5D0] TScrollBarPanel * win_loss_text_bar
// [0x5D4] TButtonPanel * okButton
// [0x5D8] TButtonPanel * backButton
// [0x5DC] TButtonPanel * backButton2
// [0x5E0] TButtonPanel * timelineButton
// [0x5E4] TButtonPanel * aftermathButton
// [0x5E8] TButtonPanel * restartButton
// [0x5EC] TButtonPanel * close_button
// [0x5F0] TShape * win_decal
// [0x5F4] Time_Line_Panel * time_line
// ----------------------------------------------------------------

// Function: TribeAchievementsScreen
// Address: 0048d530
// [HELPER] s_: ""
// [HELPER] s_Achievements_Screen: "Achievements Screen"
// [HELPER] s_defcheck_slp: "defcheck.slp"
// [HELPER] s_scr10: "scr10"
// [HELPER] s_scr7: "scr7"
// [HELPER] s_scr8: "scr8"
// [HELPER] s_timeline_slp: "timeline.slp"
// [HELPER] s_viccheck_slp: "viccheck.slp"
TribeAchievementsScreen * __thiscall
TribeAchievementsScreen::TribeAchievementsScreen
          (TribeAchievementsScreen *this,char *param_1,int param_2)
{
  TButtonPanel **ppTVar1;
  Time_Line_Panel **ppTVar2;
  TButtonPanel **ppTVar3;
  char cVar4;
  TButtonPanel *pTVar5;
  bool bVar6;
  RGE_Player *pRVar7;
  long lVar8;
  char *pcVar9;
  TShape *pTVar10;
  int iVar11;
  uint uVar12;
  uint uVar13;
  RGE_Scenario *this_00;
  TTextPanel **ppTVar14;
  TTextPanel **ppTVar15;
  TTextPanel *(*papTVar16) [7];
  char *pcVar17;
  int iVar18;
  TTextPanel *(*papTVar19) [7];
  char *pcVar20;
  TTextPanel **ppTVar21;
  undefined4 *unaff_FS_OFFSET;
  long lVar22;
  ulong uVar23;
  int iVar24;
  TPanel *pTVar25;
  ulong color;
  int local_1dc;
  TPanel *tabList [8];
  char temptxt [50];
  char str [100];
  char info_file [260];
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055e847;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  TScreenPanel::TScreenPanel((TScreenPanel *)this,s_Achievements_Screen);
  ppTVar1 = &this->close_button;
  local_4 = 0;
  this->title = (TTextPanel *)0x0;
  this->time = (TTextPanel *)0x0;
  this->summary_text = (TTextPanel *)0x0;
  this->win_loss_text = (TTextPanel *)0x0;
  this->instruction = (TTextPanel *)0x0;
  this->time_line = (Time_Line_Panel *)0x0;
  this->okButton = (TButtonPanel *)0x0;
  this->timelineButton = (TButtonPanel *)0x0;
  this->restartButton = (TButtonPanel *)0x0;
  this->aftermathButton = (TButtonPanel *)0x0;
  this->backButton = (TButtonPanel *)0x0;
  this->backButton2 = (TButtonPanel *)0x0;
  this->win_decal = (TShape *)0x0;
  *ppTVar1 = (TButtonPanel *)0x0;
  this->instruction_bar = (TScrollBarPanel *)0x0;
  this->win_loss_text_bar = (TScrollBarPanel *)0x0;
  this->summary_text_bar = (TScrollBarPanel *)0x0;
  this->_padding_ = (int)&_vftable_;
  str[1] = '\0';
  this->end_game_flag = param_2;
  this->achievement_choice[0] = (TTextPanel *)0x0;
  papTVar16 = this->statistics;
  this->achievement_choice[1] = (TTextPanel *)0x0;
  ppTVar14 = this->player_names;
  local_1dc = 8;
  this->achievement_choice[2] = (TTextPanel *)0x0;
  this->achievement_choice[3] = (TTextPanel *)0x0;
  this->achievement_choice[4] = (TTextPanel *)0x0;
  ppTVar21 = this->title_bar;
  for (iVar11 = 7; iVar11 != 0; iVar11 = iVar11 + -1) {
    *ppTVar21 = (TTextPanel *)0x0;
    ppTVar21 = ppTVar21 + 1;
  }
  do {
    *ppTVar14 = (TTextPanel *)0x0;
    papTVar19 = papTVar16;
    for (iVar11 = 7; iVar11 != 0; iVar11 = iVar11 + -1) {
      (*papTVar19)[0] = (TTextPanel *)0x0;
      papTVar19 = (TTextPanel *(*) [7])(*papTVar19 + 1);
    }
    ppTVar14 = ppTVar14 + 1;
    papTVar16 = papTVar16 + 1;
    local_1dc = local_1dc + -1;
  } while (local_1dc != 0);
  if (this->end_game_flag == 0) {
    uVar12 = 0xffffffff;
    pcVar9 = info_file;
    pcVar17 = s_scr10;
    do {
      pcVar20 = pcVar17;
      if (uVar12 == 0) break;
      uVar12 = uVar12 - 1;
      pcVar20 = pcVar17 + 1;
      cVar4 = *pcVar17;
      pcVar17 = pcVar20;
    } while (cVar4 != '\0');
    uVar12 = ~uVar12;
    pcVar17 = pcVar20 + -uVar12;
    for (uVar13 = uVar12 >> 2; pcVar9 = pcVar9 + 4, uVar13 != 0; uVar13 = uVar13 - 1) {
      *(undefined4 *)pcVar9 = *(undefined4 *)pcVar17;
      pcVar17 = pcVar17 + 4;
    }
    lVar8 = 0xc38d;
    for (uVar12 = uVar12 & 3; uVar12 != 0; uVar12 = uVar12 - 1) {
      *pcVar9 = *pcVar17;
      pcVar17 = pcVar17 + 1;
      pcVar9 = pcVar9 + 1;
    }
  }
  else {
    pRVar7 = RGE_Base_Game::get_player(rge_base_game);
    if (pRVar7->game_status == '\x01') {
      uVar12 = 0xffffffff;
      pcVar9 = &s_scr7;
      do {
        pcVar17 = pcVar9;
        if (uVar12 == 0) break;
        uVar12 = uVar12 - 1;
        pcVar17 = pcVar9 + 1;
        cVar4 = *pcVar9;
        pcVar9 = pcVar17;
      } while (cVar4 != '\0');
      uVar12 = ~uVar12;
      pcVar9 = pcVar17 + -uVar12;
      pcVar17 = info_file + 4;
      for (uVar13 = uVar12 >> 2; uVar13 != 0; uVar13 = uVar13 - 1) {
        *(undefined4 *)pcVar17 = *(undefined4 *)pcVar9;
        pcVar9 = pcVar9 + 4;
        pcVar17 = pcVar17 + 4;
      }
      lVar8 = 0xc389;
      for (uVar12 = uVar12 & 3; uVar12 != 0; uVar12 = uVar12 - 1) {
        *pcVar17 = *pcVar9;
        pcVar9 = pcVar9 + 1;
        pcVar17 = pcVar17 + 1;
      }
    }
    else {
      uVar12 = 0xffffffff;
      pcVar9 = &s_scr8;
      do {
        pcVar17 = pcVar9;
        if (uVar12 == 0) break;
        uVar12 = uVar12 - 1;
        pcVar17 = pcVar9 + 1;
        cVar4 = *pcVar9;
        pcVar9 = pcVar17;
      } while (cVar4 != '\0');
      uVar12 = ~uVar12;
      pcVar9 = pcVar17 + -uVar12;
      pcVar17 = info_file + 4;
      for (uVar13 = uVar12 >> 2; uVar13 != 0; uVar13 = uVar13 - 1) {
        *(undefined4 *)pcVar17 = *(undefined4 *)pcVar9;
        pcVar9 = pcVar9 + 4;
        pcVar17 = pcVar17 + 4;
      }
      lVar8 = 0xc38a;
      for (uVar12 = uVar12 & 3; uVar12 != 0; uVar12 = uVar12 - 1) {
        *pcVar17 = *pcVar9;
        pcVar9 = pcVar9 + 1;
        pcVar17 = pcVar17 + 1;
      }
    }
  }
  lVar8 = TScreenPanel::setup((TScreenPanel *)this,rge_base_game->draw_area,info_file + 4,lVar8,1);
  if (lVar8 == 0) {
    this->_padding_ = 1;
    goto LAB_0048e1a9;
  }
  TEasy_Panel::set_ideal_size((TEasy_Panel *)this,0x280,0x1e0);
  sprintf();
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,&this->time,str + 4,0x1e0,10,0x6e,0x14,0xb,0,0,0);
  TTextPanel::set_alignment(this->time,AlignTop,AlignRight);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,&this->title,0x269e,0,5,0x280,0x1e,1,1,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,&this->summary_text,0,10,0x23,0x26c,0x1e,1,1,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,&this->instruction,0x26db,10,0x19a,0x26c,0x14,0xb,1,
             0,0);
  if (this->end_game_flag != 0) {
    pRVar7 = RGE_Base_Game::get_player(rge_base_game);
    if (pRVar7->game_status == '\x01') {
      lVar8 = 2;
      this_00 = rge_base_game->world->scenario;
    }
    else {
      lVar8 = 3;
      this_00 = rge_base_game->world->scenario;
    }
    pcVar9 = RGE_Scenario::Get_message(this_00,lVar8);
    if ((pcVar9 != (char *)0x0) && (*pcVar9 != '\0')) {
      ppTVar14 = &this->win_loss_text;
      TEasy_Panel::create_text
                ((TEasy_Panel *)this,(TPanel *)this,ppTVar14,s_,10,0x55,0x26c,0x14a,0xb,0,0,1);
      if (*ppTVar14 != (TTextPanel *)0x0) {
        TEasy_Panel::create_auto_scrollbar
                  ((TEasy_Panel *)this,&this->win_loss_text_bar,*ppTVar14,0x14);
        (**(code **)((*ppTVar14)->_padding_ + 0xec))(4);
        (**(code **)((*ppTVar14)->_padding_ + 0xe8))(pcVar9);
      }
    }
  }
  ppTVar2 = &this->time_line;
  Time_Line_Panel::create_timeline
            (this->time_line,(TPanel *)this,ppTVar2,10,0x55,0x26c,0x14a,0xb,9,0x280,0x1e0);
  Time_Line_Panel::set_bevel_info
            (*ppTVar2,3,(uint)(byte)this->_padding_,(uint)*(byte *)((int)&this->_padding_ + 1),
             (uint)*(byte *)((int)&this->_padding_ + 2),(uint)*(byte *)((int)&this->_padding_ + 3),
             (uint)(byte)this->_padding_,(uint)*(byte *)((int)&this->_padding_ + 1));
  Time_Line_Panel::set_special_events(*ppTVar2,s_timeline_slp);
  iVar11 = TEasy_Panel::create_button
                     ((TEasy_Panel *)this,(TPanel *)this,ppTVar1,0x3ea,0,0,0,0,0,-1,-1,0);
  if (iVar11 == 0) goto LAB_0048e1a9;
  (**(code **)((*ppTVar1)->_padding_ + 0x14))();
  (**(code **)((*ppTVar1)->_padding_ + 0x18))(9,4,4,4,4,0x11,0x11,0x11);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar,0,0x62,0x97,200,0x1e,0xb,0,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 1,0,0x98,0x83,200,0x1e,0xb,0,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 2,0,0xd4,0x6f,0x91,0x1e,0xb,0,0,0)
  ;
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 3,0,0x104,0x5b,200,0x1e,0xb,1,0,0)
  ;
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 4,0,0x16c,0x6f,0x91,0x1e,0xb,0,0,0
            );
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 5,0,0x172,0x83,200,0x1e,0xb,0,0,0)
  ;
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->title_bar + 6,0,0x1a8,0x97,200,0x1e,0xb,0,0,0)
  ;
  TTextPanel::set_alignment(this->title_bar[4],AlignTop,AlignRight);
  TTextPanel::set_alignment(this->title_bar[5],AlignTop,AlignRight);
  TTextPanel::set_alignment(this->title_bar[6],AlignTop,AlignRight);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->achievement_choice,0,100,0x97,0x82,0xfa,0xb,0,
             0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->achievement_choice + 1,0,0x9a,0x83,0x80,0x112,
             0xb,0,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->achievement_choice + 2,0,0xd6,0x6f,0x79,0x121,
             0xb,0,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->achievement_choice + 3,0,0x11a,0x5b,0x9c,0x135
             ,0xb,0,0,0);
  TEasy_Panel::create_text
            ((TEasy_Panel *)this,(TPanel *)this,this->achievement_choice + 4,0,0x184,0x6f,0x79,0x121
             ,0xb,0,0,0);
  ppTVar14 = this->player_names;
  pTVar25 = (TPanel *)0x4;
  iVar18 = 0xab;
  ppTVar21 = this->statistics[0] + 2;
  iVar11 = 1;
  do {
    if (iVar11 < rge_base_game->world->player_num) {
      pcVar9 = *(char **)(*(int *)((int)rge_base_game->world->players + (int)pTVar25) + 0x44);
    }
    else {
      pcVar9 = (char *)0x0;
    }
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar14,pcVar9,0x16,iVar18,0x96,0x1d,0xb,0,1,0);
    ppTVar15 = ppTVar21 + -2;
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar15,0,0xb2,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21 + -1,0,0xe7,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21,0,0x11b,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21 + 1,0,0x150,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21 + 2,0,0x185,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21 + 3,0,0x1ba,iVar18,0x33,0x1d,0xb,1,1,0);
    TEasy_Panel::create_text
              ((TEasy_Panel *)this,(TPanel *)this,ppTVar21 + 4,0,0x1ee,iVar18,0x33,0x1d,0xb,1,1,0);
    if (iVar11 < rge_base_game->world->player_num) {
      switch(*(undefined2 *)
              (*(int *)(*(int *)((int)rge_base_game->world->players + (int)pTVar25) + 0x108) + 0x26)
            ) {
      case 0:
        uVar23 = 0xc40000;
        break;
      case 1:
        uVar23 = 200;
        break;
      case 2:
        uVar23 = 0xeaea;
        break;
      case 3:
        uVar23 = 0x215a8c;
        break;
      case 4:
        uVar23 = 0x80ff;
        break;
      case 5:
        uVar23 = 0x8000;
        break;
      case 6:
        uVar23 = 0x808080;
        break;
      case 7:
        uVar23 = 0x808040;
        break;
      default:
        uVar23 = 0xffffff;
      }
      TTextPanel::set_text_color(*ppTVar14,uVar23,0);
      iVar24 = 7;
      do {
        TTextPanel::set_text_color(*ppTVar15,uVar23,0);
        ppTVar15 = ppTVar15 + 1;
        iVar24 = iVar24 + -1;
      } while (iVar24 != 0);
    }
    iVar18 = iVar18 + 0x1e;
    pTVar25 = (TPanel *)&pTVar25->previousPanelValue;
    ppTVar14 = ppTVar14 + 1;
    ppTVar21 = ppTVar21 + 7;
    bVar6 = iVar11 < 8;
    iVar11 = iVar11 + 1;
  } while (bVar6);
  if ((this->end_game_flag == 0) ||
     (iVar11 = RGE_Base_Game::singlePlayerGame(rge_base_game), iVar11 == 0)) {
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->timelineButton,0x26d8,0,100,0x1b9,200,0x1e,
               0,0,0);
    lVar22 = 200;
    lVar8 = 0x154;
  }
  else if (this->win_loss_text == (TTextPanel *)0x0) {
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->timelineButton,0x26d8,0,0x14,0x1b9,0xb4,
               0x1e,0,0,0);
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->restartButton,0x269f,0,0xe6,0x1b9,0xb4,0x1e
               ,0,0,0);
    lVar22 = 0xb4;
    lVar8 = 0x1b8;
  }
  else {
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->aftermathButton,0x26b2,0,5,0x1b9,0x96,0x1e,
               0,0,0);
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->timelineButton,0x26d8,0,0xa5,0x1b9,0x96,
               0x1e,0,0,0);
    TEasy_Panel::create_button
              ((TEasy_Panel *)this,(TPanel *)this,&this->restartButton,0x269f,0,0x145,0x1b9,0x96,
               0x1e,0,0,0);
    lVar22 = 0x96;
    lVar8 = 0x1e5;
  }
  TEasy_Panel::create_button
            ((TEasy_Panel *)this,(TPanel *)this,&this->okButton,0x269c,0,lVar8,0x1b9,lVar22,0x1e,0,0
             ,0);
  ppTVar1 = &this->backButton;
  TEasy_Panel::create_button
            ((TEasy_Panel *)this,(TPanel *)this,ppTVar1,0x26da,0,200,0x1b9,0xf0,0x1e,0,0,0);
  (**(code **)((*ppTVar1)->_padding_ + 0x14))(0);
  pTVar5 = *ppTVar1;
  ppTVar3 = &this->backButton2;
  pTVar5->hotkey = 0x1b;
  pTVar5->hotkey_shift = 0;
  TEasy_Panel::create_button
            ((TEasy_Panel *)this,(TPanel *)this,ppTVar3,0x269c,0,200,0x1b9,0xf0,0x1e,0,0,0);
  (**(code **)((*ppTVar3)->_padding_ + 0x14))(0);
  pTVar5 = *ppTVar3;
  pTVar5->hotkey = 0x1b;
  pTVar5->hotkey_shift = 0;
  pTVar5 = this->okButton;
  pTVar5->hotkey = 0x1b;
  pTVar5->hotkey_shift = 0;
  pRVar7 = RGE_Base_Game::get_player(rge_base_game);
  if (pRVar7->game_status == '\x01') {
    pTVar10 = (TShape *)operator_new(0x20);
    info_file[0xd0] = '\x01';
    if (pTVar10 == (TShape *)0x0) {
LAB_0048e10d:
      pTVar10 = (TShape *)0x0;
    }
    else {
      pTVar10 = (TShape *)TShape::TShape(pTVar10,s_viccheck_slp,0xcb21);
    }
  }
  else {
    pTVar10 = (TShape *)operator_new(0x20);
    info_file[0xd0] = '\x02';
    if (pTVar10 == (TShape *)0x0) goto LAB_0048e10d;
    pTVar10 = (TShape *)TShape::TShape(pTVar10,s_defcheck_slp,0xcb22);
  }
  this->win_decal = pTVar10;
  info_file[0xd0] = '\0';
  uVar12 = (uint)(this->aftermathButton != (TButtonPanel *)0x0);
  if (this->timelineButton != (TButtonPanel *)0x0) {
    *(TButtonPanel **)(&stack0xfffffdf8 + uVar12 * 4) = this->timelineButton;
    uVar12 = uVar12 + 1;
  }
  if (this->restartButton != (TButtonPanel *)0x0) {
    *(TButtonPanel **)(&stack0xfffffdf8 + uVar12 * 4) = this->restartButton;
    uVar12 = uVar12 + 1;
  }
  *(TButtonPanel **)(&stack0xfffffdf8 + uVar12 * 4) = this->okButton;
  TPanel::set_tab_order((TPanel *)this,(TPanel **)&stack0xfffffdf8,(short)uVar12 + 1);
  TPanel::set_curr_child((TPanel *)this,(TPanel *)this->okButton);
  (**(code **)((*ppTVar1)->_padding_ + 0xc4))(0,0);
  (**(code **)((*ppTVar3)->_padding_ + 0xc4))(0,0);
  if (this->win_loss_text == (TTextPanel *)0x0) {
    lVar8 = 0;
  }
  else {
    lVar8 = 5;
  }
  set_mode(this,lVar8);
LAB_0048e1a9:
  *unaff_FS_OFFSET = local_c;
  return this;
}

// --------------------------------------------------

// Function: `vector_deleting_destructor'
// Address: 0048e1f0
void * __thiscall
TribeAchievementsScreen::_vector_deleting_destructor_(TribeAchievementsScreen *this,uint param_1)
{
  ~TribeAchievementsScreen(this);
  if ((param_1 & 1) != 0) {
    operator_delete(this);
  }
  return this;
}

// --------------------------------------------------

// Function: ~TribeAchievementsScreen
// Address: 0048e210
// [HELPER] s_YesNoDialog: "YesNoDialog"
void __thiscall TribeAchievementsScreen::~TribeAchievementsScreen(TribeAchievementsScreen *this)
{
  TShape *this_00;
  TTextPanel **ppTVar1;
  TTextPanel *(*papTVar2) [7];
  int iVar3;
  int iVar4;
  undefined4 *unaff_FS_OFFSET;
  undefined4 uStack_c;
  code *pcStack_8;
  undefined4 local_4;
  
  pcStack_8 = FUN_0055e868;
  uStack_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &uStack_c;
  this->_padding_ = (int)&_vftable_;
  local_4 = 0;
  TPanelSystem::destroyPanel(&panel_system,&s_YesNoDialog);
  this_00 = this->win_decal;
  if (this_00 != (TShape *)0x0) {
    TShape::~TShape(this_00);
    operator_delete(this_00);
  }
  if (this->title != (TTextPanel *)0x0) {
    (**(code **)this->title->_padding_)(1);
  }
  if (this->summary_text != (TTextPanel *)0x0) {
    (**(code **)this->summary_text->_padding_)(1);
  }
  if (this->time != (TTextPanel *)0x0) {
    (**(code **)this->time->_padding_)(1);
  }
  if (this->win_loss_text != (TTextPanel *)0x0) {
    (**(code **)this->win_loss_text->_padding_)(1);
  }
  if (this->instruction != (TTextPanel *)0x0) {
    (**(code **)this->instruction->_padding_)(1);
  }
  if (this->restartButton != (TButtonPanel *)0x0) {
    (**(code **)this->restartButton->_padding_)(1);
  }
  if (this->okButton != (TButtonPanel *)0x0) {
    (**(code **)this->okButton->_padding_)(1);
  }
  if (this->backButton != (TButtonPanel *)0x0) {
    (**(code **)this->backButton->_padding_)(1);
  }
  if (this->backButton2 != (TButtonPanel *)0x0) {
    (**(code **)this->backButton2->_padding_)(1);
  }
  if (this->aftermathButton != (TButtonPanel *)0x0) {
    (**(code **)this->aftermathButton->_padding_)(1);
  }
  if (this->timelineButton != (TButtonPanel *)0x0) {
    (**(code **)this->timelineButton->_padding_)(1);
  }
  if (this->time_line != (Time_Line_Panel *)0x0) {
    (**(code **)this->time_line->_padding_)(1);
  }
  if (this->win_loss_text_bar != (TScrollBarPanel *)0x0) {
    (**(code **)this->win_loss_text_bar->_padding_)(1);
  }
  if (this->summary_text_bar != (TScrollBarPanel *)0x0) {
    (**(code **)this->summary_text_bar->_padding_)(1);
  }
  if (this->instruction_bar != (TScrollBarPanel *)0x0) {
    (**(code **)this->instruction_bar->_padding_)(1);
  }
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->close_button);
  ppTVar1 = this->title_bar;
  iVar3 = 7;
  do {
    if (*ppTVar1 != (TTextPanel *)0x0) {
      (**(code **)(*ppTVar1)->_padding_)(1);
    }
    ppTVar1 = ppTVar1 + 1;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  ppTVar1 = this->achievement_choice;
  iVar3 = 5;
  do {
    if (*ppTVar1 != (TTextPanel *)0x0) {
      (**(code **)(*ppTVar1)->_padding_)(1);
    }
    ppTVar1 = ppTVar1 + 1;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  papTVar2 = this->statistics;
  ppTVar1 = this->player_names;
  iVar3 = 8;
  do {
    if (*ppTVar1 != (TTextPanel *)0x0) {
      (**(code **)(*ppTVar1)->_padding_)(1);
    }
    iVar4 = 7;
    do {
      if ((*papTVar2)[0] != (TTextPanel *)0x0) {
        (**(code **)(*papTVar2)[0]->_padding_)(1);
      }
      papTVar2 = (TTextPanel *(*) [7])(*papTVar2 + 1);
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
    ppTVar1 = ppTVar1 + 1;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  local_4 = 0xffffffff;
  TScreenPanel::~TScreenPanel((TScreenPanel *)this);
  *unaff_FS_OFFSET = uStack_c;
  return;
}

// --------------------------------------------------

// Function: set_mode
// Address: 0048e400
// [HELPER] s_: ""
// [HELPER] s__d__: "%d%%"
void __thiscall TribeAchievementsScreen::set_mode(TribeAchievementsScreen *this,long param_1)
{
  undefined3 uVar1;
  undefined3 uVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  int unaff_ESI;
  int iVar6;
  TTextPanel **ppTVar7;
  undefined4 *puVar8;
  undefined1 *puVar9;
  undefined4 uVar10;
  long *plVar11;
  undefined4 uStack_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  long player_num;
  int local_3c;
  char temptxt [50];
  undefined1 local_5;
  
  temptxt[0x23] = '\0';
  temptxt[0x24] = '\0';
  temptxt[0x25] = '\0';
  temptxt[0x26] = '\0';
  iVar6 = rge_base_game->world->player_num + -1;
  temptxt[0x27] = '\0';
  temptxt[0x28] = '\0';
  temptxt[0x29] = '\0';
  temptxt[0x2a] = '\0';
  temptxt[0x2b] = '\0';
  temptxt[0x2c] = '\0';
  temptxt[0x2d] = '\0';
  temptxt[0x2e] = '\0';
  temptxt[0x2f] = '\0';
  stack0xfffffff8 = 0;
  uStack_50 = 0x48e43e;
  local_3c = iVar6;
  RGE_Base_Game::disable_input(rge_base_game);
  if (this->win_loss_text != (TTextPanel *)0x0) {
    uStack_50 = 0;
    uStack_54 = 0x48e450;
    (**(code **)(this->win_loss_text->_padding_ + 0x14))();
  }
  uStack_50 = 0;
  this->current_mode = param_1;
  uStack_54 = 0x48e466;
  (**(code **)(this->time_line->_padding_ + 0x14))();
  uStack_54 = 0;
  uStack_58 = 0x48e472;
  (**(code **)(this->instruction->_padding_ + 0x14))();
  uStack_58 = 1;
  (**(code **)(this->time->_padding_ + 0x14))();
  if (this->restartButton != (TButtonPanel *)0x0) {
    (**(code **)(this->restartButton->_padding_ + 0x14))();
  }
  if (this->okButton != (TButtonPanel *)0x0) {
    (**(code **)(this->okButton->_padding_ + 0x14))();
  }
  if (this->aftermathButton != (TButtonPanel *)0x0) {
    (**(code **)(this->aftermathButton->_padding_ + 0x14))();
  }
  if (this->timelineButton != (TButtonPanel *)0x0) {
    (**(code **)(this->timelineButton->_padding_ + 0x14))();
  }
  if (this->backButton != (TButtonPanel *)0x0) {
    (**(code **)(this->backButton->_padding_ + 0x14))();
  }
  if (this->backButton2 != (TButtonPanel *)0x0) {
    (**(code **)(this->backButton2->_padding_ + 0x14))();
  }
  TPanel::set_curr_child((TPanel *)this,(TPanel *)this->backButton);
  uVar1 = stack0xfffffff8;
  local_5 = (undefined1)((uint)unaff_ESI >> 0x18);
  stack0xfffffff8 = (undefined3)unaff_ESI;
  uVar2 = stack0xfffffff8;
  unique0x1000101e = uVar1;
  switch(param_1) {
  case 0:
    this->size = 7;
    TPanel::set_curr_child((TPanel *)this,(TPanel *)this->okButton);
    if (this->restartButton != (TButtonPanel *)0x0) {
      (**(code **)(this->restartButton->_padding_ + 0x14))();
    }
    if (this->okButton != (TButtonPanel *)0x0) {
      (**(code **)(this->okButton->_padding_ + 0x14))();
    }
    if (this->aftermathButton != (TButtonPanel *)0x0) {
      (**(code **)(this->aftermathButton->_padding_ + 0x14))();
    }
    if (this->timelineButton != (TButtonPanel *)0x0) {
      (**(code **)(this->timelineButton->_padding_ + 0x14))();
    }
    if (this->backButton != (TButtonPanel *)0x0) {
      (**(code **)(this->backButton->_padding_ + 0x14))();
    }
    (**(code **)(this->instruction->_padding_ + 0x14))();
    (**(code **)(this->summary_text->_padding_ + 0xe4))(0x26d9);
    (**(code **)(this->title_bar[0]->_padding_ + 0xe4))(0x26ac);
    (**(code **)(this->title_bar[1]->_padding_ + 0xe4))(0x26ad);
    (**(code **)(this->title_bar[2]->_padding_ + 0xe4))(0x26ae);
    (**(code **)(this->title_bar[3]->_padding_ + 0xe4))(0x26af);
    (**(code **)(this->title_bar[4]->_padding_ + 0xe4))(0x26d6);
    (**(code **)(this->title_bar[5]->_padding_ + 0xe4))(0x26d7);
    (**(code **)(this->title_bar[6]->_padding_ + 0xe4))(0x26b1);
    if (0 < iVar6) {
      iVar5 = 4;
      ppTVar7 = this->statistics[0] + 1;
      stack0xfffffff8 = (undefined3)iVar6;
      local_5 = (undefined1)((uint)iVar6 >> 0x18);
      do {
        plVar11 = &player_num;
        iVar6 = *(int *)((int)rge_base_game->world->players + iVar5);
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\0');
        itoa(lVar4,plVar11);
        (**(code **)((*(TTextPanel *(*) [7])(ppTVar7 + -1))[0]->_padding_ + 0xe8))();
        puVar9 = &stack0xffffffbc;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\x01');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)((*ppTVar7)->_padding_ + 0xe8))(&stack0xffffffbc);
        puVar9 = &stack0xffffffb8;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\x02');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[1]->_padding_ + 0xe8))(&stack0xffffffb8);
        puVar9 = &stack0xffffffb4;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\x03');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[2]->_padding_ + 0xe8))(&stack0xffffffb4);
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\x16');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[3]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[3]->_padding_ + 0xe4))(0xfa3);
        }
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34),'\x17');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[4]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[4]->_padding_ + 0xe4))(0xfa3);
        }
        puVar8 = &uStack_58;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points
                          (*(RGE_Victory_Conditions **)(iVar6 + 0x34));
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[5]->_padding_ + 0xe8))(&uStack_58);
        iVar5 = iVar5 + 4;
        ppTVar7 = ppTVar7 + 7;
        iVar6 = CONCAT13(local_5,stack0xfffffff8) + -1;
        stack0xfffffff8 = (undefined3)iVar6;
        local_5 = (undefined1)((uint)iVar6 >> 0x18);
      } while (iVar6 != 0);
    }
    break;
  case 1:
    this->size = 6;
    (**(code **)(this->summary_text->_padding_ + 0xe4))();
    (**(code **)(this->title_bar[0]->_padding_ + 0xe4))(0x26b6);
    (**(code **)(this->title_bar[1]->_padding_ + 0xe4))(0x26b7);
    (**(code **)(this->title_bar[2]->_padding_ + 0xe4))(0x26b9);
    (**(code **)(this->title_bar[3]->_padding_ + 0xe4))(0x26b8);
    (**(code **)(this->title_bar[4]->_padding_ + 0xe4))(0x26ba);
    (**(code **)(this->title_bar[5]->_padding_ + 0xe4))(0x26b5);
    if (0 < iVar6) {
      iVar6 = 4;
      ppTVar7 = this->statistics[0] + 1;
      unique0x10001024 = uVar2;
      do {
        plVar11 = &player_num;
        iVar5 = *(int *)((int)rge_base_game->world->players + iVar6);
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\0');
        itoa(lVar4,plVar11);
        (**(code **)((*(TTextPanel *(*) [7])(ppTVar7 + -1))[0]->_padding_ + 0xe8))();
        puVar9 = &stack0xffffffbc;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x01');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)((*ppTVar7)->_padding_ + 0xe8))(&stack0xffffffbc);
        uVar10 = __ftol(&stack0xffffffb8,10);
        itoa(uVar10);
        (**(code **)(ppTVar7[1]->_padding_ + 0xe8))(&stack0xffffffb8);
        puVar9 = &stack0xffffffb4;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x02');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[2]->_padding_ + 0xe8))(&stack0xffffffb4);
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x03');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[3]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[3]->_padding_ + 0xe4))(0xfa3);
        }
        puVar8 = &uStack_54;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\0');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[4]->_padding_ + 0xe8))(&uStack_54);
        iVar6 = iVar6 + 4;
        ppTVar7 = ppTVar7 + 7;
        iVar5 = CONCAT13(local_5,stack0xfffffff8) + -1;
        stack0xfffffff8 = (undefined3)iVar5;
        local_5 = (undefined1)((uint)iVar5 >> 0x18);
      } while (iVar5 != 0);
    }
    break;
  case 2:
    this->size = 7;
    (**(code **)(this->summary_text->_padding_ + 0xe4))();
    (**(code **)(this->title_bar[0]->_padding_ + 0xe4))(0x26be);
    (**(code **)(this->title_bar[1]->_padding_ + 0xe4))(0x26bf);
    (**(code **)(this->title_bar[2]->_padding_ + 0xe4))(0x26c0);
    (**(code **)(this->title_bar[3]->_padding_ + 0xe4))(0x26c1);
    (**(code **)(this->title_bar[4]->_padding_ + 0xe4))(0x26c2);
    (**(code **)(this->title_bar[5]->_padding_ + 0xe4))(0x26c3);
    (**(code **)(this->title_bar[6]->_padding_ + 0xe4))(0x26b5);
    if (0 < iVar6) {
      iVar6 = 4;
      ppTVar7 = this->statistics[0] + 2;
      unique0x1000102a = uVar2;
      do {
        plVar11 = &player_num;
        iVar5 = *(int *)((int)rge_base_game->world->players + iVar6);
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x04');
        itoa(lVar4,plVar11);
        (**(code **)((*(TTextPanel *(*) [7])(ppTVar7 + -2))[0]->_padding_ + 0xe8))();
        puVar9 = &stack0xffffffbc;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x05');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[-1]->_padding_ + 0xe8))(&stack0xffffffbc);
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x06');
        if (lVar4 < 1) {
          (**(code **)((*ppTVar7)->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)((*ppTVar7)->_padding_ + 0xe4))(0xfa3);
        }
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\a');
        sprintf(&stack0xffffffb4,s__d__,lVar4);
        (**(code **)(ppTVar7[1]->_padding_ + 0xe8))(&stack0xffffffb4);
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\b');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[2]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[2]->_padding_ + 0xe4))(0xfa3);
        }
        puVar8 = &uStack_54;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\t');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[3]->_padding_ + 0xe8))(&uStack_54);
        puVar8 = &uStack_58;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x01');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[4]->_padding_ + 0xe8))(&uStack_58);
        iVar6 = iVar6 + 4;
        ppTVar7 = ppTVar7 + 7;
        iVar5 = CONCAT13(local_5,stack0xfffffff8) + -1;
        stack0xfffffff8 = (undefined3)iVar5;
        local_5 = (undefined1)((uint)iVar5 >> 0x18);
      } while (iVar5 != 0);
    }
    break;
  case 3:
    this->size = 7;
    (**(code **)(this->summary_text->_padding_ + 0xe4))();
    (**(code **)(this->title_bar[0]->_padding_ + 0xe4))(0x26c6);
    (**(code **)(this->title_bar[1]->_padding_ + 0xe4))(0x26c7);
    (**(code **)(this->title_bar[2]->_padding_ + 0xe4))(0x26c8);
    (**(code **)(this->title_bar[3]->_padding_ + 0xe4))(0x26c9);
    (**(code **)(this->title_bar[4]->_padding_ + 0xe4))(0x26ca);
    (**(code **)(this->title_bar[5]->_padding_ + 0xe4))(0x26dc);
    (**(code **)(this->title_bar[6]->_padding_ + 0xe4))(0x26b5);
    if (0 < iVar6) {
      stack0xfffffff8 = 4;
      local_5 = 0;
      ppTVar7 = this->statistics[0] + 1;
      do {
        iVar5 = *(int *)((int)rge_base_game->world->players + CONCAT13(local_5,stack0xfffffff8));
        (**(code **)(this->time_line->_padding_ + 0x14))();
        puVar9 = &stack0xffffffbc;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\n');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)((*(TTextPanel *(*) [7])(ppTVar7 + -1))[0]->_padding_ + 0xe8))(&stack0xffffffbc)
        ;
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\v');
        if (lVar4 < 1) {
          (**(code **)((*ppTVar7)->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)((*ppTVar7)->_padding_ + 0xe4))(0xfa3);
        }
        puVar9 = &stack0xffffffb4;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\f');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[1]->_padding_ + 0xe8))(&stack0xffffffb4);
        puVar8 = &uStack_50;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\r');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[2]->_padding_ + 0xe8))(&uStack_50);
        puVar8 = &uStack_54;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x0e');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[3]->_padding_ + 0xe8))(&uStack_54);
        puVar8 = &uStack_58;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x10');
        lVar3 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x0f');
        itoa(lVar4 + lVar3,puVar8,uVar10);
        (**(code **)(ppTVar7[4]->_padding_ + 0xe8))(&uStack_58);
        puVar9 = &stack0xffffffa4;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x02');
        itoa(lVar4,puVar9,uVar10);
        (**(code **)(ppTVar7[5]->_padding_ + 0xe8))(&stack0xffffffa4);
        iVar5 = CONCAT13(local_5,stack0xfffffff8) + 4;
        ppTVar7 = ppTVar7 + 7;
        stack0xfffffff8 = (undefined3)iVar5;
        local_5 = (undefined1)((uint)iVar5 >> 0x18);
        iVar6 = iVar6 + -1;
      } while (iVar6 != 0);
    }
    break;
  case 4:
    this->size = 5;
    (**(code **)(this->summary_text->_padding_ + 0xe4))();
    (**(code **)(this->title_bar[0]->_padding_ + 0xe4))(0x26ce);
    (**(code **)(this->title_bar[1]->_padding_ + 0xe4))(0x26d1);
    (**(code **)(this->title_bar[2]->_padding_ + 0xe4))(0x26cf);
    (**(code **)(this->title_bar[3]->_padding_ + 0xe4))(0x26d0);
    (**(code **)(this->title_bar[4]->_padding_ + 0xe4))(0x26b5);
    if (0 < iVar6) {
      iVar6 = 4;
      ppTVar7 = this->statistics[0] + 1;
      unique0x10001033 = uVar2;
      do {
        plVar11 = &player_num;
        iVar5 = *(int *)((int)rge_base_game->world->players + iVar6);
        lVar4 = RGE_Victory_Conditions::get_attribute_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x11');
        itoa(lVar4,plVar11);
        (**(code **)((*(TTextPanel *(*) [7])(ppTVar7 + -1))[0]->_padding_ + 0xe8))();
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x12');
        if (lVar4 < 1) {
          (**(code **)((*ppTVar7)->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)((*ppTVar7)->_padding_ + 0xe4))(0xfa3);
        }
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x13');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[1]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[1]->_padding_ + 0xe4))(0xfa3);
        }
        lVar4 = RGE_Victory_Conditions::get_victory_points_id
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x14');
        if (lVar4 < 1) {
          (**(code **)(ppTVar7[2]->_padding_ + 0xe8))(s_);
        }
        else {
          (**(code **)(ppTVar7[2]->_padding_ + 0xe4))(0xfa3);
        }
        puVar8 = &uStack_50;
        uVar10 = 10;
        lVar4 = RGE_Victory_Conditions::get_victory_points_group
                          (*(RGE_Victory_Conditions **)(iVar5 + 0x34),'\x03');
        itoa(lVar4,puVar8,uVar10);
        (**(code **)(ppTVar7[3]->_padding_ + 0xe8))(&uStack_50);
        iVar6 = iVar6 + 4;
        ppTVar7 = ppTVar7 + 7;
        iVar5 = CONCAT13(local_5,stack0xfffffff8) + -1;
        stack0xfffffff8 = (undefined3)iVar5;
        local_5 = (undefined1)((uint)iVar5 >> 0x18);
      } while (iVar5 != 0);
    }
    break;
  case 5:
    this->size = 0;
    (**(code **)(this->summary_text->_padding_ + 0xe4))();
    if (this->win_loss_text != (TTextPanel *)0x0) {
      (**(code **)(this->win_loss_text->_padding_ + 0x14))(1);
    }
    (**(code **)(this->time->_padding_ + 0x14))(0);
    if (this->backButton != (TButtonPanel *)0x0) {
      (**(code **)(this->backButton->_padding_ + 0x14))();
    }
    if (this->backButton2 != (TButtonPanel *)0x0) {
      (**(code **)(this->backButton2->_padding_ + 0x14))();
      TPanel::set_curr_child((TPanel *)this,(TPanel *)this->backButton2);
    }
    break;
  case 6:
    this->size = 0;
    (**(code **)(this->time_line->_padding_ + 0x14))();
    (**(code **)(this->summary_text->_padding_ + 0xe4))(0x26d8);
    (**(code **)(this->time->_padding_ + 0x14))(1);
  }
  if (this->size == 0) {
    ppTVar7 = this->player_names;
    iVar6 = 8;
    do {
      (**(code **)((*ppTVar7)->_padding_ + 0x14))();
      ppTVar7 = ppTVar7 + 1;
      iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
  }
  else {
    iVar6 = 0;
    ppTVar7 = this->player_names;
    do {
      (**(code **)((*ppTVar7)->_padding_ + 0x14))();
      iVar6 = iVar6 + 1;
      ppTVar7 = ppTVar7 + 1;
    } while (iVar6 < 8);
  }
  iVar6 = 0;
  stack0xfffffff8 = SUB43(this->title_bar,0);
  local_5 = (undefined1)((uint)this->title_bar >> 0x18);
  do {
    (**(code **)(**(int **)CONCAT13(local_5,stack0xfffffff8) + 0x14))();
    if (0 < unaff_ESI) {
      puVar8 = (undefined4 *)(CONCAT13(local_5,stack0xfffffff8) + 0x30);
      iVar5 = unaff_ESI;
      do {
        (**(code **)(*(int *)*puVar8 + 0x14))();
        puVar8 = puVar8 + 7;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
    }
    iVar6 = iVar6 + 1;
    iVar5 = CONCAT13(local_5,stack0xfffffff8) + 4;
    stack0xfffffff8 = (undefined3)iVar5;
    local_5 = (undefined1)((uint)iVar5 >> 0x18);
  } while (iVar6 < 7);
  return;
}

// --------------------------------------------------

// Function: draw
// Address: 0048f0b0
// [HELPER] s_scr_ach__draw: "scr_ach::draw"
void __thiscall TribeAchievementsScreen::draw(TribeAchievementsScreen *this)
{
  RGE_Game_World *pRVar1;
  uchar *puVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  TTextPanel **ppTVar6;
  int iVar7;
  long lVar8;
  uchar uVar9;
  int iStack_8;
  
  TScreenPanel::draw((TScreenPanel *)this);
  if (this->current_mode < 5) {
    iVar7 = this->_padding_;
    (**(code **)(iVar7 + 0x28))(0);
    if ((this->win_decal != (TShape *)0x0) &&
       (puVar2 = TDrawArea::Lock((TDrawArea *)this->_padding_,s_scr_ach__draw,1),
       puVar2 != (uchar *)0x0)) {
      pRVar1 = rge_base_game->world;
      iVar3 = pRVar1->player_num + -1;
      if (0 < iVar3) {
        ppTVar6 = this->player_names;
        do {
          if (*(char *)(*(int *)((int)pRVar1->players + (-0x5a4 - (int)this) + (int)ppTVar6) + 0x80)
              == '\x01') {
            puVar2 = (uchar *)0x0;
            uVar9 = '\0';
            lVar8 = 0;
            lVar4 = TPanel::yPosition((TPanel *)*ppTVar6);
            lVar5 = TPanel::xPosition((TPanel *)*ppTVar6);
            TShape::shape_draw(this->win_decal,(TDrawArea *)this->_padding_,lVar5 + -0x14,lVar4,
                               lVar8,uVar9,puVar2);
          }
          ppTVar6 = ppTVar6 + 1;
          iVar3 = iVar3 + -1;
          iVar7 = iStack_8;
        } while (iVar3 != 0);
      }
      TDrawArea::Unlock((TDrawArea *)this->_padding_,s_scr_ach__draw);
    }
    (**(code **)(iVar7 + 0x2c))();
  }
  return;
}

// --------------------------------------------------

// Function: handle_mouse_down
// Address: 0048f190
long __thiscall
TribeAchievementsScreen::handle_mouse_down
          (TribeAchievementsScreen *this,uchar param_1,long param_2,long param_3,int param_4,
          int param_5)
{
  long lVar1;
  int iVar2;
  
  lVar1 = TEasy_Panel::handle_mouse_down
                    ((TEasy_Panel *)this,param_1,param_2,param_3,param_4,param_5);
  if (this->current_mode == 0) {
    iVar2 = (**(code **)(this->achievement_choice[0]->_padding_ + 0xbc))(param_2,param_3);
    if (iVar2 != 0) {
      set_mode(this,1);
      return lVar1;
    }
    iVar2 = (**(code **)(this->achievement_choice[1]->_padding_ + 0xbc))(param_2,param_3);
    if (iVar2 != 0) {
      set_mode(this,2);
      return lVar1;
    }
    iVar2 = (**(code **)(this->achievement_choice[2]->_padding_ + 0xbc))(param_2,param_3);
    if (iVar2 != 0) {
      set_mode(this,3);
      return lVar1;
    }
    iVar2 = (**(code **)(this->achievement_choice[3]->_padding_ + 0xbc))(param_2,param_3);
    if (iVar2 != 0) {
      iVar2 = (**(code **)(this->achievement_choice[4]->_padding_ + 0xbc))(param_2,param_3);
      if (iVar2 == 0) {
        set_mode(this,4);
      }
    }
  }
  return lVar1;
}

// --------------------------------------------------

// Function: action
// Address: 0048f280
// [HELPER] s_Achievements_Screen: "Achievements Screen"
// [HELPER] s_Game_Screen: "Game Screen"
// [HELPER] s_YesNoDialog: "YesNoDialog"
long __thiscall
TribeAchievementsScreen::action
          (TribeAchievementsScreen *this,TPanel *param_1,long param_2,ulong param_3,ulong param_4)
{
  byte bVar1;
  int iVar2;
  char *pcVar3;
  byte *pbVar4;
  long lVar5;
  byte *pbVar6;
  bool bVar7;
  
  if (((TButtonPanel *)param_1 == this->okButton) && (param_2 == 1)) {
    if (this->end_game_flag == 0) {
      iVar2 = RGE_Base_Game::singlePlayerGame(rge_base_game);
      if ((iVar2 == 1) && (rge_base_game->save_paused == 0)) {
        RGE_Base_Game::set_paused(rge_base_game,0,0);
      }
      TPanelSystem::setCurrentPanel(&panel_system,s_Game_Screen,0);
    }
    else {
      TRIBE_Game::quit_game((TRIBE_Game *)rge_base_game);
    }
    TPanelSystem::destroyPanel(&panel_system,s_Achievements_Screen);
    return 1;
  }
  if (((TButtonPanel *)param_1 == this->restartButton) && (param_2 == 1)) {
    TRIBE_Game::restart_game((TRIBE_Game *)rge_base_game);
    return 1;
  }
  if (((TButtonPanel *)param_1 == this->timelineButton) && (param_2 == 1)) {
    set_mode(this,6);
    if (this->restartButton != (TButtonPanel *)0x0) {
      (**(code **)(this->restartButton->_padding_ + 0x14))(0);
    }
    if (this->okButton != (TButtonPanel *)0x0) {
      (**(code **)(this->okButton->_padding_ + 0x14))(0);
    }
    if (this->aftermathButton != (TButtonPanel *)0x0) {
      (**(code **)(this->aftermathButton->_padding_ + 0x14))(0);
    }
    if (this->timelineButton != (TButtonPanel *)0x0) {
      (**(code **)(this->timelineButton->_padding_ + 0x14))(0);
    }
    if (this->backButton != (TButtonPanel *)0x0) {
      (**(code **)(this->backButton->_padding_ + 0x14))(1);
      return 1;
    }
  }
  else {
    if (((TButtonPanel *)param_1 != this->aftermathButton) || (param_2 != 1)) {
      if ((((TButtonPanel *)param_1 == this->backButton) ||
          ((TButtonPanel *)param_1 == this->backButton2)) && (param_2 == 1)) {
        set_mode(this,0);
        return 1;
      }
      if (((TButtonPanel *)param_1 == this->close_button) && (param_2 == 1)) {
        RGE_Base_Game::close(rge_base_game);
        return 1;
      }
      pcVar3 = TPanel::panelName(param_1);
      if (pcVar3 != (char *)0x0) {
        pbVar6 = &s_YesNoDialog;
        pbVar4 = (byte *)TPanel::panelName(param_1);
        do {
          bVar1 = *pbVar4;
          bVar7 = bVar1 < *pbVar6;
          if (bVar1 != *pbVar6) {
LAB_0048f49b:
            iVar2 = (1 - (uint)bVar7) - (uint)(bVar7 != 0);
            goto LAB_0048f4a0;
          }
          if (bVar1 == 0) break;
          bVar1 = pbVar4[1];
          bVar7 = bVar1 < pbVar6[1];
          if (bVar1 != pbVar6[1]) goto LAB_0048f49b;
          pbVar4 = pbVar4 + 2;
          pbVar6 = pbVar6 + 2;
        } while (bVar1 != 0);
        iVar2 = 0;
LAB_0048f4a0:
        if (iVar2 == 0) {
          TPanelSystem::destroyPanel(&panel_system,&s_YesNoDialog);
          if (param_2 != 0) {
            confirmed_close = 0;
            return 1;
          }
          RGE_Base_Game::close(rge_base_game);
          return 1;
        }
      }
      lVar5 = TEasy_Panel::action((TEasy_Panel *)this,param_1,param_2,param_3,param_4);
      return lVar5;
    }
    set_mode(this,5);
    if (this->restartButton != (TButtonPanel *)0x0) {
      (**(code **)(this->restartButton->_padding_ + 0x14))(0);
    }
    if (this->okButton != (TButtonPanel *)0x0) {
      (**(code **)(this->okButton->_padding_ + 0x14))(0);
    }
    if (this->aftermathButton != (TButtonPanel *)0x0) {
      (**(code **)(this->aftermathButton->_padding_ + 0x14))(0);
    }
    if (this->timelineButton != (TButtonPanel *)0x0) {
      (**(code **)(this->timelineButton->_padding_ + 0x14))(0);
    }
    if (this->backButton != (TButtonPanel *)0x0) {
      (**(code **)(this->backButton->_padding_ + 0x14))(1);
      return 1;
    }
  }
  return 1;
}

// --------------------------------------------------

// Function: handle_idle
// Address: 0048f500
long __thiscall TribeAchievementsScreen::handle_idle(TribeAchievementsScreen *this)
{
  long lVar1;
  
  if (rge_base_game->input_enabled == 0) {
    RGE_Base_Game::enable_input(rge_base_game);
  }
  lVar1 = TPanel::handle_idle((TPanel *)this);
  return lVar1;
}

// --------------------------------------------------

// Function: wnd_proc
// Address: 0048f530
long __thiscall
TribeAchievementsScreen::wnd_proc
          (TribeAchievementsScreen *this,void *param_1,uint param_2,uint param_3,long param_4)
{
  char *pcVar1;
  char *pcVar2;
  long lVar3;
  int iVar4;
  int iVar5;
  
  if ((param_2 == 0x10) && (confirmed_close == 0)) {
    confirmed_close = 1;
    iVar4 = rge_base_game->prog_mode;
    if ((iVar4 == 5) || (((iVar4 == 4 || (iVar4 == 6)) || (iVar4 == 7)))) {
      pcVar1 = (char *)IsIconic(*(undefined4 *)(this->_padding_ + 4));
      if (pcVar1 == (char *)0x0) {
        iVar5 = 100;
        iVar4 = 0x1c2;
        pcVar2 = TPanel::get_string((TPanel *)this,0xc1d);
        TEasy_Panel::popupYesNoDialog((TEasy_Panel *)this,pcVar2,pcVar1,iVar4,iVar5);
        return 1;
      }
    }
  }
  lVar3 = TPanel::wnd_proc((TPanel *)this,param_1,param_2,param_3,param_4);
  return lVar3;
}

// --------------------------------------------------

