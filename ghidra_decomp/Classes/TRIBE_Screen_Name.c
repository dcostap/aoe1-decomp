// Class: TRIBE_Screen_Name
// Size:  0x4A0
//
// VTable Layout:
// [00] `vector_deleting_destructor'
// [01] setup
// [02] set_rect
// [03] set_rect
// [04] set_color
// [05] set_active
// [06] set_positioning
// [07] set_fixed_position
// [08] set_redraw
// [09] set_overlapped_redraw
// [10] draw_setup
// [11] draw_finish
// [12] draw
// [13] draw_rect
// [14] draw_offset
// [15] draw_rect2
// [16] draw_offset2
// [17] paint
// [18] wnd_proc
// [19] handle_idle
// [20] handle_size
// [21] handle_paint
// [22] handle_key_down
// [23] handle_char
// [24] handle_command
// [25] handle_user_command
// [26] handle_timer_command
// [27] handle_scroll
// [28] handle_mouse_down
// [29] handle_mouse_move
// [30] handle_mouse_up
// [31] handle_mouse_dbl_click
// [32] mouse_move_action
// [33] mouse_left_down_action
// [34] mouse_left_hold_action
// [35] mouse_left_move_action
// [36] mouse_left_up_action
// [37] mouse_left_dbl_click_action
// [38] mouse_right_down_action
// [39] mouse_right_hold_action
// [40] mouse_right_move_action
// [41] mouse_right_up_action
// [42] mouse_right_dbl_click_action
// [43] key_down_action
// [44] char_action
// [45] action
// [46] get_true_render_rect
// [47] is_inside
// [48] set_focus
// [49] set_tab_order
// [50] set_tab_order
// [51] get_help_info
// [52] stop_sound_system
// [53] restart_sound_system
// [54] take_snapshot
// [55] handle_reactivate
// [56] draw_background
// [57] set_ideal_size
// [58] create_button
// [59] create_button
// [60] create_check_box
// [61] create_radio_button
// [62] create_text
// [63] create_text
// [64] create_text
// [65] create_input
// [66] create_edit
// [67] create_drop_down
// [68] create_list
// [69] create_scrollbar
// [70] create_auto_scrollbar
// [71] create_vert_slider
// [72] create_horz_slider
// [73] position_panel
// [74] `scalar_deleting_destructor'
// [75] setup
// [76] set_rect
// [77] set_rect
// [78] set_color
// [79] set_active
// [80] set_positioning
// [81] set_fixed_position
// [82] set_redraw
// [83] set_overlapped_redraw
// [84] draw_setup
// [85] draw_finish
// [86] draw
// [87] draw_rect
// [88] draw_offset
// [89] draw_rect2
// [90] draw_offset2
// [91] paint
// [92] wnd_proc
// [93] handle_idle
// [94] handle_size
// [95] handle_paint
// [96] handle_key_down
// [97] handle_char
// [98] handle_command
// [99] handle_user_command
// [100] handle_timer_command
// [101] handle_scroll
// [102] handle_mouse_down
// [103] handle_mouse_move
// [104] handle_mouse_up
// [105] handle_mouse_dbl_click
// [106] mouse_move_action
// [107] mouse_left_down_action
// [108] mouse_left_hold_action
// [109] mouse_left_move_action
// [110] mouse_left_up_action
// [111] mouse_left_dbl_click_action
// [112] mouse_right_down_action
// [113] mouse_right_hold_action
// [114] mouse_right_move_action
// [115] mouse_right_up_action
// [116] mouse_right_dbl_click_action
// [117] key_down_action
// [118] char_action
// [119] action
// [120] get_true_render_rect
// [121] is_inside
// [122] set_focus
// [123] set_tab_order
// [124] set_tab_order
// [125] get_help_info
// [126] stop_sound_system
// [127] restart_sound_system
// [128] take_snapshot
// [129] handle_reactivate
// [130] draw_background
// [131] set_ideal_size
// [132] create_button
// [133] create_button
// [134] create_check_box
// [135] create_radio_button
// [136] create_text
// [137] create_text
// [138] create_text
// [139] create_input
// [140] create_edit
// [141] create_drop_down
// [142] create_list
// [143] create_scrollbar
// [144] create_auto_scrollbar
// [145] create_vert_slider
// [146] create_horz_slider
// [147] position_panel
// [148] setup
// [149] setup
// [150] `vector_deleting_destructor'
// [151] setup
// [152] set_rect
// [153] set_rect
// [154] set_color
// [155] set_active
// [156] set_positioning
// [157] set_fixed_position
// [158] set_redraw
// [159] set_overlapped_redraw
// [160] draw_setup
// [161] draw_finish
// [162] draw
// [163] draw_rect
// [164] draw_offset
// [165] draw_rect2
// [166] draw_offset2
// [167] paint
// [168] wnd_proc
// [169] handle_idle
// [170] handle_size
// [171] handle_paint
// [172] handle_key_down
// [173] handle_char
// [174] handle_command
// [175] handle_user_command
// [176] handle_timer_command
// [177] handle_scroll
// [178] handle_mouse_down
// [179] handle_mouse_move
// [180] handle_mouse_up
// [181] handle_mouse_dbl_click
// [182] mouse_move_action
// [183] mouse_left_down_action
// [184] mouse_left_hold_action
// [185] mouse_left_move_action
// [186] mouse_left_up_action
// [187] mouse_left_dbl_click_action
// [188] mouse_right_down_action
// [189] mouse_right_hold_action
// [190] mouse_right_move_action
// [191] mouse_right_up_action
// [192] mouse_right_dbl_click_action
// [193] key_down_action
// [194] char_action
// [195] action
// [196] get_true_render_rect
// [197] is_inside
// [198] set_focus
// [199] set_tab_order
// [200] set_tab_order
// [201] get_help_info
// [202] stop_sound_system
// [203] restart_sound_system
// [204] take_snapshot
// [205] handle_reactivate
// [206] draw_background
// [207] set_ideal_size
// [208] create_button
// [209] create_button
// [210] create_check_box
// [211] create_radio_button
// [212] create_text
// [213] create_text
// [214] create_text
// [215] create_input
// [216] create_edit
// [217] create_drop_down
// [218] create_list
// [219] create_scrollbar
// [220] create_auto_scrollbar
// [221] create_vert_slider
// [222] create_horz_slider
// [223] position_panel
// [224] `vector_deleting_destructor'
// [225] setup
// [226] set_rect
// [227] set_rect
// [228] set_color
// [229] set_active
// [230] set_positioning
// [231] set_fixed_position
// [232] set_redraw
// [233] set_overlapped_redraw
// [234] draw_setup
// [235] draw_finish
// [236] draw
// [237] draw_rect
// [238] draw_offset
// [239] draw_rect2
// [240] draw_offset2
// [241] paint
// [242] wnd_proc
// [243] handle_idle
// [244] handle_size
// [245] handle_paint
// [246] handle_key_down
// [247] handle_char
// [248] handle_command
// [249] handle_user_command
// [250] handle_timer_command
// [251] handle_scroll
// [252] handle_mouse_down
// [253] handle_mouse_move
// [254] handle_mouse_up
// [255] handle_mouse_dbl_click
// [256] mouse_move_action
// [257] mouse_left_down_action
// [258] mouse_left_hold_action
// [259] mouse_left_move_action
// [260] mouse_left_up_action
// [261] mouse_left_dbl_click_action
// [262] mouse_right_down_action
// [263] mouse_right_hold_action
// [264] mouse_right_move_action
// [265] mouse_right_up_action
// [266] mouse_right_dbl_click_action
// [267] key_down_action
// [268] char_action
// [269] action
// [270] get_true_render_rect
// [271] is_inside
// [272] set_focus
// [273] set_tab_order
// [274] set_tab_order
// [275] get_help_info
// [276] stop_sound_system
// [277] restart_sound_system
// [278] take_snapshot
// [279] handle_reactivate
// [280] draw_background
// [281] set_ideal_size
// [282] create_button
// [283] create_button
// [284] create_check_box
// [285] create_radio_button
// [286] create_text
// [287] create_text
// [288] create_text
// [289] create_input
// [290] create_edit
// [291] create_drop_down
// [292] create_list
// [293] create_scrollbar
// [294] create_auto_scrollbar
// [295] create_vert_slider
// [296] create_horz_slider
// [297] position_panel
//
// Member Layout:
// [0x478] TTextPanel * title
// [0x47C] TTextPanel * name_text
// [0x480] TListPanel * name_list
// [0x484] TScrollBarPanel * name_scrollbar
// [0x488] TButtonPanel * new_button
// [0x48C] TButtonPanel * remove_button
// [0x490] TButtonPanel * ok_button
// [0x494] TButtonPanel * cancel_button
// [0x498] TButtonPanel * close_button
// [0x49C] int started_input
// ----------------------------------------------------------------

// Function: TRIBE_Screen_Name
// Address: 004a63d0
// [HELPER] s_Name_Selection_Screen: "Name Selection Screen"
// [HELPER] s_scr2: "scr2"
TRIBE_Screen_Name * __thiscall TRIBE_Screen_Name::TRIBE_Screen_Name(TRIBE_Screen_Name *this)
{
  TButtonPanel **ppTVar1;
  TButtonPanel *pTVar2;
  long lVar3;
  int iVar4;
  undefined4 *unaff_FS_OFFSET;
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055f2d8;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  TScreenPanel::TScreenPanel((TScreenPanel *)this,s_Name_Selection_Screen);
  local_4 = 0;
  this->_padding_ = (int)&_vftable_;
  init_vars(this);
  lVar3 = TEasy_Panel::setup((TEasy_Panel *)this,rge_base_game->draw_area,(TPanel *)0x0,&s_scr2,
                             0xc384,1,0,0,0,0,1);
  if (lVar3 == 0) {
    this->_padding_ = 1;
    *unaff_FS_OFFSET = local_c;
    return this;
  }
  TEasy_Panel::setup_shadow_area((TEasy_Panel *)this,0);
  TEasy_Panel::set_ideal_size((TEasy_Panel *)this,0x280,0x1e0);
  iVar4 = TEasy_Panel::create_text
                    ((TEasy_Panel *)this,(TPanel *)this,&this->title,0x29fe,0x14,0x14,600,0x1e,1,1,0
                     ,0);
  if (iVar4 != 0) {
    iVar4 = TEasy_Panel::create_text
                      ((TEasy_Panel *)this,(TPanel *)this,&this->name_text,0x29ff,0x3c,0x50,0x8c,
                       0x14,4,0,0,0);
    if (iVar4 != 0) {
      iVar4 = TEasy_Panel::create_list
                        ((TEasy_Panel *)this,(TPanel *)this,&this->name_list,0x3c,100,0x14a,300,0xb)
      ;
      if (iVar4 != 0) {
        iVar4 = TEasy_Panel::create_auto_scrollbar
                          ((TEasy_Panel *)this,&this->name_scrollbar,(TTextPanel *)this->name_list,
                           0x14);
        if (iVar4 != 0) {
          TPanel::set_help_info((TPanel *)this->name_scrollbar,0x765c,-1);
          iVar4 = TEasy_Panel::create_button
                            ((TEasy_Panel *)this,(TPanel *)this,&this->new_button,0x2a00,0,400,100,
                             0xb4,0x1e,0,0,0);
          if (iVar4 != 0) {
            TPanel::set_help_info((TPanel *)this->new_button,0x765d,-1);
            iVar4 = TEasy_Panel::create_button
                              ((TEasy_Panel *)this,(TPanel *)this,&this->remove_button,0x2a01,0,400,
                               0x8c,0xb4,0x1e,0,0,0);
            if (iVar4 != 0) {
              TPanel::set_help_info((TPanel *)this->remove_button,0x765e,-1);
              iVar4 = TEasy_Panel::create_button
                                ((TEasy_Panel *)this,(TPanel *)this,&this->ok_button,0xfa1,0,0x46,
                                 0x1b8,0xf0,0x1e,0,0,0);
              if (iVar4 != 0) {
                TPanel::set_help_info((TPanel *)this->ok_button,0x7531,-1);
                ppTVar1 = &this->cancel_button;
                iVar4 = TEasy_Panel::create_button
                                  ((TEasy_Panel *)this,(TPanel *)this,ppTVar1,0xfa2,0,0x14a,0x1b8,
                                   0xf0,0x1e,0,0,0);
                if (iVar4 != 0) {
                  TPanel::set_help_info((TPanel *)*ppTVar1,0x7532,-1);
                  pTVar2 = *ppTVar1;
                  pTVar2->hotkey = 0x1b;
                  pTVar2->hotkey_shift = 0;
                  iVar4 = TEasy_Panel::create_button
                                    ((TEasy_Panel *)this,(TPanel *)this,&this->close_button,0x3ea,0,
                                     0,0,0,0,-1,-1,0);
                  if (iVar4 != 0) {
                    (**(code **)(this->close_button->_padding_ + 0x18))
                              (9,4,4,4,4,0x11,0x11,0x11,0x11,0,0,0,0);
                    setup_tab_order(this);
                    get_player_names(this);
                    this->started_input = 0;
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  *unaff_FS_OFFSET = local_c;
  return this;
}

// --------------------------------------------------

// Function: `vector_deleting_destructor'
// Address: 004a66c0
void * __thiscall
TRIBE_Screen_Name::_vector_deleting_destructor_(TRIBE_Screen_Name *this,uint param_1)
{
  ~TRIBE_Screen_Name(this);
  if ((param_1 & 1) != 0) {
    operator_delete(this);
  }
  return this;
}

// --------------------------------------------------

// Function: ~TRIBE_Screen_Name
// Address: 004a66e0
// [HELPER] s_New_Name_Dialog: "New Name Dialog"
void __thiscall TRIBE_Screen_Name::~TRIBE_Screen_Name(TRIBE_Screen_Name *this)
{
  undefined4 *unaff_FS_OFFSET;
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  pcStack_8 = FUN_0055f2f8;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  this->_padding_ = (int)&_vftable_;
  local_4 = 0;
  TPanelSystem::setCurrentPanel(&panel_system,&s_New_Name_Dialog,0);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->title);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->name_text);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->name_list);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->name_scrollbar);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->new_button);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->remove_button);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->ok_button);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->cancel_button);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->close_button);
  local_4 = 0xffffffff;
  TScreenPanel::~TScreenPanel((TScreenPanel *)this);
  *unaff_FS_OFFSET = local_c;
  return;
}

// --------------------------------------------------

// Function: init_vars
// Address: 004a67c0
void __thiscall TRIBE_Screen_Name::init_vars(TRIBE_Screen_Name *this)
{
  this->title = (TTextPanel *)0x0;
  this->name_text = (TTextPanel *)0x0;
  this->name_list = (TListPanel *)0x0;
  this->name_scrollbar = (TScrollBarPanel *)0x0;
  this->new_button = (TButtonPanel *)0x0;
  this->remove_button = (TButtonPanel *)0x0;
  this->ok_button = (TButtonPanel *)0x0;
  this->cancel_button = (TButtonPanel *)0x0;
  this->close_button = (TButtonPanel *)0x0;
  return;
}

// --------------------------------------------------

// Function: get_player_names
// Address: 004a6800
void __thiscall TRIBE_Screen_Name::get_player_names(TRIBE_Screen_Name *this)
{
  long lVar1;
  long lVar2;
  int iVar3;
  char **players;
  long curr_player;
  long local_4;
  
  TTextPanel::empty_list((TTextPanel *)this->name_list);
  curr_player = 0;
  lVar1 = RGE_Game_Info::get_people_list
                    (rge_base_game->player_game_info,(char ***)&curr_player,&local_4);
  if (lVar1 != 0) {
    iVar3 = 0;
    this->name_list->_padding_ = 1;
    if (0 < lVar1) {
      do {
        TTextPanel::append_line
                  ((TTextPanel *)this->name_list,*(char **)(curr_player + iVar3 * 4),iVar3);
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    lVar2 = TTextPanel::get_line((TTextPanel *)this->name_list,local_4);
    TTextPanel::set_line((TTextPanel *)this->name_list,lVar2);
    iVar3 = 0;
    if (0 < lVar1) {
      do {
        free(*(undefined4 *)(curr_player + iVar3 * 4));
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    free(curr_player);
  }
  return;
}

// --------------------------------------------------

// Function: setup_tab_order
// Address: 004a68c0
void __thiscall TRIBE_Screen_Name::setup_tab_order(TRIBE_Screen_Name *this)
{
  int iVar1;
  int iVar2;
  uint uVar3;
  TPanel *tab_list [5];
  
  iVar2 = TTextPanel::numberLines((TTextPanel *)this->name_list);
  uVar3 = (uint)(iVar2 == 0);
  TButtonPanel::set_disabled(this->remove_button,uVar3);
  TButtonPanel::set_disabled(this->ok_button,uVar3);
  tab_list[1] = (TPanel *)this->name_list;
  tab_list[2] = (TPanel *)this->new_button;
  iVar2 = 2;
  if (uVar3 == 0) {
    tab_list[4] = (TPanel *)this->ok_button;
    tab_list[3] = (TPanel *)this->remove_button;
    iVar2 = 4;
  }
  iVar1 = this->_padding_;
  tab_list[iVar2 + 1] = (TPanel *)this->cancel_button;
  (**(code **)(iVar1 + 200))(tab_list + 1,iVar2 + 1);
  iVar2 = TTextPanel::numberLines((TTextPanel *)this->name_list);
  if (iVar2 == 0) {
    TPanel::set_curr_child((TPanel *)this,(TPanel *)this->new_button);
    return;
  }
  TPanel::set_curr_child((TPanel *)this,(TPanel *)this->name_list);
  return;
}

// --------------------------------------------------

// Function: handle_idle
// Address: 004a6980
long __thiscall TRIBE_Screen_Name::handle_idle(TRIBE_Screen_Name *this)
{
  long lVar1;
  
  if (rge_base_game->input_enabled == 0) {
    RGE_Base_Game::enable_input(rge_base_game);
  }
  lVar1 = TPanel::handle_idle((TPanel *)this);
  return lVar1;
}

// --------------------------------------------------

// Function: action
// Address: 004a69b0
// [HELPER] s_Campaign_Selection_Screen: "Campaign Selection Screen"
// [HELPER] s_Name_Selection_Screen: "Name Selection Screen"
// [HELPER] s_New_Name_Dialog: "New Name Dialog"
// [HELPER] s_Single_Player_Menu: "Single Player Menu"
// [HELPER] s_YesNoDialog: "YesNoDialog"
long __thiscall
TRIBE_Screen_Name::action
          (TRIBE_Screen_Name *this,TPanel *param_1,long param_2,ulong param_3,ulong param_4)
{
  byte bVar1;
  RGE_Game_Info *pRVar2;
  long lVar3;
  char *pcVar4;
  char *pcVar5;
  byte *pbVar6;
  int iVar7;
  byte *pbVar8;
  undefined4 *unaff_FS_OFFSET;
  bool bVar9;
  char str [256];
  undefined4 local_c;
  code *pcStack_8;
  long local_4;
  
  local_c = *unaff_FS_OFFSET;
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055f33a;
  *unaff_FS_OFFSET = &local_c;
  if (param_1 == (TPanel *)0x0) goto LAB_004a6d0e;
  if (((TButtonPanel *)param_1 == this->ok_button) && (param_2 == 1)) {
    lVar3 = TTextPanel::get_line((TTextPanel *)this->name_list);
    if (lVar3 != -1) {
      RGE_Base_Game::disable_input(rge_base_game);
      pRVar2 = rge_base_game->player_game_info;
      lVar3 = TTextPanel::get_id((TTextPanel *)this->name_list);
      RGE_Game_Info::set_current_person(pRVar2,lVar3);
      str._0_4_ = operator_new(0x4cc);
      local_4 = 0;
      if ((TRIBE_Screen_Campaign_Selection *)str._0_4_ != (TRIBE_Screen_Campaign_Selection *)0x0) {
        TRIBE_Screen_Campaign_Selection::TRIBE_Screen_Campaign_Selection
                  ((TRIBE_Screen_Campaign_Selection *)str._0_4_);
      }
      local_4 = 0xffffffff;
      TPanelSystem::setCurrentPanel(&panel_system,s_Campaign_Selection_Screen,0);
      TPanelSystem::destroyPanel(&panel_system,s_Name_Selection_Screen);
      param_2 = 1;
    }
    goto LAB_004a6d27;
  }
  if (((TButtonPanel *)param_1 == this->cancel_button) && (param_2 == 1)) {
    RGE_Base_Game::disable_input(rge_base_game);
    str._0_4_ = operator_new(0x49c);
    local_4 = param_2;
    if ((TribeSPMenuScreen *)str._0_4_ != (TribeSPMenuScreen *)0x0) {
      TribeSPMenuScreen::TribeSPMenuScreen((TribeSPMenuScreen *)str._0_4_);
    }
    local_4 = 0xffffffff;
    TPanelSystem::setCurrentPanel(&panel_system,s_Single_Player_Menu,0);
    TPanelSystem::destroyPanel(&panel_system,s_Name_Selection_Screen);
    param_2 = 1;
    goto LAB_004a6d27;
  }
  if ((TButtonPanel *)param_1 == this->close_button) {
    RGE_Base_Game::close(rge_base_game);
    param_2 = 1;
    goto LAB_004a6d27;
  }
  if (((TListPanel *)param_1 == this->name_list) && (param_2 == 3)) {
    (**(code **)(this->_padding_ + 0xb4))(this->ok_button,1,0,0);
    param_2 = 1;
    goto LAB_004a6d27;
  }
  if (((TButtonPanel *)param_1 == this->new_button) && (param_2 == 1)) {
    str._0_4_ = operator_new(0x4a4);
    local_4 = 2;
    if ((TRIBE_Dialog_Name *)str._0_4_ != (TRIBE_Dialog_Name *)0x0) {
      TRIBE_Dialog_Name::TRIBE_Dialog_Name((TRIBE_Dialog_Name *)str._0_4_,(TScreenPanel *)this);
    }
    local_4 = 0xffffffff;
    TPanelSystem::setCurrentPanel(&panel_system,&s_New_Name_Dialog,0);
    param_2 = 1;
    goto LAB_004a6d27;
  }
  if (((TButtonPanel *)param_1 == this->remove_button) && (param_2 == 1)) {
    lVar3 = TTextPanel::get_line((TTextPanel *)this->name_list);
    if (lVar3 != -1) {
      pcVar4 = TTextPanel::get_text((TTextPanel *)this->name_list);
      pcVar5 = TPanel::get_string((TPanel *)this,0x2a02);
      sprintf(str + 4,pcVar5,pcVar4);
      TEasy_Panel::popupYesNoDialog((TEasy_Panel *)this,str + 4,(char *)0x0,0x1c2,100);
      goto LAB_004a6d27;
    }
  }
  else {
    pcVar4 = TPanel::panelName(param_1);
    if (pcVar4 == (char *)0x0) {
LAB_004a6c71:
      pcVar4 = TPanel::panelName(param_1);
      if (pcVar4 != (char *)0x0) {
        pbVar8 = &s_YesNoDialog;
        pbVar6 = (byte *)TPanel::panelName(param_1);
        do {
          bVar1 = *pbVar6;
          bVar9 = bVar1 < *pbVar8;
          if (bVar1 != *pbVar8) {
LAB_004a6cb0:
            iVar7 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
            goto LAB_004a6cb5;
          }
          if (bVar1 == 0) break;
          bVar1 = pbVar6[1];
          bVar9 = bVar1 < pbVar8[1];
          if (bVar1 != pbVar8[1]) goto LAB_004a6cb0;
          pbVar6 = pbVar6 + 2;
          pbVar8 = pbVar8 + 2;
        } while (bVar1 != 0);
        iVar7 = 0;
LAB_004a6cb5:
        if (iVar7 == 0) {
          if ((param_2 == 0) &&
             (lVar3 = TTextPanel::get_line((TTextPanel *)this->name_list), lVar3 != -1)) {
            pRVar2 = rge_base_game->player_game_info;
            lVar3 = TTextPanel::get_id((TTextPanel *)this->name_list,lVar3);
            RGE_Game_Info::remove_player(pRVar2,lVar3);
            get_player_names(this);
          }
          pcVar4 = &s_YesNoDialog;
          goto LAB_004a6cf6;
        }
      }
LAB_004a6d0e:
      param_2 = TEasy_Panel::action((TEasy_Panel *)this,param_1,param_2,param_3,param_4);
      goto LAB_004a6d27;
    }
    pbVar8 = &s_New_Name_Dialog;
    pbVar6 = (byte *)TPanel::panelName(param_1);
    do {
      bVar1 = *pbVar6;
      bVar9 = bVar1 < *pbVar8;
      if (bVar1 != *pbVar8) {
LAB_004a6c41:
        iVar7 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
        goto LAB_004a6c46;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar6[1];
      bVar9 = bVar1 < pbVar8[1];
      if (bVar1 != pbVar8[1]) goto LAB_004a6c41;
      pbVar6 = pbVar6 + 2;
      pbVar8 = pbVar8 + 2;
    } while (bVar1 != 0);
    iVar7 = 0;
LAB_004a6c46:
    if (iVar7 != 0) goto LAB_004a6c71;
    if (param_2 == 1) {
      get_player_names(this);
    }
    TPanelSystem::setCurrentPanel(&panel_system,s_Name_Selection_Screen,0);
    pcVar4 = &s_New_Name_Dialog;
LAB_004a6cf6:
    TPanelSystem::destroyPanel(&panel_system,pcVar4);
    setup_tab_order(this);
  }
  param_2 = 1;
LAB_004a6d27:
  *unaff_FS_OFFSET = local_c;
  return param_2;
}

// --------------------------------------------------

