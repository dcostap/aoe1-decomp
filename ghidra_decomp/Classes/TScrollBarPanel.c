// Class: TScrollBarPanel
// Size:  0x1C4
//
// VTable Layout:
// [00] `scalar_deleting_destructor'
// [01] setup
// [02] set_rect
// [03] set_rect
// [04] set_color
// [05] set_active
// [06] set_positioning
// [07] set_fixed_position
// [08] set_redraw
// [09] set_overlapped_redraw
// [10] draw_setup
// [11] draw_finish
// [12] draw
// [13] draw_rect
// [14] draw_offset
// [15] draw_rect2
// [16] draw_offset2
// [17] paint
// [18] wnd_proc
// [19] handle_idle
// [20] handle_size
// [21] handle_paint
// [22] handle_key_down
// [23] handle_char
// [24] handle_command
// [25] handle_user_command
// [26] handle_timer_command
// [27] handle_scroll
// [28] handle_mouse_down
// [29] handle_mouse_move
// [30] handle_mouse_up
// [31] handle_mouse_dbl_click
// [32] mouse_move_action
// [33] mouse_left_down_action
// [34] mouse_left_hold_action
// [35] mouse_left_move_action
// [36] mouse_left_up_action
// [37] mouse_left_dbl_click_action
// [38] mouse_right_down_action
// [39] mouse_right_hold_action
// [40] mouse_right_move_action
// [41] mouse_right_up_action
// [42] mouse_right_dbl_click_action
// [43] key_down_action
// [44] char_action
// [45] action
// [46] get_true_render_rect
// [47] is_inside
// [48] set_focus
// [49] set_tab_order
// [50] set_tab_order
// [51] get_help_info
// [52] stop_sound_system
// [53] restart_sound_system
// [54] take_snapshot
// [55] handle_reactivate
// [56] `vector_deleting_destructor'
// [57] setup
// [58] set_rect
// [59] set_rect
// [60] set_color
// [61] set_active
// [62] set_positioning
// [63] set_fixed_position
// [64] set_redraw
// [65] set_overlapped_redraw
// [66] draw_setup
// [67] draw_finish
// [68] draw
// [69] draw_rect
// [70] draw_offset
// [71] draw_rect2
// [72] draw_offset2
// [73] paint
// [74] wnd_proc
// [75] handle_idle
// [76] handle_size
// [77] handle_paint
// [78] handle_key_down
// [79] handle_char
// [80] handle_command
// [81] handle_user_command
// [82] handle_timer_command
// [83] handle_scroll
// [84] handle_mouse_down
// [85] handle_mouse_move
// [86] handle_mouse_up
// [87] handle_mouse_dbl_click
// [88] mouse_move_action
// [89] mouse_left_down_action
// [90] mouse_left_hold_action
// [91] mouse_left_move_action
// [92] mouse_left_up_action
// [93] mouse_left_dbl_click_action
// [94] mouse_right_down_action
// [95] mouse_right_hold_action
// [96] mouse_right_move_action
// [97] mouse_right_up_action
// [98] mouse_right_dbl_click_action
// [99] key_down_action
// [100] char_action
// [101] action
// [102] get_true_render_rect
// [103] is_inside
// [104] set_focus
// [105] set_tab_order
// [106] set_tab_order
// [107] get_help_info
// [108] stop_sound_system
// [109] restart_sound_system
// [110] take_snapshot
// [111] handle_reactivate
// [112] draw_background
// [113] set_ideal_size
// [114] create_button
// [115] create_button
// [116] create_check_box
// [117] create_radio_button
// [118] create_text
// [119] create_text
// [120] create_text
// [121] create_input
// [122] create_edit
// [123] create_drop_down
// [124] create_list
// [125] create_scrollbar
// [126] create_auto_scrollbar
// [127] create_vert_slider
// [128] create_horz_slider
// [129] position_panel
// [130] `scalar_deleting_destructor'
// [131] setup
// [132] set_rect
// [133] set_rect
// [134] set_color
// [135] set_active
// [136] set_positioning
// [137] set_fixed_position
// [138] set_redraw
// [139] set_overlapped_redraw
// [140] draw_setup
// [141] draw_finish
// [142] draw
// [143] draw_rect
// [144] draw_offset
// [145] draw_rect2
// [146] draw_offset2
// [147] paint
// [148] wnd_proc
// [149] handle_idle
// [150] handle_size
// [151] handle_paint
// [152] handle_key_down
// [153] handle_char
// [154] handle_command
// [155] handle_user_command
// [156] handle_timer_command
// [157] handle_scroll
// [158] handle_mouse_down
// [159] handle_mouse_move
// [160] handle_mouse_up
// [161] handle_mouse_dbl_click
// [162] mouse_move_action
// [163] mouse_left_down_action
// [164] mouse_left_hold_action
// [165] mouse_left_move_action
// [166] mouse_left_up_action
// [167] mouse_left_dbl_click_action
// [168] mouse_right_down_action
// [169] mouse_right_hold_action
// [170] mouse_right_move_action
// [171] mouse_right_up_action
// [172] mouse_right_dbl_click_action
// [173] key_down_action
// [174] char_action
// [175] action
// [176] get_true_render_rect
// [177] is_inside
// [178] set_focus
// [179] set_tab_order
// [180] set_tab_order
// [181] get_help_info
// [182] stop_sound_system
// [183] restart_sound_system
// [184] take_snapshot
// [185] handle_reactivate
// [186] `scalar_deleting_destructor'
// [187] setup
// [188] set_rect
// [189] set_rect
// [190] set_color
// [191] set_active
// [192] set_positioning
// [193] set_fixed_position
// [194] set_redraw
// [195] set_overlapped_redraw
// [196] draw_setup
// [197] draw_finish
// [198] draw
// [199] draw_rect
// [200] draw_offset
// [201] draw_rect2
// [202] draw_offset2
// [203] paint
// [204] wnd_proc
// [205] handle_idle
// [206] handle_size
// [207] handle_paint
// [208] handle_key_down
// [209] handle_char
// [210] handle_command
// [211] handle_user_command
// [212] handle_timer_command
// [213] handle_scroll
// [214] handle_mouse_down
// [215] handle_mouse_move
// [216] handle_mouse_up
// [217] handle_mouse_dbl_click
// [218] mouse_move_action
// [219] mouse_left_down_action
// [220] mouse_left_hold_action
// [221] mouse_left_move_action
// [222] mouse_left_up_action
// [223] mouse_left_dbl_click_action
// [224] mouse_right_down_action
// [225] mouse_right_hold_action
// [226] mouse_right_move_action
// [227] mouse_right_up_action
// [228] mouse_right_dbl_click_action
// [229] key_down_action
// [230] char_action
// [231] action
// [232] get_true_render_rect
// [233] is_inside
// [234] set_focus
// [235] set_tab_order
// [236] set_tab_order
// [237] get_help_info
// [238] stop_sound_system
// [239] restart_sound_system
// [240] take_snapshot
// [241] handle_reactivate
// [242] `scalar_deleting_destructor'
// [243] setup
// [244] set_rect
// [245] set_rect
// [246] set_color
// [247] set_active
// [248] set_positioning
// [249] set_fixed_position
// [250] set_redraw
// [251] set_overlapped_redraw
// [252] draw_setup
// [253] draw_finish
// [254] draw
// [255] draw_rect
// [256] draw_offset
// [257] draw_rect2
// [258] draw_offset2
// [259] paint
// [260] wnd_proc
// [261] handle_idle
// [262] handle_size
// [263] handle_paint
// [264] handle_key_down
// [265] handle_char
// [266] handle_command
// [267] handle_user_command
// [268] handle_timer_command
// [269] handle_scroll
// [270] handle_mouse_down
// [271] handle_mouse_move
// [272] handle_mouse_up
// [273] handle_mouse_dbl_click
// [274] mouse_move_action
// [275] mouse_left_down_action
// [276] mouse_left_hold_action
// [277] mouse_left_move_action
// [278] mouse_left_up_action
// [279] mouse_left_dbl_click_action
// [280] mouse_right_down_action
// [281] mouse_right_hold_action
// [282] mouse_right_move_action
// [283] mouse_right_up_action
// [284] mouse_right_dbl_click_action
// [285] key_down_action
// [286] char_action
// [287] action
// [288] get_true_render_rect
// [289] is_inside
// [290] set_focus
// [291] set_tab_order
// [292] set_tab_order
// [293] get_help_info
// [294] stop_sound_system
// [295] restart_sound_system
// [296] take_snapshot
// [297] handle_reactivate
// [298] set_text
// [299] set_text
// [300] set_text
// [301] set_bevel_info
//
// Member Layout:
// [0x0F4] TPanel * list_panel
// [0x0F8] long list_len
// [0x0FC] long one_step
// [0x100] long page_step
// [0x104] long list_num
// [0x108] TShape * button_pics
// [0x10C] int back_frame
// [0x110] int up_frame
// [0x114] int down_frame
// [0x118] int tab_frame
// [0x11C] long arrowSize
// [0x120] long tabSize
// [0x124] long tab_y
// [0x128] long tab_min_y
// [0x12C] long tab_max_y
// [0x130] long tab_mouse_y
// [0x134] long tab_x
// [0x138] long tab_min_x
// [0x13C] long tab_max_x
// [0x140] long tab_mouse_x
// [0x144] uchar item_down
// [0x148] int item_is_down
// [0x14C] long item_x
// [0x150] long item_y
// [0x154] uchar item_mode
// [0x158] ulong item_last_time
// [0x15C] ulong item_hold_interval
// [0x160] ulong item_down_interval
// [0x164] tagRECT up_rect (sz: 0x10)
// [0x174] tagRECT down_rect (sz: 0x10)
// [0x184] tagRECT tab_rect (sz: 0x10)
// [0x194] tagRECT top_rect (sz: 0x10)
// [0x1A4] tagRECT bottom_rect (sz: 0x10)
// [0x1B4] Orientation orientationValue
// [0x1B8] int bevel_type
// [0x1BC] uchar bevel_color1
// [0x1BD] uchar bevel_color2
// [0x1BE] uchar bevel_color3
// [0x1BF] uchar bevel_color4
// [0x1C0] uchar bevel_color5
// [0x1C1] uchar bevel_color6
// ----------------------------------------------------------------

// Function: TScrollBarPanel
// Address: 0047a700
/* public: __thiscall TScrollBarPanel::TScrollBarPanel(void) */

TScrollBarPanel * __thiscall TScrollBarPanel::TScrollBarPanel(TScrollBarPanel *this)
{
  undefined4 *unaff_FS_OFFSET;
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055e578;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  TPanel::TPanel((TPanel *)this);
  this->list_panel = (TPanel *)0x0;
  this->list_len = 0;
  this->one_step = 0;
  this->page_step = 0;
  this->list_num = 0;
  this->button_pics = (TShape *)0x0;
  this->back_frame = 0;
  local_4 = 0;
  this->up_frame = 0;
  this->down_frame = 0;
  this->tab_frame = 0;
  this->arrowSize = 0;
  this->tabSize = 0;
  this->tab_y = 0;
  this->tab_min_y = 0;
  this->tab_max_y = 0;
  this->tab_mouse_y = 0;
  this->tab_x = 0;
  this->tab_min_x = 0;
  this->tab_max_x = 0;
  this->tab_mouse_x = 0;
  this->item_down = '\0';
  this->item_is_down = 0;
  this->item_x = 0;
  this->item_y = 0;
  this->item_mode = '\0';
  this->item_last_time = 0;
  this->item_hold_interval = 100;
  this->item_down_interval = 0xfa;
  this->orientationValue = Vertical;
  this->bevel_type = 1;
  this->bevel_color1 = '\0';
  this->bevel_color2 = '\0';
  this->bevel_color3 = '\0';
  this->bevel_color4 = '\0';
  this->bevel_color5 = '\0';
  this->bevel_color6 = '\0';
  this->_padding_ = (int)&_vftable_;
  *(undefined1 *)((int)&this->_padding_ + 2) = 5;
  this->_padding_ = 0;
  SetRect(&this->up_rect,0,0,0,0);
  SetRect(&this->down_rect,0,0,0,0);
  SetRect(&this->tab_rect,0,0,0,0);
  SetRect(&this->top_rect,0,0,0,0);
  SetRect(&this->bottom_rect,0,0,0,0);
  *unaff_FS_OFFSET = local_c;
  return this;
}

// --------------------------------------------------

// Function: `scalar_deleting_destructor'
// Address: 0047a880
/* public: virtual void * __thiscall TScrollBarPanel::`scalar deleting destructor'(unsigned int) */

void * __thiscall TScrollBarPanel::_scalar_deleting_destructor_(TScrollBarPanel *this,uint param_1)
{
  ~TScrollBarPanel(this);
  if ((param_1 & 1) != 0) {
    operator_delete(this);
  }
  return this;
}

// --------------------------------------------------

// Function: ~TScrollBarPanel
// Address: 0047a8a0
/* public: virtual __thiscall TScrollBarPanel::~TScrollBarPanel(void) */

void __thiscall TScrollBarPanel::~TScrollBarPanel(TScrollBarPanel *this)
{
  this->_padding_ = (int)&_vftable_;
  TPanel::~TPanel((TPanel *)this);
  return;
}

// --------------------------------------------------

// Function: setup
// Address: 0047a8b0
/* public: long __thiscall TScrollBarPanel::setup(class TDrawArea *,class TPanel
   *,long,long,long,long,char *,char *,char *,char *,long,long,class TPanel *,long,enum
   TScrollBarPanel::Orientation) */

long __thiscall
TScrollBarPanel::setup
          (TScrollBarPanel *this,TDrawArea *param_1,TPanel *param_2,long param_3,long param_4,
          long param_5,long param_6,char *param_7,char *param_8,char *param_9,char *param_10,
          long param_11,long param_12,TPanel *param_13,long param_14,Orientation param_15)
{
  this->orientationValue = param_15;
  this->arrowSize = param_11;
  this->tabSize = param_12;
  this->list_panel = param_13;
  this->list_len = param_14;
  TPanel::setup((TPanel *)this,param_1,param_2,param_3,param_4,param_5,param_6,'\0');
  return 1;
}

// --------------------------------------------------

// Function: set_rect
// Address: 0047a910
/* public: virtual void __thiscall TScrollBarPanel::set_rect(long,long,long,long) */

void __thiscall
TScrollBarPanel::set_rect(TScrollBarPanel *this,long param_1,long param_2,long param_3,long param_4)
{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  
  TPanel::set_rect((TPanel *)this,param_1,param_2,param_3,param_4);
  if (this->orientationValue == Horizontal) {
    iVar2 = this->_padding_;
    iVar3 = this->_padding_;
    iVar1 = this->_padding_ + 2;
    iVar5 = iVar2 + -5 + this->_padding_;
    iVar4 = this->_padding_;
    (this->up_rect).top = iVar1;
    (this->down_rect).top = iVar1;
    iVar6 = (iVar3 + iVar4) - iVar2;
    (this->up_rect).left = iVar4 + 2;
    (this->tab_rect).top = iVar1;
    iVar3 = iVar6 + 2;
    iVar4 = iVar4 + -3 + iVar2;
    (this->down_rect).left = iVar3;
    (this->top_rect).top = iVar1;
    (this->bottom_rect).top = iVar1;
    iVar1 = iVar4 + 1;
    this->tab_min_x = iVar1;
    this->tab_x = iVar1;
    (this->up_rect).bottom = iVar5;
    (this->up_rect).right = iVar4;
    (this->down_rect).bottom = iVar5;
    (this->down_rect).right = iVar6 + -3 + iVar2;
    (this->tab_rect).bottom = iVar5;
    (this->top_rect).bottom = iVar5;
    (this->bottom_rect).bottom = iVar5;
    this->tab_max_x = (iVar3 - iVar2) + 4;
    calc_item_rects(this);
    return;
  }
  iVar2 = this->_padding_;
  iVar1 = this->_padding_ + 2;
  iVar6 = (this->_padding_ + this->_padding_) - iVar2;
  iVar5 = this->_padding_ + 2;
  (this->up_rect).top = iVar1;
  iVar1 = iVar2 + -5 + iVar1;
  iVar3 = iVar6 + 2;
  (this->up_rect).left = iVar5;
  (this->down_rect).top = iVar3;
  iVar4 = iVar2 + -5 + iVar5;
  (this->down_rect).left = iVar5;
  (this->tab_rect).left = iVar5;
  (this->top_rect).left = iVar5;
  (this->bottom_rect).left = iVar5;
  iVar5 = iVar1 + 1;
  this->tab_max_y = (iVar3 - iVar2) + 4;
  (this->up_rect).right = iVar4;
  (this->up_rect).bottom = iVar1;
  (this->down_rect).right = iVar4;
  (this->down_rect).bottom = iVar6 + -3 + iVar2;
  (this->tab_rect).right = iVar4;
  (this->top_rect).right = iVar4;
  (this->bottom_rect).right = iVar4;
  this->tab_min_y = iVar5;
  this->tab_y = iVar5;
  calc_item_rects(this);
  return;
}

// --------------------------------------------------

// Function: calc_item_rects
// Address: 0047aa80
/* protected: void __thiscall TScrollBarPanel::calc_item_rects(void) */

void __thiscall TScrollBarPanel::calc_item_rects(TScrollBarPanel *this)
{
  int iVar1;
  int iVar2;
  int iVar3;
  
  if (this->orientationValue == Horizontal) {
    iVar1 = this->tab_x;
    iVar2 = this->_padding_;
    iVar3 = (this->up_rect).right;
    (this->tab_rect).left = iVar1;
    iVar2 = iVar2 + -5 + iVar1;
    (this->tab_rect).right = iVar2;
    (this->top_rect).right = iVar1 + -1;
    (this->top_rect).left = iVar3 + 1;
    (this->bottom_rect).left = iVar2 + 1;
    (this->bottom_rect).right = (this->down_rect).left + -1;
    return;
  }
  iVar1 = this->tab_y;
  iVar2 = this->_padding_;
  iVar3 = (this->up_rect).bottom;
  (this->tab_rect).top = iVar1;
  iVar2 = iVar2 + -5 + iVar1;
  (this->tab_rect).bottom = iVar2;
  (this->top_rect).bottom = iVar1 + -1;
  (this->top_rect).top = iVar3 + 1;
  (this->bottom_rect).top = iVar2 + 1;
  (this->bottom_rect).bottom = (this->down_rect).top + -1;
  return;
}

// --------------------------------------------------

// Function: set_tab_pos
// Address: 0047ab20
/* public: void __thiscall TScrollBarPanel::set_tab_pos(long) */

void __thiscall TScrollBarPanel::set_tab_pos(TScrollBarPanel *this,long param_1)
{
  int iVar1;
  
  iVar1 = this->list_len;
  this->list_num = param_1;
  if (this->orientationValue == Horizontal) {
    if (0 < iVar1) {
      this->tab_x = (((this->tabSize / 2 + this->tab_max_x) - this->tab_min_x) * param_1) / iVar1 +
                    this->tab_min_x;
    }
    if (this->tab_x < this->tab_min_x) {
      this->tab_x = this->tab_min_x;
    }
    else if (this->tab_max_x < this->tab_x) {
      this->tab_x = this->tab_max_x;
    }
  }
  else {
    if (0 < iVar1) {
      if (param_1 == iVar1 + -1) {
        this->tab_y = this->tab_max_y;
      }
      else {
        this->tab_y = (((this->tabSize / 2 + this->tab_max_y) - this->tab_min_y) * param_1) / iVar1
                      + this->tab_min_y;
      }
    }
    iVar1 = this->tab_min_y;
    if ((this->tab_y < iVar1) || (iVar1 = this->tab_max_y, iVar1 < this->tab_y)) {
      this->tab_y = iVar1;
    }
  }
  calc_item_rects(this);
  (**(code **)(this->_padding_ + 0x20))(1);
  return;
}

// --------------------------------------------------

// Function: set_list_len
// Address: 0047ac10
/* public: void __thiscall TScrollBarPanel::set_list_len(long,long) */

void __thiscall TScrollBarPanel::set_list_len(TScrollBarPanel *this,long param_1,long param_2)
{
  this->list_len = param_1;
  set_tab_pos(this,param_2);
  return;
}

// --------------------------------------------------

// Function: set_buttons
// Address: 0047ac30
/* public: void __thiscall TScrollBarPanel::set_buttons(class TShape *,int,int,int,int) */

void __thiscall
TScrollBarPanel::set_buttons
          (TScrollBarPanel *this,TShape *param_1,int param_2,int param_3,int param_4,int param_5)
{
  this->button_pics = param_1;
  this->back_frame = param_2;
  this->up_frame = param_3;
  this->down_frame = param_4;
  this->tab_frame = param_5;
  return;
}

// --------------------------------------------------

// Function: set_bevel_info
// Address: 0047ac70
/* public: void __thiscall TScrollBarPanel::set_bevel_info(int,int,int,int,int,int,int) */

void __thiscall
TScrollBarPanel::set_bevel_info
          (TScrollBarPanel *this,int param_1,int param_2,int param_3,int param_4,int param_5,
          int param_6,int param_7)
{
  this->bevel_type = param_1;
  this->bevel_color1 = (uchar)param_2;
  this->bevel_color2 = (uchar)param_3;
  this->bevel_color3 = (uchar)param_4;
  this->bevel_color4 = (uchar)param_5;
  this->bevel_color5 = (uchar)param_6;
  this->bevel_color6 = (uchar)param_7;
  return;
}

// --------------------------------------------------

// Function: handle_idle
// Address: 0047acc0
// [HELPER] s_C__msdev_work_age1_x1_Pnl_scbr_c: "C:\msdev\work\age1_x1\Pnl_scbr.cpp"
/* public: virtual long __thiscall TScrollBarPanel::handle_idle(void) */

long __thiscall TScrollBarPanel::handle_idle(TScrollBarPanel *this)
{
  ulong uVar1;
  int iVar2;
  
  if (this->item_mode == '\x01') {
    uVar1 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x128);
    if (this->item_down_interval <= uVar1 - this->item_last_time) {
      this->item_mode = '\x02';
      this->item_last_time = uVar1 - this->item_hold_interval;
    }
  }
  else if (((this->item_mode == '\x02') && (this->item_is_down != 0)) &&
          (uVar1 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x132),
          this->item_hold_interval <= uVar1 - this->item_last_time)) {
    this->item_last_time = uVar1;
    switch(this->item_down) {
    case '\x01':
      scroll(this,ActionUp,0);
      return 0;
    case '\x02':
      scroll(this,ActionDown,0);
      return 0;
    case '\x04':
      iVar2 = TPanel::is_inside_rect((TPanel *)this,this->item_x,this->item_y,&this->top_rect);
      if (iVar2 == 0) {
        this->item_is_down = 0;
        this->item_mode = '\0';
        (**(code **)(this->_padding_ + 0x20))(1);
        return 0;
      }
      scroll(this,ActionPrior,0);
      return 0;
    case '\x05':
      iVar2 = TPanel::is_inside_rect((TPanel *)this,this->item_x,this->item_y,&this->bottom_rect);
      if (iVar2 == 0) {
        this->item_is_down = 0;
        this->item_mode = '\0';
        (**(code **)(this->_padding_ + 0x20))(1);
        return 0;
      }
      scroll(this,ActionNext,0);
      return 0;
    }
  }
  return 0;
}

// --------------------------------------------------

// Function: mouse_left_down_action
// Address: 0047ae40
// [HELPER] s_C__msdev_work_age1_x1_Pnl_scbr_c: "C:\msdev\work\age1_x1\Pnl_scbr.cpp"
/* public: virtual long __thiscall TScrollBarPanel::mouse_left_down_action(long,long,int,int) */

long __thiscall
TScrollBarPanel::mouse_left_down_action
          (TScrollBarPanel *this,long param_1,long param_2,int param_3,int param_4)
{
  TPanel *pTVar1;
  int iVar2;
  ulong uVar3;
  
  TPanel::capture_mouse((TPanel *)this);
  iVar2 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->up_rect);
  if (iVar2 == 0) {
    iVar2 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->down_rect);
    if (iVar2 == 0) {
      iVar2 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->tab_rect);
      if (iVar2 == 0) {
        iVar2 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->top_rect);
        if (iVar2 == 0) {
          iVar2 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->bottom_rect);
          if (iVar2 == 0) {
            this->item_down = '\0';
          }
          else {
            this->item_down = '\x05';
            this->item_is_down = 1;
            scroll(this,ActionNext,0);
          }
        }
        else {
          this->item_down = '\x04';
          this->item_is_down = 1;
          scroll(this,ActionPrior,0);
        }
      }
      else {
        this->item_down = '\x03';
        if (this->orientationValue == Horizontal) {
          this->tab_mouse_x = param_1 - this->tab_x;
        }
        else {
          this->tab_mouse_y = param_2 - this->tab_y;
        }
      }
    }
    else {
      this->item_down = '\x02';
      this->item_is_down = 1;
      scroll(this,ActionDown,0);
    }
  }
  else {
    this->item_down = '\x01';
    this->item_is_down = 1;
    scroll(this,ActionUp,0);
  }
  if (this->item_down != '\0') {
    pTVar1 = this->list_panel;
    if (((pTVar1 != (TPanel *)0x0) && (pTVar1->tab_stop != 0)) &&
       (pTVar1->parent_panel != (TPanel *)0x0)) {
      TPanel::set_curr_child(pTVar1->parent_panel,pTVar1);
    }
    this->item_x = param_1;
    this->item_y = param_2;
    this->item_mode = '\x01';
    uVar3 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x185);
    this->item_last_time = uVar3;
    (**(code **)(this->_padding_ + 0x20))(1);
  }
  return 0;
}

// --------------------------------------------------

// Function: mouse_left_move_action
// Address: 0047afd0
// [HELPER] s_C__msdev_work_age1_x1_Pnl_scbr_c: "C:\msdev\work\age1_x1\Pnl_scbr.cpp"
/* public: virtual long __thiscall TScrollBarPanel::mouse_left_move_action(long,long,int,int) */

long __thiscall
TScrollBarPanel::mouse_left_move_action
          (TScrollBarPanel *this,long param_1,long param_2,int param_3,int param_4)
{
  int iVar1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  long lVar5;
  ActionType AVar6;
  
  switch(this->item_down) {
  case '\x01':
    iVar1 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->up_rect);
    iVar3 = this->item_is_down;
    if (iVar1 == 0) {
LAB_0047b111:
      if (iVar3 != 0) {
        this->item_is_down = 0;
        this->item_mode = '\0';
        (**(code **)(this->_padding_ + 0x20))(1);
      }
      goto switchD_0047afee_default;
    }
    if (iVar3 != 0) goto switchD_0047afee_default;
    this->item_is_down = 1;
    this->item_mode = '\x02';
    uVar2 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x19a);
    this->item_last_time = uVar2;
    AVar6 = ActionUp;
    break;
  case '\x02':
    iVar1 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->down_rect);
    iVar3 = this->item_is_down;
    if (iVar1 == 0) {
LAB_0047b19a:
      if (iVar3 != 0) {
        this->item_is_down = 0;
        this->item_mode = '\0';
        (**(code **)(this->_padding_ + 0x20))(1);
      }
      goto switchD_0047afee_default;
    }
    if (iVar3 != 0) goto switchD_0047afee_default;
    this->item_is_down = 1;
    this->item_mode = '\x02';
    uVar2 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x1ad);
    this->item_last_time = uVar2;
    AVar6 = ActionDown;
    goto LAB_0047b185;
  case '\x03':
    if (this->orientationValue == Horizontal) {
      iVar4 = param_1 - this->item_x;
      iVar3 = this->tab_x;
      iVar1 = this->tab_min_x;
      if ((((iVar3 == iVar1) && (0 < iVar4)) && (param_1 < this->tab_mouse_x + iVar3)) ||
         (((iVar3 == this->tab_max_x && (iVar4 < 0)) && (this->tab_mouse_x + iVar3 <= param_1)))) {
        iVar4 = 0;
      }
      if (iVar4 == 0) goto switchD_0047afee_default;
      iVar4 = this->tab_x + iVar4;
      this->tab_x = iVar4;
      if (iVar4 < iVar1) {
        this->tab_x = iVar1;
      }
      else if (this->tab_max_x < iVar4) {
        this->tab_x = this->tab_max_x;
      }
      calc_item_rects(this);
      (**(code **)(this->_padding_ + 0x20))(1);
      iVar3 = this->tab_min_x;
      if (iVar3 == this->tab_max_x) {
        lVar5 = 0;
      }
      else {
        lVar5 = ((this->tab_x - iVar3) * this->list_len) / (this->tab_max_x - iVar3);
        if (lVar5 < 0) {
          lVar5 = 0;
        }
        else {
          iVar3 = this->list_len + -1;
          if (iVar3 < lVar5) {
LAB_0047b382:
            lVar5 = iVar3;
          }
        }
      }
    }
    else {
      iVar4 = param_2 - this->item_y;
      iVar3 = this->tab_y;
      iVar1 = this->tab_min_y;
      if (((iVar3 == iVar1) && (0 < iVar4)) && (param_2 < this->tab_mouse_y + iVar3)) {
        iVar4 = 0;
      }
      else if (((iVar3 == this->tab_max_y) && (iVar4 < 0)) && (this->tab_mouse_y + iVar3 <= param_2)
              ) {
        iVar4 = 0;
      }
      if (iVar4 == 0) goto switchD_0047afee_default;
      iVar4 = this->tab_y + iVar4;
      this->tab_y = iVar4;
      if (iVar4 < iVar1) {
        this->tab_y = iVar1;
      }
      else if (this->tab_max_y < iVar4) {
        this->tab_y = this->tab_max_y;
      }
      calc_item_rects(this);
      (**(code **)(this->_padding_ + 0x20))(1);
      iVar3 = this->tab_min_y;
      if (iVar3 == this->tab_max_y) {
        lVar5 = 0;
      }
      else {
        lVar5 = ((this->tab_y - iVar3) * this->list_len) / (this->tab_max_y - iVar3);
        if (lVar5 < 0) {
          lVar5 = 0;
        }
        else {
          iVar3 = this->list_len + -1;
          if (iVar3 < lVar5) goto LAB_0047b382;
        }
      }
    }
    scroll(this,ActionPosition,lVar5);
    goto switchD_0047afee_default;
  case '\x04':
    iVar1 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->top_rect);
    iVar3 = this->item_is_down;
    if (iVar1 == 0) goto LAB_0047b111;
    if (iVar3 != 0) goto switchD_0047afee_default;
    this->item_is_down = 1;
    this->item_mode = '\x02';
    uVar2 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x1c0);
    this->item_last_time = uVar2;
    AVar6 = ActionPrior;
    break;
  case '\x05':
    iVar1 = TPanel::is_inside_rect((TPanel *)this,param_1,param_2,&this->bottom_rect);
    iVar3 = this->item_is_down;
    if (iVar1 == 0) goto LAB_0047b19a;
    if (iVar3 != 0) goto switchD_0047afee_default;
    this->item_is_down = 1;
    this->item_mode = '\x02';
    uVar2 = debug_timeGetTime(s_C__msdev_work_age1_x1_Pnl_scbr_c,0x1d3);
    this->item_last_time = uVar2;
    AVar6 = ActionNext;
LAB_0047b185:
    scroll(this,AVar6,0);
    (**(code **)(this->_padding_ + 0x20))(1);
  default:
    goto switchD_0047afee_default;
  }
  scroll(this,AVar6,0);
  (**(code **)(this->_padding_ + 0x20))(1);
switchD_0047afee_default:
  if (this->item_down != '\0') {
    this->item_x = param_1;
    this->item_y = param_2;
  }
  return 0;
}

// --------------------------------------------------

// Function: mouse_left_up_action
// Address: 0047b3d0
/* public: virtual long __thiscall TScrollBarPanel::mouse_left_up_action(long,long,int,int) */

long __thiscall
TScrollBarPanel::mouse_left_up_action
          (TScrollBarPanel *this,long param_1,long param_2,int param_3,int param_4)
{
  if ((int *)this->_padding_ != (int *)0x0) {
    (**(code **)(*(int *)this->_padding_ + 0xb4))(this,5,this->list_num,0);
  }
  TPanel::release_mouse((TPanel *)this);
  this->item_down = '\0';
  this->item_mode = '\0';
  this->item_is_down = 0;
  (**(code **)(this->_padding_ + 0x20))(1);
  return 0;
}

// --------------------------------------------------

// Function: scroll
// Address: 0047b420
/* public: void __thiscall TScrollBarPanel::scroll(enum TScrollBarPanel::ActionType,long) */

void __thiscall TScrollBarPanel::scroll(TScrollBarPanel *this,ActionType param_1,long param_2)
{
  int iVar1;
  int iVar2;
  
  if (this->list_panel != (TPanel *)0x0) {
    (**(code **)(this->list_panel->_padding_ + 0xb4))(this,param_1,param_2,0);
    return;
  }
  iVar1 = this->list_num;
  switch(param_1) {
  case ActionUp:
    param_2 = iVar1 - this->one_step;
    break;
  case ActionDown:
    param_2 = iVar1 + this->one_step;
    break;
  case ActionPrior:
    param_2 = iVar1 - this->page_step;
    break;
  case ActionNext:
    param_2 = iVar1 + this->page_step;
    break;
  case ActionPosition:
    break;
  default:
    goto switchD_0047b459_default;
  }
  if (param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar2 = this->list_len + -1;
    if (iVar2 < param_2) {
      param_2 = iVar2;
    }
  }
  if (param_2 != iVar1) {
    set_tab_pos(this,param_2);
    if ((int *)this->_padding_ != (int *)0x0) {
      (**(code **)(*(int *)this->_padding_ + 0xb4))(this,4,param_2,0);
    }
  }
switchD_0047b459_default:
  return;
}

// --------------------------------------------------

// Function: draw
// Address: 0047b4e0
// [HELPER] s_pnl_scbr__draw: "pnl_scbr::draw"
/* public: virtual void __thiscall TScrollBarPanel::draw(void) */

void __thiscall TScrollBarPanel::draw(TScrollBarPanel *this)
{
  int iVar1;
  uchar *puVar2;
  int iVar3;
  
  if ((int *)this->_padding_ != (int *)0x0) {
    (**(code **)(*(int *)this->_padding_ + 0x3c))(&this->_padding_);
  }
  iVar1 = this->_padding_;
  (**(code **)(iVar1 + 0x28))(0);
  puVar2 = TDrawArea::Lock((TDrawArea *)this->_padding_,s_pnl_scbr__draw,1);
  if (puVar2 != (uchar *)0x0) {
    draw_back_pic(this);
    draw_border(this,0,1,(tagRECT *)&this->_padding_);
    if (((this->up_rect).top != (this->up_rect).bottom) &&
       ((this->up_rect).left != (this->up_rect).right)) {
      if ((this->item_down == '\x01') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_button_pic(this,this->up_frame,iVar3,&this->up_rect);
      if ((this->item_down == '\x01') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_border(this,1,iVar3,&this->up_rect);
    }
    if (((this->down_rect).top != (this->down_rect).bottom) &&
       ((this->down_rect).left != (this->down_rect).right)) {
      if ((this->item_down == '\x02') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_button_pic(this,this->down_frame,iVar3,&this->down_rect);
      if ((this->item_down == '\x02') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_border(this,1,iVar3,&this->down_rect);
    }
    draw_button_pic(this,this->tab_frame,0,&this->tab_rect);
    draw_border(this,1,0,&this->tab_rect);
    TDrawArea::Unlock((TDrawArea *)this->_padding_,s_pnl_scbr__draw);
  }
  (**(code **)(iVar1 + 0x2c))();
  return;
}

// --------------------------------------------------

// Function: draw_border
// Address: 0047b660
/* protected: void __thiscall TScrollBarPanel::draw_border(int,int,struct tagRECT *) */

void __thiscall
TScrollBarPanel::draw_border(TScrollBarPanel *this,int param_1,int param_2,tagRECT *param_3)
{
  draw_border(this,param_1,param_2,param_3->left,param_3->top,param_3->right,param_3->bottom);
  return;
}

// --------------------------------------------------

// Function: draw_border
// Address: 0047b690
/* protected: void __thiscall TScrollBarPanel::draw_border(int,int,long,long,long,long) */

void __thiscall
TScrollBarPanel::draw_border
          (TScrollBarPanel *this,int param_1,int param_2,long param_3,long param_4,long param_5,
          long param_6)
{
  uchar uVar1;
  
  if ((param_3 != param_5) && (param_4 != param_6)) {
    if (param_2 == 0) {
      switch(this->bevel_type) {
      case 1:
        uVar1 = '\0';
        if (param_1 != 0) {
          TDrawArea::DrawVertLine
                    ((TDrawArea *)this->_padding_,param_5,param_4 + 1,param_6 - param_4,'\0');
          TDrawArea::DrawHorzLine
                    ((TDrawArea *)this->_padding_,param_3 + 1,param_4,param_5 - param_3,'\0');
          TDrawArea::DrawRect((TDrawArea *)this->_padding_,param_3,param_4,param_5 + -1,param_4 + -1
                              ,0xff);
          return;
        }
        goto LAB_0047b7e8;
      case 2:
        TDrawArea::DrawBevel
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color1,
                   this->bevel_color6);
        return;
      case 3:
        TDrawArea::DrawBevel2
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color1,
                   this->bevel_color2,this->bevel_color5,this->bevel_color6);
        return;
      case 4:
        TDrawArea::DrawBevel3
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color1,
                   this->bevel_color2,this->bevel_color3,this->bevel_color4,this->bevel_color5,
                   this->bevel_color6);
      }
    }
    else {
      switch(this->bevel_type) {
      case 1:
        uVar1 = 0xff;
        if (param_1 != 0) {
          TDrawArea::DrawRect((TDrawArea *)this->_padding_,param_3 + 1,param_4 + 1,param_5,param_6,
                              0xff);
          return;
        }
LAB_0047b7e8:
        TDrawArea::DrawRect((TDrawArea *)this->_padding_,param_3,param_4,param_5 + -1,param_6,uVar1)
        ;
        return;
      case 2:
        TDrawArea::DrawBevel
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color6,
                   this->bevel_color1);
        return;
      case 3:
        TDrawArea::DrawBevel2
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color6,
                   this->bevel_color5,this->bevel_color2,this->bevel_color1);
        return;
      case 4:
        TDrawArea::DrawBevel3
                  ((TDrawArea *)this->_padding_,param_3,param_4,param_5,param_6,this->bevel_color6,
                   this->bevel_color5,this->bevel_color4,this->bevel_color3,this->bevel_color2,
                   this->bevel_color1);
        return;
      }
    }
  }
  return;
}

// --------------------------------------------------

// Function: draw_back_pic
// Address: 0047b8b0
/* WARNING: Variable defined which should be unmapped: x_max */
/* protected: void __thiscall TScrollBarPanel::draw_back_pic(void) */

void __thiscall TScrollBarPanel::draw_back_pic(TScrollBarPanel *this)
{
  int iVar1;
  int iVar2;
  int iVar3;
  long x_max;
  long x_min;
  long y_max;
  long y_min;
  long pic_hgt;
  int local_4;
  
  if ((this->button_pics != (TShape *)0x0) && (this->back_frame != -1)) {
    TShape::shape_minmax(this->button_pics,&y_max,&pic_hgt,&x_min,&y_min,this->back_frame);
    iVar1 = (y_min - pic_hgt) + 1;
    iVar2 = 0;
    local_4 = iVar1;
    if (-1 < this->_padding_) {
      do {
        iVar3 = 0;
        if (-1 < this->_padding_) {
          do {
            TShape::shape_draw(this->button_pics,(TDrawArea *)this->_padding_,
                               iVar3 + this->_padding_,iVar2 + this->_padding_,this->back_frame,'\0'
                               ,(uchar *)0x0);
            iVar3 = iVar3 + (x_min - y_max) + 1;
            iVar1 = local_4;
          } while (iVar3 <= this->_padding_);
        }
        iVar2 = iVar2 + iVar1;
      } while (iVar2 <= this->_padding_);
    }
  }
  return;
}

// --------------------------------------------------

// Function: draw_button_pic
// Address: 0047b970
/* WARNING: Variable defined which should be unmapped: x_min */
/* protected: void __thiscall TScrollBarPanel::draw_button_pic(int,int,struct tagRECT *) */

void __thiscall
TScrollBarPanel::draw_button_pic(TScrollBarPanel *this,int param_1,int param_2,tagRECT *param_3)
{
  tagRECT *ptVar1;
  short sVar2;
  short sVar3;
  long x_min;
  long y_max;
  long y_min;
  int local_4;
  
  ptVar1 = param_3;
  if ((this->button_pics != (TShape *)0x0) && (param_1 != -1)) {
    TDrawArea::SetClipRect((TDrawArea *)this->_padding_,param_3);
    TShape::shape_minmax(this->button_pics,&y_max,&local_4,(long *)&param_3,&y_min,param_1);
    sVar2 = (((short)(((ptVar1->right - ptVar1->left) + 1) / 2) -
             (short)(((int)param_3 + (1 - y_max)) / 2)) - (short)y_max) + (short)ptVar1->left;
    sVar3 = (((short)(((ptVar1->bottom - ptVar1->top) + 1) / 2) -
             (short)(((y_min - local_4) + 1) / 2)) - (short)local_4) + (short)ptVar1->top;
    if (param_2 != 0) {
      sVar2 = sVar2 + 1;
      sVar3 = sVar3 + -1;
    }
    TShape::shape_draw(this->button_pics,(TDrawArea *)this->_padding_,(int)sVar2,(int)sVar3,
                       (uint)(param_2 != 0) + param_1,'\0',(uchar *)0x0);
    return;
  }
  (**(code **)(*(int *)this->_padding_ + 0x3c))(param_3);
  return;
}

// --------------------------------------------------

// Function: draw
// Address: 0047bddc
// [HELPER] s_pnl_scbr__draw: "pnl_scbr::draw"
void __thiscall TScrollBarPanel::draw(TScrollBarPanel *this)
{
  int iVar1;
  uchar *puVar2;
  int iVar3;
  
  if ((int *)this->_padding_ != (int *)0x0) {
    (**(code **)(*(int *)this->_padding_ + 0x3c))(&this->_padding_);
  }
  iVar1 = this->_padding_;
  (**(code **)(iVar1 + 0x28))(0);
  puVar2 = TDrawArea::Lock((TDrawArea *)this->_padding_,s_pnl_scbr__draw,1);
  if (puVar2 != (uchar *)0x0) {
    draw_back_pic(this);
    draw_border(this,0,1,(tagRECT *)&this->_padding_);
    if (((this->up_rect).top != (this->up_rect).bottom) &&
       ((this->up_rect).left != (this->up_rect).right)) {
      if ((this->item_down == '\x01') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_button_pic(this,this->up_frame,iVar3,&this->up_rect);
      if ((this->item_down == '\x01') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_border(this,1,iVar3,&this->up_rect);
    }
    if (((this->down_rect).top != (this->down_rect).bottom) &&
       ((this->down_rect).left != (this->down_rect).right)) {
      if ((this->item_down == '\x02') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_button_pic(this,this->down_frame,iVar3,&this->down_rect);
      if ((this->item_down == '\x02') && (this->item_is_down != 0)) {
        iVar3 = 1;
      }
      else {
        iVar3 = 0;
      }
      draw_border(this,1,iVar3,&this->down_rect);
    }
    draw_button_pic(this,this->tab_frame,0,&this->tab_rect);
    draw_border(this,1,0,&this->tab_rect);
    TDrawArea::Unlock((TDrawArea *)this->_padding_,s_pnl_scbr__draw);
  }
  (**(code **)(iVar1 + 0x2c))();
  return;
}

// --------------------------------------------------

