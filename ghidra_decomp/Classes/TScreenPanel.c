// Class: TScreenPanel
// Size:  0x478
//
// VTable Layout:
// [00] `vector_deleting_destructor'
// [01] setup
// [02] set_rect
// [03] set_rect
// [04] set_color
// [05] set_active
// [06] set_positioning
// [07] set_fixed_position
// [08] set_redraw
// [09] set_overlapped_redraw
// [10] draw_setup
// [11] draw_finish
// [12] draw
// [13] draw_rect
// [14] draw_offset
// [15] draw_rect2
// [16] draw_offset2
// [17] paint
// [18] wnd_proc
// [19] handle_idle
// [20] handle_size
// [21] handle_paint
// [22] handle_key_down
// [23] handle_char
// [24] handle_command
// [25] handle_user_command
// [26] handle_timer_command
// [27] handle_scroll
// [28] handle_mouse_down
// [29] handle_mouse_move
// [30] handle_mouse_up
// [31] handle_mouse_dbl_click
// [32] mouse_move_action
// [33] mouse_left_down_action
// [34] mouse_left_hold_action
// [35] mouse_left_move_action
// [36] mouse_left_up_action
// [37] mouse_left_dbl_click_action
// [38] mouse_right_down_action
// [39] mouse_right_hold_action
// [40] mouse_right_move_action
// [41] mouse_right_up_action
// [42] mouse_right_dbl_click_action
// [43] key_down_action
// [44] char_action
// [45] action
// [46] get_true_render_rect
// [47] is_inside
// [48] set_focus
// [49] set_tab_order
// [50] set_tab_order
// [51] get_help_info
// [52] stop_sound_system
// [53] restart_sound_system
// [54] take_snapshot
// [55] handle_reactivate
// [56] draw_background
// [57] set_ideal_size
// [58] create_button
// [59] create_button
// [60] create_check_box
// [61] create_radio_button
// [62] create_text
// [63] create_text
// [64] create_text
// [65] create_input
// [66] create_edit
// [67] create_drop_down
// [68] create_list
// [69] create_scrollbar
// [70] create_auto_scrollbar
// [71] create_vert_slider
// [72] create_horz_slider
// [73] position_panel
// [74] `scalar_deleting_destructor'
// [75] setup
// [76] set_rect
// [77] set_rect
// [78] set_color
// [79] set_active
// [80] set_positioning
// [81] set_fixed_position
// [82] set_redraw
// [83] set_overlapped_redraw
// [84] draw_setup
// [85] draw_finish
// [86] draw
// [87] draw_rect
// [88] draw_offset
// [89] draw_rect2
// [90] draw_offset2
// [91] paint
// [92] wnd_proc
// [93] handle_idle
// [94] handle_size
// [95] handle_paint
// [96] handle_key_down
// [97] handle_char
// [98] handle_command
// [99] handle_user_command
// [100] handle_timer_command
// [101] handle_scroll
// [102] handle_mouse_down
// [103] handle_mouse_move
// [104] handle_mouse_up
// [105] handle_mouse_dbl_click
// [106] mouse_move_action
// [107] mouse_left_down_action
// [108] mouse_left_hold_action
// [109] mouse_left_move_action
// [110] mouse_left_up_action
// [111] mouse_left_dbl_click_action
// [112] mouse_right_down_action
// [113] mouse_right_hold_action
// [114] mouse_right_move_action
// [115] mouse_right_up_action
// [116] mouse_right_dbl_click_action
// [117] key_down_action
// [118] char_action
// [119] action
// [120] get_true_render_rect
// [121] is_inside
// [122] set_focus
// [123] set_tab_order
// [124] set_tab_order
// [125] get_help_info
// [126] stop_sound_system
// [127] restart_sound_system
// [128] take_snapshot
// [129] handle_reactivate
// [130] `scalar_deleting_destructor'
// [131] setup
// [132] set_rect
// [133] set_rect
// [134] set_color
// [135] set_active
// [136] set_positioning
// [137] set_fixed_position
// [138] set_redraw
// [139] set_overlapped_redraw
// [140] draw_setup
// [141] draw_finish
// [142] draw
// [143] draw_rect
// [144] draw_offset
// [145] draw_rect2
// [146] draw_offset2
// [147] paint
// [148] wnd_proc
// [149] handle_idle
// [150] handle_size
// [151] handle_paint
// [152] handle_key_down
// [153] handle_char
// [154] handle_command
// [155] handle_user_command
// [156] handle_timer_command
// [157] handle_scroll
// [158] handle_mouse_down
// [159] handle_mouse_move
// [160] handle_mouse_up
// [161] handle_mouse_dbl_click
// [162] mouse_move_action
// [163] mouse_left_down_action
// [164] mouse_left_hold_action
// [165] mouse_left_move_action
// [166] mouse_left_up_action
// [167] mouse_left_dbl_click_action
// [168] mouse_right_down_action
// [169] mouse_right_hold_action
// [170] mouse_right_move_action
// [171] mouse_right_up_action
// [172] mouse_right_dbl_click_action
// [173] key_down_action
// [174] char_action
// [175] action
// [176] get_true_render_rect
// [177] is_inside
// [178] set_focus
// [179] set_tab_order
// [180] set_tab_order
// [181] get_help_info
// [182] stop_sound_system
// [183] restart_sound_system
// [184] take_snapshot
// [185] handle_reactivate
// [186] `scalar_deleting_destructor'
// [187] setup
// [188] set_rect
// [189] set_rect
// [190] set_color
// [191] set_active
// [192] set_positioning
// [193] set_fixed_position
// [194] set_redraw
// [195] set_overlapped_redraw
// [196] draw_setup
// [197] draw_finish
// [198] draw
// [199] draw_rect
// [200] draw_offset
// [201] draw_rect2
// [202] draw_offset2
// [203] paint
// [204] wnd_proc
// [205] handle_idle
// [206] handle_size
// [207] handle_paint
// [208] handle_key_down
// [209] handle_char
// [210] handle_command
// [211] handle_user_command
// [212] handle_timer_command
// [213] handle_scroll
// [214] handle_mouse_down
// [215] handle_mouse_move
// [216] handle_mouse_up
// [217] handle_mouse_dbl_click
// [218] mouse_move_action
// [219] mouse_left_down_action
// [220] mouse_left_hold_action
// [221] mouse_left_move_action
// [222] mouse_left_up_action
// [223] mouse_left_dbl_click_action
// [224] mouse_right_down_action
// [225] mouse_right_hold_action
// [226] mouse_right_move_action
// [227] mouse_right_up_action
// [228] mouse_right_dbl_click_action
// [229] key_down_action
// [230] char_action
// [231] action
// [232] get_true_render_rect
// [233] is_inside
// [234] set_focus
// [235] set_tab_order
// [236] set_tab_order
// [237] get_help_info
// [238] stop_sound_system
// [239] restart_sound_system
// [240] take_snapshot
// [241] handle_reactivate
// [242] set_text
// [243] set_text
// [244] set_text
// [245] set_bevel_info
//
// Member Layout:
// ----------------------------------------------------------------

// Function: TScreenPanel
// Address: 0047ba70
/* public: __thiscall TScreenPanel::TScreenPanel(void) */

TScreenPanel * __thiscall TScreenPanel::TScreenPanel(TScreenPanel *this)
{
  TEasy_Panel::TEasy_Panel((TEasy_Panel *)this);
  *(undefined ***)this = &_vftable_;
  return this;
}

// --------------------------------------------------

// Function: `vector_deleting_destructor'
// Address: 0047ba90
/* public: virtual void * __thiscall TScreenPanel::`vector deleting destructor'(unsigned int) */

void * __thiscall TScreenPanel::_vector_deleting_destructor_(TScreenPanel *this,uint param_1)
{
  ~TScreenPanel(this);
  if ((param_1 & 1) != 0) {
    operator_delete(this);
  }
  return this;
}

// --------------------------------------------------

// Function: TScreenPanel
// Address: 0047bab0
/* public: __thiscall TScreenPanel::TScreenPanel(char *) */

TScreenPanel * __thiscall TScreenPanel::TScreenPanel(TScreenPanel *this,char *param_1)
{
  TEasy_Panel::TEasy_Panel((TEasy_Panel *)this,param_1);
  *(undefined ***)this = &_vftable_;
  return this;
}

// --------------------------------------------------

// Function: ~TScreenPanel
// Address: 0047bad0
/* public: virtual __thiscall TScreenPanel::~TScreenPanel(void) */

void __thiscall TScreenPanel::~TScreenPanel(TScreenPanel *this)
{
  *(undefined ***)this = &_vftable_;
  TEasy_Panel::~TEasy_Panel((TEasy_Panel *)this);
  return;
}

// --------------------------------------------------

// Function: setup
// Address: 0047bae0
/* public: long __thiscall TScreenPanel::setup(class TDrawArea *,char *,long,int) */

long __thiscall
TScreenPanel::setup(TScreenPanel *this,TDrawArea *param_1,char *param_2,long param_3,int param_4)
{
  long lVar1;
  
  lVar1 = TEasy_Panel::setup((TEasy_Panel *)this,param_1,(TPanel *)0x0,param_2,param_3,1,0,0,0,0,
                             param_4);
  return (uint)(lVar1 != 0);
}

// --------------------------------------------------

// Function: setup
// Address: 0047bb10
/* public: long __thiscall TScreenPanel::setup(class TDrawArea *,char *,long,unsigned char,int) */

long __thiscall
TScreenPanel::setup(TScreenPanel *this,TDrawArea *param_1,char *param_2,long param_3,uchar param_4,
                   int param_5)
{
  long lVar1;
  
  lVar1 = TEasy_Panel::setup((TEasy_Panel *)this,param_1,(TPanel *)0x0,(char *)0x0,-1,1,0,0,0,0,
                             param_5);
  return (uint)(lVar1 != 0);
}

// --------------------------------------------------

// Function: draw
// Address: 0047bb40
/* public: virtual void __thiscall TScreenPanel::draw(void) */

void __thiscall TScreenPanel::draw(TScreenPanel *this)
{
  if (this->field_0xf3 != '\0') {
    if (*(int *)&this->field_0x46c != 0) {
      TEasy_Panel::setup_shadow_area((TEasy_Panel *)this,1);
    }
    this->field_0xf3 = 0;
  }
  if (this->field_0xf2 != '\0') {
    (**(code **)(*(int *)this + 0xe0))(1);
    return;
  }
  (**(code **)(*(int *)this + 0xe0))(0);
  return;
}

// --------------------------------------------------

// Function: handle_paint
// Address: 0047bb50
/* public: virtual long __thiscall TScreenPanel::handle_paint(void) */

long __thiscall TScreenPanel::handle_paint(TScreenPanel *this)
{
  TPanel::handle_paint((TPanel *)this);
  return 0;
}

// --------------------------------------------------

// Function: set_focus
// Address: 0047bb60
/* WARNING: Variable defined which should be unmapped: color */
/* public: virtual void __thiscall TScreenPanel::set_focus(int) */

void __thiscall TScreenPanel::set_focus(TScreenPanel *this,int param_1)
{
  TDrawArea *pTVar1;
  TDrawSystem *pTVar2;
  bool bVar3;
  tagPALETTEENTRY color;
  int save_focus;
  tagPALETTEENTRY color_table [256];
  
  color_table[0].peRed = this->field_0x78;
  color_table[0].peGreen = this->field_0x79;
  color_table[0].peBlue = this->field_0x7a;
  color_table[0].peFlags = this->field_0x7b;
  bVar3 = this != last_screen;
  pTVar1 = *(TDrawArea **)&this->field_0x20;
  if (((((pTVar1 != (TDrawArea *)0x0) && (pTVar2 = pTVar1->DrawSystem, pTVar2 != (TDrawSystem *)0x0)
        ) && (param_1 != 0)) && (bVar3)) &&
     ((pTVar2->ScreenMode == '\x02' || (pTVar2->DrawType == '\x01')))) {
    save_focus = save_focus & 0xff000000;
    if (*(int *)&this->field_0x20c == 0) {
      TDrawArea::GetPalette(pTVar1,color_table + 1);
    }
    else {
      GetPaletteEntries(*(int *)&this->field_0x20c,0,0x100,color_table + 1);
    }
    RGE_fade_palette(*(TDrawArea **)&this->field_0x20,(tagPALETTEENTRY)save_focus,0.13,'\x01',
                     (tagPALETTEENTRY *)0x0,-1,-1);
    TDrawArea::Clear(*(TDrawArea **)&this->field_0x20,(tagRECT *)0x0,0);
    TDrawSystem::Paint((TDrawSystem *)**(undefined4 **)&this->field_0x20,(tagRECT *)0x0);
  }
  TEasy_Panel::set_focus((TEasy_Panel *)this,param_1);
  pTVar1 = *(TDrawArea **)&this->field_0x20;
  if ((((pTVar1 != (TDrawArea *)0x0) && (pTVar2 = pTVar1->DrawSystem, pTVar2 != (TDrawSystem *)0x0))
      && ((param_1 != 0 && (bVar3)))) &&
     ((pTVar2->ScreenMode == '\x02' || (pTVar2->DrawType == '\x01')))) {
    RGE_fade_palette(pTVar1,(tagPALETTEENTRY)save_focus,0.0,'\x02',color_table + 1,-1,-1);
    (**(code **)(*(int *)this + 0x54))();
    RGE_fade_palette(*(TDrawArea **)&this->field_0x20,(tagPALETTEENTRY)save_focus,0.0,'\x01',
                     (tagPALETTEENTRY *)0x0,-1,-1);
    TDrawSystem::Paint((TDrawSystem *)**(undefined4 **)&this->field_0x20,(tagRECT *)0x0);
    RGE_fade_palette(*(TDrawArea **)&this->field_0x20,(tagPALETTEENTRY)save_focus,0.13,'\x02',
                     color_table + 1,-1,-1);
  }
  if (((tagPALETTEENTRY)param_1 != color_table[0]) && (*(int *)&this->field_0x78 != 0)) {
    last_screen = this;
  }
  return;
}

// --------------------------------------------------

