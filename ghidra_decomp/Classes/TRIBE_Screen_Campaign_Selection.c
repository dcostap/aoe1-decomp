// Class: TRIBE_Screen_Campaign_Selection
// Size:  0x4CC
//
// VTable Layout:
// [00] `vector_deleting_destructor'
// [01] setup
// [02] set_rect
// [03] set_rect
// [04] set_color
// [05] set_active
// [06] set_positioning
// [07] set_fixed_position
// [08] set_redraw
// [09] set_overlapped_redraw
// [10] draw_setup
// [11] draw_finish
// [12] draw
// [13] draw_rect
// [14] draw_offset
// [15] draw_rect2
// [16] draw_offset2
// [17] paint
// [18] wnd_proc
// [19] handle_idle
// [20] handle_size
// [21] handle_paint
// [22] handle_key_down
// [23] handle_char
// [24] handle_command
// [25] handle_user_command
// [26] handle_timer_command
// [27] handle_scroll
// [28] handle_mouse_down
// [29] handle_mouse_move
// [30] handle_mouse_up
// [31] handle_mouse_dbl_click
// [32] mouse_move_action
// [33] mouse_left_down_action
// [34] mouse_left_hold_action
// [35] mouse_left_move_action
// [36] mouse_left_up_action
// [37] mouse_left_dbl_click_action
// [38] mouse_right_down_action
// [39] mouse_right_hold_action
// [40] mouse_right_move_action
// [41] mouse_right_up_action
// [42] mouse_right_dbl_click_action
// [43] key_down_action
// [44] char_action
// [45] action
// [46] get_true_render_rect
// [47] is_inside
// [48] set_focus
// [49] set_tab_order
// [50] set_tab_order
// [51] get_help_info
// [52] stop_sound_system
// [53] restart_sound_system
// [54] take_snapshot
// [55] handle_reactivate
// [56] draw_background
// [57] set_ideal_size
// [58] create_button
// [59] create_button
// [60] create_check_box
// [61] create_radio_button
// [62] create_text
// [63] create_text
// [64] create_text
// [65] create_input
// [66] create_edit
// [67] create_drop_down
// [68] create_list
// [69] create_scrollbar
// [70] create_auto_scrollbar
// [71] create_vert_slider
// [72] create_horz_slider
// [73] position_panel
// [74] `scalar_deleting_destructor'
// [75] setup
// [76] set_rect
// [77] set_rect
// [78] set_color
// [79] set_active
// [80] set_positioning
// [81] set_fixed_position
// [82] set_redraw
// [83] set_overlapped_redraw
// [84] draw_setup
// [85] draw_finish
// [86] draw
// [87] draw_rect
// [88] draw_offset
// [89] draw_rect2
// [90] draw_offset2
// [91] paint
// [92] wnd_proc
// [93] handle_idle
// [94] handle_size
// [95] handle_paint
// [96] handle_key_down
// [97] handle_char
// [98] handle_command
// [99] handle_user_command
// [100] handle_timer_command
// [101] handle_scroll
// [102] handle_mouse_down
// [103] handle_mouse_move
// [104] handle_mouse_up
// [105] handle_mouse_dbl_click
// [106] mouse_move_action
// [107] mouse_left_down_action
// [108] mouse_left_hold_action
// [109] mouse_left_move_action
// [110] mouse_left_up_action
// [111] mouse_left_dbl_click_action
// [112] mouse_right_down_action
// [113] mouse_right_hold_action
// [114] mouse_right_move_action
// [115] mouse_right_up_action
// [116] mouse_right_dbl_click_action
// [117] key_down_action
// [118] char_action
// [119] action
// [120] get_true_render_rect
// [121] is_inside
// [122] set_focus
// [123] set_tab_order
// [124] set_tab_order
// [125] get_help_info
// [126] stop_sound_system
// [127] restart_sound_system
// [128] take_snapshot
// [129] handle_reactivate
// [130] draw_background
// [131] set_ideal_size
// [132] create_button
// [133] create_button
// [134] create_check_box
// [135] create_radio_button
// [136] create_text
// [137] create_text
// [138] create_text
// [139] create_input
// [140] create_edit
// [141] create_drop_down
// [142] create_list
// [143] create_scrollbar
// [144] create_auto_scrollbar
// [145] create_vert_slider
// [146] create_horz_slider
// [147] position_panel
// [148] `vector_deleting_destructor'
// [149] setup
// [150] set_rect
// [151] set_rect
// [152] set_color
// [153] set_active
// [154] set_positioning
// [155] set_fixed_position
// [156] set_redraw
// [157] set_overlapped_redraw
// [158] draw_setup
// [159] draw_finish
// [160] draw
// [161] draw_rect
// [162] draw_offset
// [163] draw_rect2
// [164] draw_offset2
// [165] paint
// [166] wnd_proc
// [167] handle_idle
// [168] handle_size
// [169] handle_paint
// [170] handle_key_down
// [171] handle_char
// [172] handle_command
// [173] handle_user_command
// [174] handle_timer_command
// [175] handle_scroll
// [176] handle_mouse_down
// [177] handle_mouse_move
// [178] handle_mouse_up
// [179] handle_mouse_dbl_click
// [180] mouse_move_action
// [181] mouse_left_down_action
// [182] mouse_left_hold_action
// [183] mouse_left_move_action
// [184] mouse_left_up_action
// [185] mouse_left_dbl_click_action
// [186] mouse_right_down_action
// [187] mouse_right_hold_action
// [188] mouse_right_move_action
// [189] mouse_right_up_action
// [190] mouse_right_dbl_click_action
// [191] key_down_action
// [192] char_action
// [193] action
// [194] get_true_render_rect
// [195] is_inside
// [196] set_focus
// [197] set_tab_order
// [198] set_tab_order
// [199] get_help_info
// [200] stop_sound_system
// [201] restart_sound_system
// [202] take_snapshot
// [203] handle_reactivate
// [204] draw_background
// [205] set_ideal_size
// [206] create_button
// [207] create_button
// [208] create_check_box
// [209] create_radio_button
// [210] create_text
// [211] create_text
// [212] create_text
// [213] create_input
// [214] create_edit
// [215] create_drop_down
// [216] create_list
// [217] create_scrollbar
// [218] create_auto_scrollbar
// [219] create_vert_slider
// [220] create_horz_slider
// [221] position_panel
// [222] setup
// [223] setup
// [224] `scalar_deleting_destructor'
// [225] setup
// [226] set_rect
// [227] set_rect
// [228] set_color
// [229] set_active
// [230] set_positioning
// [231] set_fixed_position
// [232] set_redraw
// [233] set_overlapped_redraw
// [234] draw_setup
// [235] draw_finish
// [236] draw
// [237] draw_rect
// [238] draw_offset
// [239] draw_rect2
// [240] draw_offset2
// [241] paint
// [242] wnd_proc
// [243] handle_idle
// [244] handle_size
// [245] handle_paint
// [246] handle_key_down
// [247] handle_char
// [248] handle_command
// [249] handle_user_command
// [250] handle_timer_command
// [251] handle_scroll
// [252] handle_mouse_down
// [253] handle_mouse_move
// [254] handle_mouse_up
// [255] handle_mouse_dbl_click
// [256] mouse_move_action
// [257] mouse_left_down_action
// [258] mouse_left_hold_action
// [259] mouse_left_move_action
// [260] mouse_left_up_action
// [261] mouse_left_dbl_click_action
// [262] mouse_right_down_action
// [263] mouse_right_hold_action
// [264] mouse_right_move_action
// [265] mouse_right_up_action
// [266] mouse_right_dbl_click_action
// [267] key_down_action
// [268] char_action
// [269] action
// [270] get_true_render_rect
// [271] is_inside
// [272] set_focus
// [273] set_tab_order
// [274] set_tab_order
// [275] get_help_info
// [276] stop_sound_system
// [277] restart_sound_system
// [278] take_snapshot
// [279] handle_reactivate
// [280] draw_background
// [281] set_ideal_size
// [282] create_button
// [283] create_button
// [284] create_check_box
// [285] create_radio_button
// [286] create_text
// [287] create_text
// [288] create_text
// [289] create_input
// [290] create_edit
// [291] create_drop_down
// [292] create_list
// [293] create_scrollbar
// [294] create_auto_scrollbar
// [295] create_vert_slider
// [296] create_horz_slider
// [297] position_panel
// [298] `vector_deleting_destructor'
// [299] setup
// [300] set_rect
// [301] set_rect
// [302] set_color
// [303] set_active
// [304] set_positioning
// [305] set_fixed_position
// [306] set_redraw
// [307] set_overlapped_redraw
// [308] draw_setup
// [309] draw_finish
// [310] draw
// [311] draw_rect
// [312] draw_offset
// [313] draw_rect2
// [314] draw_offset2
// [315] paint
// [316] wnd_proc
// [317] handle_idle
// [318] handle_size
// [319] handle_paint
// [320] handle_key_down
// [321] handle_char
// [322] handle_command
// [323] handle_user_command
// [324] handle_timer_command
// [325] handle_scroll
// [326] handle_mouse_down
// [327] handle_mouse_move
// [328] handle_mouse_up
// [329] handle_mouse_dbl_click
// [330] mouse_move_action
// [331] mouse_left_down_action
// [332] mouse_left_hold_action
// [333] mouse_left_move_action
// [334] mouse_left_up_action
// [335] mouse_left_dbl_click_action
// [336] mouse_right_down_action
// [337] mouse_right_hold_action
// [338] mouse_right_move_action
// [339] mouse_right_up_action
// [340] mouse_right_dbl_click_action
// [341] key_down_action
// [342] char_action
// [343] action
// [344] get_true_render_rect
// [345] is_inside
// [346] set_focus
// [347] set_tab_order
// [348] set_tab_order
// [349] get_help_info
// [350] stop_sound_system
// [351] restart_sound_system
// [352] take_snapshot
// [353] handle_reactivate
// [354] set_text
// [355] set_text
// [356] set_text
// [357] set_bevel_info
//
// Member Layout:
// [0x478] TTextPanel * title
// [0x47C] long campaignListX
// [0x480] long campaignListY
// [0x484] long campaignListWidth
// [0x488] long campaignListHeight
// [0x48C] TTextPanel * campaignTitle
// [0x490] TListPanel * campaignList
// [0x494] TScrollBarPanel * campaignScrollbar
// [0x498] long scenarioListX
// [0x49C] long scenarioListY
// [0x4A0] long scenarioListWidth
// [0x4A4] long scenarioListHeight
// [0x4A8] TTextPanel * scenarioTitle
// [0x4AC] TListPanel * scenarioList
// [0x4B0] TScrollBarPanel * scenarioScrollbar
// [0x4B4] TTextPanel * difficultyTitle
// [0x4B8] TDropDownPanel * difficultyDrop
// [0x4BC] TButtonPanel * okButton
// [0x4C0] TButtonPanel * cancelButton
// [0x4C4] TButtonPanel * close_button
// [0x4C8] int campaignsLoaded
// ----------------------------------------------------------------

// Function: TRIBE_Screen_Campaign_Selection
// Address: 004909d0
// [HELPER] s_Campaign_Selection_Screen: "Campaign Selection Screen"
// [HELPER] s_scr2: "scr2"
/* public: __thiscall TRIBE_Screen_Campaign_Selection::TRIBE_Screen_Campaign_Selection(void) */

TRIBE_Screen_Campaign_Selection * __thiscall
TRIBE_Screen_Campaign_Selection::TRIBE_Screen_Campaign_Selection
          (TRIBE_Screen_Campaign_Selection *this)
{
  TListPanel **ppTVar1;
  TDropDownPanel **ppTVar2;
  TButtonPanel **ppTVar3;
  TButtonPanel **ppTVar4;
  TButtonPanel *pTVar5;
  long lVar6;
  int iVar7;
  undefined4 *unaff_FS_OFFSET;
  TPanel *tabList [5];
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055e948;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  tabList[0] = (TPanel *)this;
  TScreenPanel::TScreenPanel((TScreenPanel *)this,s_Campaign_Selection_Screen);
  local_4 = 0;
  this->_padding_ = (int)&_vftable_;
  init_vars(this);
  lVar6 = TScreenPanel::setup((TScreenPanel *)this,rge_base_game->draw_area,&s_scr2,0xc384,1);
  if (lVar6 == 0) {
    this->_padding_ = 1;
    *unaff_FS_OFFSET = local_c;
    return this;
  }
  TEasy_Panel::setup_shadow_area((TEasy_Panel *)this,0);
  TEasy_Panel::set_ideal_size((TEasy_Panel *)this,0x280,0x1e0);
                    /* language.dll match for 0x2bcd: "Campaign" */
  iVar7 = TEasy_Panel::create_text
                    ((TEasy_Panel *)this,(TPanel *)this,&this->title,0x2bcd,0x14,10,600,0x1e,1,1,0,0
                    );
  if (iVar7 != 0) {
    ppTVar1 = &this->campaignList;
    this->campaignListX = 0x14;
    this->campaignListY = 0x46;
    this->campaignListWidth = 600;
                    /* language.dll match for 0x82: "B" */
    this->campaignListHeight = 0x82;
    iVar7 = TEasy_Panel::create_list
                      ((TEasy_Panel *)this,(TPanel *)this,ppTVar1,0x14,0x46,600,0x82,0xb);
    if (iVar7 != 0) {
      iVar7 = TEasy_Panel::create_auto_scrollbar
                        ((TEasy_Panel *)this,&this->campaignScrollbar,(TTextPanel *)*ppTVar1,0x14);
      if (iVar7 != 0) {
                    /* language.dll match for 0x2bce: "Select Campaign" */
        iVar7 = TEasy_Panel::create_text
                          ((TEasy_Panel *)this,(TPanel *)this,&this->campaignTitle,0x2bce,
                           this->campaignListX + -5,this->campaignListY + -0x14,200,0x14,4,0,0,0);
        if (iVar7 != 0) {
                    /* language.dll match for 0x2b5d: "Loading list of campaigns..." */
          (**(code **)((*ppTVar1)->_padding_ + 0xe4))(0x2b5d);
          iVar7 = this->campaignListHeight + 0x1e + this->campaignListY;
          ppTVar1 = &this->scenarioList;
          this->scenarioListX = 0x14;
          this->scenarioListY = iVar7;
          this->scenarioListWidth = 600;
                    /* language.dll match for 0x82: "B" */
          this->scenarioListHeight = 0x82;
          iVar7 = TEasy_Panel::create_list
                            ((TEasy_Panel *)this,(TPanel *)this,ppTVar1,0x14,iVar7,600,0x82,0xb);
          if (iVar7 != 0) {
            iVar7 = TEasy_Panel::create_auto_scrollbar
                              ((TEasy_Panel *)this,&this->scenarioScrollbar,(TTextPanel *)*ppTVar1,
                               0x14);
            if (iVar7 != 0) {
                    /* language.dll match for 0x25fe: "Select Scenario" */
              iVar7 = TEasy_Panel::create_text
                                ((TEasy_Panel *)this,(TPanel *)this,&this->scenarioTitle,0x25fe,
                                 this->scenarioListX + -5,this->scenarioListY + -0x14,200,0x14,4,0,0
                                 ,0);
              if (iVar7 != 0) {
                    /* language.dll match for 0x2bcf: "Difficulty Level" */
                (*ppTVar1)->_padding_ = 0;
                iVar7 = TEasy_Panel::create_text
                                  ((TEasy_Panel *)this,(TPanel *)this,&this->difficultyTitle,0x2bcf,
                                   0xf,0x172,200,0x14,4,0,0,0);
                if (iVar7 != 0) {
                  ppTVar2 = &this->difficultyDrop;
                    /* language.dll match for 0x82: "B" */
                  iVar7 = TEasy_Panel::create_drop_down
                                    ((TEasy_Panel *)this,(TPanel *)this,ppTVar2,0x82,100,0x14,0x186,
                                     0x82,0x18,0xb);
                  if (iVar7 != 0) {
                    TDropDownPanel::empty_list(*ppTVar2);
                    /* language.dll match for 0x2bd4: "Easiest" */
                    TDropDownPanel::append_line(*ppTVar2,0x2bd4,4);
                    /* language.dll match for 0x2bd3: "Easy" */
                    TDropDownPanel::append_line(*ppTVar2,0x2bd3,3);
                    /* language.dll match for 0x2bd2: "Moderate" */
                    TDropDownPanel::append_line(*ppTVar2,0x2bd2,2);
                    /* language.dll match for 0x2bd1: "Hard" */
                    TDropDownPanel::append_line(*ppTVar2,0x2bd1,1);
                    /* language.dll match for 0x2bd0: "Hardest" */
                    TDropDownPanel::append_line(*ppTVar2,0x2bd0,0);
                    iVar7 = RGE_Base_Game::difficulty(rge_base_game);
                    lVar6 = TDropDownPanel::get_line(*ppTVar2,iVar7);
                    TDropDownPanel::set_line(*ppTVar2,lVar6);
                    ppTVar3 = &this->okButton;
                    /* language.dll match for 0xfa1: "OK" */
                    iVar7 = TEasy_Panel::create_button
                                      ((TEasy_Panel *)this,(TPanel *)this,ppTVar3,0xfa1,0,0x46,0x1b8
                                       ,0xf0,0x1e,0,0,0);
                    if (iVar7 != 0) {
                    /* language.dll match for 0xfa2: "Cancel" */
                      iVar7 = TEasy_Panel::create_button
                                        ((TEasy_Panel *)this,(TPanel *)this,&this->cancelButton,
                                         0xfa2,0,0x14a,0x1b8,0xf0,0x1e,0,0,0);
                      if (iVar7 != 0) {
                        pTVar5 = this->cancelButton;
                        pTVar5->hotkey = 0x1b;
                        pTVar5->hotkey_shift = 0;
                        ppTVar4 = &this->close_button;
                    /* language.dll match for 0x3ea: "X" */
                        iVar7 = TEasy_Panel::create_button
                                          ((TEasy_Panel *)this,(TPanel *)this,ppTVar4,0x3ea,0,0,0,0,
                                           0,-1,-1,0);
                        if (iVar7 != 0) {
                          (**(code **)((*ppTVar4)->_padding_ + 0x14))(1);
                          (**(code **)((*ppTVar4)->_padding_ + 0x18))
                                    (9,4,4,4,4,0x11,0x11,0x11,0x11,0,0,0,0);
                          tabList[2] = (TPanel *)this->scenarioList;
                          tabList[3] = (TPanel *)*ppTVar2;
                          tabList[1] = (TPanel *)this->campaignList;
                          tabList[4] = (TPanel *)*ppTVar3;
                          TPanel::set_tab_order((TPanel *)this,tabList + 1,5);
                          TPanel::set_curr_child((TPanel *)this,(TPanel *)*ppTVar3);
                          fillCampaigns(this);
                          fillScenarios(this);
                          TPanel::set_curr_child((TPanel *)this,(TPanel *)this->campaignList);
                          this->campaignsLoaded = 1;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  *unaff_FS_OFFSET = local_c;
  return this;
}

// --------------------------------------------------

// Function: `vector_deleting_destructor'
// Address: 00490e10
/* public: virtual void * __thiscall TRIBE_Screen_Campaign_Selection::`vector deleting
   destructor'(unsigned int) */

void * __thiscall
TRIBE_Screen_Campaign_Selection::_vector_deleting_destructor_
          (TRIBE_Screen_Campaign_Selection *this,uint param_1)
{
  ~TRIBE_Screen_Campaign_Selection(this);
  if ((param_1 & 1) != 0) {
    operator_delete(this);
  }
  return this;
}

// --------------------------------------------------

// Function: init_vars
// Address: 00490e30
/* protected: void __thiscall TRIBE_Screen_Campaign_Selection::init_vars(void) */

void __thiscall TRIBE_Screen_Campaign_Selection::init_vars(TRIBE_Screen_Campaign_Selection *this)
{
  int iVar1;
  
  this->title = (TTextPanel *)0x0;
  this->campaignTitle = (TTextPanel *)0x0;
  this->campaignList = (TListPanel *)0x0;
  this->campaignScrollbar = (TScrollBarPanel *)0x0;
  this->scenarioTitle = (TTextPanel *)0x0;
  this->scenarioList = (TListPanel *)0x0;
  this->scenarioScrollbar = (TScrollBarPanel *)0x0;
  this->difficultyTitle = (TTextPanel *)0x0;
  this->difficultyDrop = (TDropDownPanel *)0x0;
  this->okButton = (TButtonPanel *)0x0;
  this->cancelButton = (TButtonPanel *)0x0;
  this->close_button = (TButtonPanel *)0x0;
  this->campaignsLoaded = 0;
  iVar1 = RGE_Base_Game::get_single_player_difficulty(rge_base_game);
  RGE_Base_Game::setDifficulty(rge_base_game,iVar1);
  return;
}

// --------------------------------------------------

// Function: ~TRIBE_Screen_Campaign_Selection
// Address: 00490ea0
/* public: virtual __thiscall
   TRIBE_Screen_Campaign_Selection::~TRIBE_Screen_Campaign_Selection(void) */

void __thiscall
TRIBE_Screen_Campaign_Selection::~TRIBE_Screen_Campaign_Selection
          (TRIBE_Screen_Campaign_Selection *this)
{
  undefined4 *unaff_FS_OFFSET;
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  pcStack_8 = FUN_0055e968;
  local_c = *unaff_FS_OFFSET;
  *unaff_FS_OFFSET = &local_c;
  this->_padding_ = (int)&_vftable_;
  local_4 = 0;
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->title);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->campaignTitle);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->campaignList);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->campaignScrollbar);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->scenarioTitle);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->scenarioList);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->scenarioScrollbar);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->difficultyTitle);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->difficultyDrop);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->okButton);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->cancelButton);
  TPanel::delete_panel((TPanel *)this,(TPanel **)&this->close_button);
  local_4 = 0xffffffff;
  TScreenPanel::~TScreenPanel((TScreenPanel *)this);
  *unaff_FS_OFFSET = local_c;
  return;
}

// --------------------------------------------------

// Function: handle_idle
// Address: 00490f90
/* public: virtual long __thiscall TRIBE_Screen_Campaign_Selection::handle_idle(void) */

long __thiscall TRIBE_Screen_Campaign_Selection::handle_idle(TRIBE_Screen_Campaign_Selection *this)
{
  long lVar1;
  
  if (this->campaignsLoaded == 0) {
    fillCampaigns(this);
    fillScenarios(this);
    TPanel::set_curr_child((TPanel *)this,(TPanel *)this->campaignList);
    this->campaignsLoaded = 1;
    if (this->campaignsLoaded == 0) goto LAB_00490fe0;
  }
  if (rge_base_game->input_enabled == 0) {
    RGE_Base_Game::enable_input(rge_base_game);
  }
LAB_00490fe0:
  lVar1 = TPanel::handle_idle((TPanel *)this);
  return lVar1;
}

// --------------------------------------------------

// Function: action
// Address: 00490ff0
// [HELPER] s_Campaign_Selection_Screen: "Campaign Selection Screen"
// [HELPER] s_Name_Selection_Screen: "Name Selection Screen"
/* protected: virtual long __thiscall TRIBE_Screen_Campaign_Selection::action(class TPanel
   *,long,unsigned long,unsigned long) */

long __thiscall
TRIBE_Screen_Campaign_Selection::action
          (TRIBE_Screen_Campaign_Selection *this,TPanel *param_1,long param_2,ulong param_3,
          ulong param_4)
{
  RGE_Game_Info *this_00;
  TRIBE_Screen_Name *this_01;
  long lVar1;
  undefined4 *unaff_FS_OFFSET;
  undefined4 uVar2;
  undefined4 local_c;
  code *pcStack_8;
  undefined4 local_4;
  
  local_c = *unaff_FS_OFFSET;
  local_4 = 0xffffffff;
  pcStack_8 = FUN_0055e98b;
  *unaff_FS_OFFSET = &local_c;
  if ((param_1 != (TPanel *)0x0) && (this->campaignsLoaded != 0)) {
    if (((TButtonPanel *)param_1 == this->okButton) && (param_2 == 1)) {
      startGame(this);
      *unaff_FS_OFFSET = local_c;
      return 1;
    }
    if (((TButtonPanel *)param_1 == this->cancelButton) && (param_2 == 1)) {
      RGE_Base_Game::disable_input(rge_base_game);
      this_01 = (TRIBE_Screen_Name *)operator_new(0x4a0);
      local_4 = 0;
      if (this_01 != (TRIBE_Screen_Name *)0x0) {
        TRIBE_Screen_Name::TRIBE_Screen_Name(this_01);
      }
      local_4 = 0xffffffff;
      TPanelSystem::setCurrentPanel(&panel_system,s_Name_Selection_Screen,0);
      TPanelSystem::destroyPanel(&panel_system,s_Campaign_Selection_Screen);
      *unaff_FS_OFFSET = local_c;
      return 1;
    }
    if (((TButtonPanel *)param_1 == this->close_button) && (param_2 == 1)) {
      RGE_Base_Game::close(rge_base_game);
      *unaff_FS_OFFSET = local_c;
      return 1;
    }
    if (((TListPanel *)param_1 == this->campaignList) && (param_2 == 1)) {
      this_00 = rge_base_game->player_game_info;
      lVar1 = TTextPanel::get_id((TTextPanel *)this->campaignList);
      RGE_Game_Info::set_current_campaign(this_00,lVar1);
      fillScenarios(this);
      *unaff_FS_OFFSET = local_c;
      return 1;
    }
    if (((TListPanel *)param_1 == this->scenarioList) && (param_2 == 3)) {
      uVar2 = 0;
      (**(code **)(this->_padding_ + 0xb4))(this->okButton,1,0,0);
      *unaff_FS_OFFSET = uVar2;
      return 1;
    }
  }
  lVar1 = TEasy_Panel::action((TEasy_Panel *)this,param_1,param_2,param_3,param_4);
  *unaff_FS_OFFSET = local_c;
  return lVar1;
}

// --------------------------------------------------

// Function: fillCampaigns
// Address: 004911a0
/* WARNING: Variable defined which should be unmapped: campaigns */
/* protected: void __thiscall TRIBE_Screen_Campaign_Selection::fillCampaigns(void) */

void __thiscall
TRIBE_Screen_Campaign_Selection::fillCampaigns(TRIBE_Screen_Campaign_Selection *this)
{
  RGE_Game_Info *this_00;
  long lVar1;
  long lVar2;
  int iVar3;
  char **campaigns;
  long currentCampaign;
  long local_4;
  
  TTextPanel::empty_list((TTextPanel *)this->campaignList);
  currentCampaign = 0;
  lVar1 = RGE_Game_Info::get_campaign_list
                    (rge_base_game->player_game_info,(char ***)&currentCampaign,&local_4);
  if (lVar1 != 0) {
    iVar3 = 0;
    this->campaignList->_padding_ = 1;
    if (0 < lVar1) {
      do {
        TTextPanel::append_line
                  ((TTextPanel *)this->campaignList,*(char **)(currentCampaign + iVar3 * 4),iVar3);
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    lVar2 = TTextPanel::get_line((TTextPanel *)this->campaignList,local_4);
    TTextPanel::set_line((TTextPanel *)this->campaignList,lVar2);
    iVar3 = 0;
    if (0 < lVar1) {
      do {
        free(*(undefined4 *)(currentCampaign + iVar3 * 4));
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    free(currentCampaign);
    lVar1 = TTextPanel::get_line((TTextPanel *)this->campaignList);
    if (lVar1 != -1) {
      this_00 = rge_base_game->player_game_info;
      lVar1 = TTextPanel::get_id((TTextPanel *)this->campaignList);
      RGE_Game_Info::set_current_campaign(this_00,lVar1);
    }
  }
  return;
}

// --------------------------------------------------

// Function: fillScenarios
// Address: 00491290
/* WARNING: Variable defined which should be unmapped: scenarios */
/* protected: void __thiscall TRIBE_Screen_Campaign_Selection::fillScenarios(void) */

void __thiscall
TRIBE_Screen_Campaign_Selection::fillScenarios(TRIBE_Screen_Campaign_Selection *this)
{
  long lVar1;
  long lVar2;
  int iVar3;
  char **scenarios;
  long currentScenario;
  long local_4;
  
  TTextPanel::empty_list((TTextPanel *)this->scenarioList);
  currentScenario = 0;
  lVar1 = RGE_Game_Info::get_scenario_list
                    (rge_base_game->player_game_info,(char ***)&currentScenario,&local_4);
  if (lVar1 != 0) {
    iVar3 = 0;
    if (0 < lVar1) {
      do {
        TTextPanel::append_line
                  ((TTextPanel *)this->scenarioList,*(char **)(currentScenario + iVar3 * 4),iVar3);
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    lVar2 = TTextPanel::get_line((TTextPanel *)this->scenarioList,local_4);
    TTextPanel::set_line((TTextPanel *)this->scenarioList,lVar2);
    iVar3 = 0;
    if (0 < lVar1) {
      do {
        free(*(undefined4 *)(currentScenario + iVar3 * 4));
        iVar3 = iVar3 + 1;
      } while (iVar3 < lVar1);
    }
    free(currentScenario);
    TListPanel::scroll_cur_line(this->scenarioList,'\a',0,1);
  }
  return;
}

// --------------------------------------------------

// Function: startGame
// Address: 00491350
/* WARNING: Variable defined which should be unmapped: scenario_info */
/* protected: void __thiscall TRIBE_Screen_Campaign_Selection::startGame(void) */

void __thiscall TRIBE_Screen_Campaign_Selection::startGame(TRIBE_Screen_Campaign_Selection *this)
{
  RGE_Game_Info *this_00;
  long lVar1;
  RGE_Scenario *this_01;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  T_Scenario *scenario_info;
  int first_any_color;
  TEasy_Panel *local_8;
  
  lVar1 = TTextPanel::get_line((TTextPanel *)this->scenarioList);
  if (lVar1 != -1) {
    this_00 = rge_base_game->player_game_info;
    lVar1 = TTextPanel::get_line((TTextPanel *)this->scenarioList);
    RGE_Game_Info::set_current_scenario(this_00,lVar1);
    RGE_Base_Game::setScenarioGame(rge_base_game,1);
    RGE_Base_Game::setCampaignGame(rge_base_game,1);
    uVar5 = 0;
    RGE_Base_Game::setSavedGame(rge_base_game,0);
    TRIBE_Game::setVictoryType((TRIBE_Game *)rge_base_game,VictoryDefault,0);
    lVar1 = TDropDownPanel::get_id(this->difficultyDrop);
    RGE_Base_Game::setDifficulty(rge_base_game,lVar1);
    lVar1 = TDropDownPanel::get_id(this->difficultyDrop);
    RGE_Base_Game::set_single_player_difficulty(rge_base_game,lVar1);
    TRIBE_Game::setDeathMatch((TRIBE_Game *)rge_base_game,'\0');
    TRIBE_Game::setQuickStartGame((TRIBE_Game *)rge_base_game,'\0');
    TRIBE_Game::setAnimals((TRIBE_Game *)rge_base_game,1);
    TRIBE_Game::setPredators((TRIBE_Game *)rge_base_game,1);
    RGE_Base_Game::setFullVisibility(rge_base_game,0);
    RGE_Base_Game::setFogOfWar(rge_base_game,1);
    RGE_Base_Game::setAllowCheatCodes(rge_base_game,1);
    TRIBE_Game::setRandomizePositions((TRIBE_Game *)rge_base_game,0);
    TRIBE_Game::setLongCombat((TRIBE_Game *)rge_base_game,0);
    TRIBE_Game::setAllowTrading((TRIBE_Game *)rge_base_game,1);
    TRIBE_Game::setFullTechTree((TRIBE_Game *)rge_base_game,0);
    TRIBE_Game::setResourceLevel((TRIBE_Game *)rge_base_game,DefaultResources);
    TRIBE_Game::setStartingAge((TRIBE_Game *)rge_base_game,DefaultAge);
    TRIBE_Game::setStartingUnits((TRIBE_Game *)rge_base_game,0);
    iVar4 = -1;
    local_8 = (TEasy_Panel *)0x0;
    this_01 = RGE_Base_Game::get_scenario_info(rge_base_game,(char *)0x0,1);
    if (this_01 == (RGE_Scenario *)0x0) {
                    /* language.dll match for 0x9ca: "This scenario does not work with the trial
                       version." */
      TEasy_Panel::popupOKDialog((TEasy_Panel *)this,0x9ca,(char *)0x0,0x1c2,100);
      return;
    }
    iVar6 = 0;
    do {
      iVar2 = RGE_Scenario::Get_player_Active(this_01,iVar6);
      if (iVar2 != 0) {
        TRIBE_Game::setScenarioPlayer((TRIBE_Game *)rge_base_game,uVar5,iVar6);
        TRIBE_Game::setPlayerColor((TRIBE_Game *)rge_base_game,uVar5,iVar6 + 1);
        RGE_Base_Game::setPlayerTeam(rge_base_game,uVar5,1);
        uVar5 = uVar5 + 1;
        if ((iVar4 == -1) && (iVar2 = RGE_Scenario::Get_player_Type(this_01,iVar6), iVar2 == 1)) {
          iVar4 = iVar6;
          local_8 = (TEasy_Panel *)(iVar6 + 1);
        }
      }
      iVar6 = iVar6 + 1;
    } while (iVar6 < 9);
    (**(code **)(this_01->_padding_ + 4))(1);
    if (uVar5 != 0) {
      RGE_Base_Game::setNumberPlayers(rge_base_game,uVar5);
      if (iVar4 != -1) {
        iVar6 = 1;
        if (1 < (int)uVar5) {
          do {
            iVar2 = TRIBE_Game::scenarioPlayer((TRIBE_Game *)rge_base_game,iVar6);
            if (iVar2 == iVar4) {
              iVar2 = TRIBE_Game::scenarioPlayer((TRIBE_Game *)rge_base_game,0);
              TRIBE_Game::setScenarioPlayer((TRIBE_Game *)rge_base_game,iVar6,iVar2);
              iVar2 = TRIBE_Game::playerColor((TRIBE_Game *)rge_base_game,0);
              TRIBE_Game::setPlayerColor((TRIBE_Game *)rge_base_game,iVar6,iVar2);
              break;
            }
            iVar6 = iVar6 + 1;
          } while (iVar6 < (int)uVar5);
        }
        TRIBE_Game::setScenarioPlayer((TRIBE_Game *)rge_base_game,0,iVar4);
        TRIBE_Game::setPlayerColor((TRIBE_Game *)rge_base_game,0,(int)this_01);
      }
      TCommunications_Handler::SetPlayerHumanity(comm,1,ME_HUMAN);
      uVar3 = 1;
      if (1 < (int)uVar5) {
        do {
          uVar3 = uVar3 + 1;
          TCommunications_Handler::SetPlayerHumanity(comm,uVar3,ME_COMPUTER);
        } while ((int)uVar3 < (int)uVar5);
      }
      while ((int)uVar5 < 9) {
        uVar5 = uVar5 + 1;
        TCommunications_Handler::SetPlayerHumanity(comm,uVar5,ME_ABSENT);
      }
      iVar4 = TRIBE_Game::start_game((TRIBE_Game *)rge_base_game,0);
      if (iVar4 == 0) {
                    /* language.dll match for 0x961: "An error occurred while trying to start the
                       game." */
        TEasy_Panel::popupOKDialog(local_8,0x961,(char *)0x0,0x1c2,100);
      }
    }
  }
  return;
}

// --------------------------------------------------

